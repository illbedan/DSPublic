<?xml version="1.0" encoding="ISO-8859-1" ?>
<cmud>
<window name="DSPublic" statusbar="false" left="438" top="120" width="1204" height="994">
  <uid>{601F6102-6F51-4839-B1E5-381D54467980}</uid>
  <packages>English Directions|English Keypad|Clickable URLs|unsavory|DSPublic</packages>
  <tab name="score"/>
  <tab name="gua"/>
  <loc name="dan" color="blue">
    <value>67</value>
  </loc>
  <class name="affectslist">
    <trigger priority="300">
      <pattern>^({@affectnames})  %sPermanent.</pattern>
      <value>;#say %1, %2, %3, %4, %5
affectslist.%1=-1</value>
    </trigger>
    <trigger priority="300">
      <pattern>^({@affectnames})  %s~[%s(%n)day%s(%n)hour%s(%n)min ~]</pattern>
      <value>;#say %1, %2, %3, %4, %5
affectslist.%1=(%2*30*24+%3*30+%4/2)</value>
    </trigger>
    <var name="affectslist" type="Record" sorted="1">
      <value>Armor=710|Blur=711|Contingency=-1|Darkvision=-1|Fly=709|Protection=712|Sanctuary=-1</value>
      <json>{"Armor":710,"Blur":711,"Contingency":-1,"Darkvision":-1,"Fly":709,"Protection":712,"Sanctuary":-1}</json>
    </var>
    <trigger priority="730">
      <pattern>------ Affecting Spells ------</pattern>
      <value>affectslist=""
;#ALARM affecttimer *5 {
;#IF @playing {
; #LOOPDB @affectslist {
;  #IF (%val=1 or %val=0) {#delkey affectslist %key}
;  #IF (%val&gt;1) {affectslist.%key=%val-2}
;  }
;  }
;  #say @affectslist
;}
;#say @affectnames</value>
    </trigger>
    <alias name="affectsinit">
      <value><![CDATA[#dbfirst
affinlist=""
affoutlist=""
affectnames=""
affintoname=""
affouttoname=""
#WHILE (!%null(%rec)) {
  affinlist=%additem(&in, @affinlist)
  affoutlist=%additem(&out, @affoutlist)
  affectnames=%additem(&affectname, @affectnames)
  #FORALL &in {
    affintoname=%addkey(@affintoname, %i, &affectname) 
  }
  #FORALL &out {
    affouttoname=%addkey(@affouttoname, %i, &affectname) 
  }
  #DBNEXT
  }
aff group]]></value>
    </alias>
    <var name="affinlist" type="StringList">
      <value>Your thoughts and body become as one!|"You smile as an armor spell is now protecting you.|You catch a glimpse of a shining armor hanging in the air, then it goes invisible.|You catch a glimpse of a shining armor hanging in the air around you, then it goes invisible.|With a flick of your hand you call upon magic to protect you.|The Lords of Orhan accept your plea for protection.|The Lords of Orhan elect to renew your armor spell.|You concentrate upon your magic armor and channel more power into it.|You update your armor spell.|You feel the Lords of Orhan protecting you.|You feel someone protecting you."|"Eight-inch, wickedly-sharp thorns sprout from your barkskin!|You make your armor of thorns denser."|You radiate pure evil as despair fills your heart.|"Ah, much better now I look like a tree...|You remove the old dry bark, replacing it with a new fresh one."|You mumble a word of turning. Be gone blades!|"You bless yourself again, for safety's sake|You bless yourself. Glory B!|You feel righteous.|You wield the Warhammer of Justice."|"You focus your energy and create a reflective shield about your body.|You renew your magical forcefield."|"You start to blur in and out of phase.|You blur a bit longer."|"Combat we shall, Now fast and hard!|You will keep yourself alert for a while longer."|Ouch! That Really did HURT!|"The dark elemental blesses you with the power to see in the dark.|The dark elemental agrees to renew your darkvision."|"Your eyes tingle.|Your eyes tingle briefly."|"You grow small black bat-wings and start flapping.|You make your wings stay longer."|You focus your mind and create a magical force field around you.|"You feel your muscles grow and stretch!|You already look like a bear!"|"Suddenly the world starts to slow down.|Cool it, any more haste and you would get a heart attack."|"You make your holy suit of armor stay a while longer.|You make the sign of the cross. Protect me my deity!"|May the god be with me.|You burst into flames but suddenly realize your mistake and quickly transform fire to ice.|You throw a handful of sulphur over your head and ignite it!|You vanish|zxcoiuqr3nlkndsf|"You renew your ties to life blood.|A warm feeling fills your body as you channel life's blood from within."|"You rip a rift in the space-time continuum connecting your soul with your body.|You strain yourself to hold up the space time continuum rift a little longer."|You become a blur of kaleidoscopic color and split into mirror images of yourself.|asdlkjfasoiagfalkjasdf|"You feel spiritual.|You pray for yourself again, for safety's sake."|"You have a righteous feeling!|Praise the Lords, your plea for extra protection is granted!"|"You feel a slight sensation as your body system speeds up.|You feel comfortable as the regenerative powers are prolonged.|You feel comfortable as you prolong your regenerative powers."|You bleed more freely but you feel an inner energy building inside you.|"You start glowing.|You glow even brighter."|zxcvoisdafn,emwanfewaoiy|The shadow realm engulfs your body. You stop breathing.|"You can sense the protection of a thousand heroes.|The ancient spirits channel their power into your armor.|You hear the faint murmours of past warriors as a faint purple light surrounds you."|"You feel stronger.|You tense your hard muscles."|"You feel the heat of the sun as you start glowing.|Sunny day today, isn't?"|You are protected from great harm!!!|"New power pumps your veins!|You leech your lifeforce, aahhhh the POWER!"|No pain no gain!|You ask your god to strengthen your resolve in combat.|You are blind!|"Your weapon starts to drip with vile green poison.|Nothing new seems to happen."|The spirits of the shadowrealms watches over you!|You invoke the power of darkness.|You wield the Warhammer of Justice.</value>
      <json>["Your thoughts and body become as one!",["You smile as an armor spell is now protecting you.","You catch a glimpse of a shining armor hanging in the air, then it goes invisible.","You catch a glimpse of a shining armor hanging in the air around you, then it goes invisible.","With a flick of your hand you call upon magic to protect you.","The Lords of Orhan accept your plea for protection.","The Lords of Orhan elect to renew your armor spell.","You concentrate upon your magic armor and channel more power into it.","You update your armor spell.","You feel the Lords of Orhan protecting you.","You feel someone protecting you."],["Eight-inch, wickedly-sharp thorns sprout from your barkskin!","You make your armor of thorns denser."],"You radiate pure evil as despair fills your heart.",["Ah, much better now I look like a tree...","You remove the old dry bark, replacing it with a new fresh one."],"You mumble a word of turning. Be gone blades!",["You bless yourself again, for safety's sake","You bless yourself. Glory B!","You feel righteous.","You wield the Warhammer of Justice."],["You focus your energy and create a reflective shield about your body.","You renew your magical forcefield."],["You start to blur in and out of phase.","You blur a bit longer."],["Combat we shall, Now fast and hard!","You will keep yourself alert for a while longer."],"Ouch! That Really did HURT!",["The dark elemental blesses you with the power to see in the dark.","The dark elemental agrees to renew your darkvision."],["Your eyes tingle.","Your eyes tingle briefly."],["You grow small black bat-wings and start flapping.","You make your wings stay longer."],"You focus your mind and create a magical force field around you.",["You feel your muscles grow and stretch!","You already look like a bear!"],["Suddenly the world starts to slow down.","Cool it, any more haste and you would get a heart attack."],["You make your holy suit of armor stay a while longer.","You make the sign of the cross. Protect me my deity!"],"May the god be with me.","You burst into flames but suddenly realize your mistake and quickly transform fire to ice.","You throw a handful of sulphur over your head and ignite it!","You vanish","zxcoiuqr3nlkndsf",["You renew your ties to life blood.","A warm feeling fills your body as you channel life's blood from within."],["You rip a rift in the space-time continuum connecting your soul with your body.","You strain yourself to hold up the space time continuum rift a little longer."],"You become a blur of kaleidoscopic color and split into mirror images of yourself.","asdlkjfasoiagfalkjasdf",["You feel spiritual.","You pray for yourself again, for safety's sake."],["You have a righteous feeling!","Praise the Lords, your plea for extra protection is granted!"],["You feel a slight sensation as your body system speeds up.","You feel comfortable as the regenerative powers are prolonged.","You feel comfortable as you prolong your regenerative powers."],"You bleed more freely but you feel an inner energy building inside you.",["You start glowing.","You glow even brighter."],"zxcvoisdafn,emwanfewaoiy","The shadow realm engulfs your body. You stop breathing.",["You can sense the protection of a thousand heroes.","The ancient spirits channel their power into your armor.","You hear the faint murmours of past warriors as a faint purple light surrounds you."],["You feel stronger.","You tense your hard muscles."],["You feel the heat of the sun as you start glowing.","Sunny day today, isn't?"],"You are protected from great harm!!!",["New power pumps your veins!","You leech your lifeforce, aahhhh the POWER!"],"No pain no gain!","You ask your god to strengthen your resolve in combat.","You are blind!",["Your weapon starts to drip with vile green poison.","Nothing new seems to happen."],"The spirits of the shadowrealms watches over you!","You invoke the power of darkness.","You wield the Warhammer of Justice."]</json>
    </var>
    <var name="affoutlist" type="StringList">
      <value>Your deadly concentration breaks.|"You feel less protected.|You see a shining set of armor materialize in the air before you, then it suddenly dissolves."|Your thorns wither to death and drop to your feet.|Your aura of despair dissolves.|You once again feel naked.|You can no longer sense your invisible sphere of turning.|"You feel less righteous.|You stop using the Warhammer of Justice."|Your magical forcefield dissolves as the effort to maintain it becomes too much.|You stop blurring!|You relax a bit.|"You feel somewhat better as|You feel somewhat better."|Your ability to see in the dark is no more.|The detect invisible wears off.|The wings on your back shrink into nothingness.|You now feel all of your opponents blows.|You feel much weaker.|The world suddenly starts spinning.|Your holy suit of armor dissolves.|God is no longer with you and your holy aura fades away.|Water begins to flow from your shoulders, it's springtime!|Hmmm... Seems like sulphur don't burn too long :(|"You become visible again.|You feel yourself exposed."|asdofdiuzxv|Your ties with life's blood fades.|You let out a soft sigh as the space time continuum returns to normal.|Your kaleidoscopic mirage collapses in on itself as the magics expire.|A warm feeling runs through your body.|You feel less spiritual.|You feel less protected from all the horrible things in the world.|You shiver slightly as your body system slows down.|You feel better as your magical field dissolves.|The white aura around your body fades.|asdfiozxcvoiuzkhwefkbj|You return to your original form.|The spirits of the past return to their alternate existence along with your magical protection.|You feel weaker.|Your sun shield wears off.|"Your surroundings start to change!|Your contingency fails, TOUGH LUCK!"|Finally you feel that your health is restored!|You grind your teeth in pain as you realize how hurt you actually are.|You seem a little less faithful.|"The cloak of blindness around you dissolves|You feel better. Your vision returns!|Your vision returns!"|The last drop of venom drips off of|Your shadow enshrouds you!|You stretch out for your shadow...|Your shadow hums innocently as it pretends to protect you!|</value>
      <json>["Your deadly concentration breaks.",["You feel less protected.","You see a shining set of armor materialize in the air before you, then it suddenly dissolves."],"Your thorns wither to death and drop to your feet.","Your aura of despair dissolves.","You once again feel naked.","You can no longer sense your invisible sphere of turning.",["You feel less righteous.","You stop using the Warhammer of Justice."],"Your magical forcefield dissolves as the effort to maintain it becomes too much.","You stop blurring!","You relax a bit.",["You feel somewhat better as","You feel somewhat better."],"Your ability to see in the dark is no more.","The detect invisible wears off.","The wings on your back shrink into nothingness.","You now feel all of your opponents blows.","You feel much weaker.","The world suddenly starts spinning.","Your holy suit of armor dissolves.","God is no longer with you and your holy aura fades away.","Water begins to flow from your shoulders, it's springtime!","Hmmm... Seems like sulphur don't burn too long :(",["You become visible again.","You feel yourself exposed."],"asdofdiuzxv","Your ties with life's blood fades.","You let out a soft sigh as the space time continuum returns to normal.","Your kaleidoscopic mirage collapses in on itself as the magics expire.","A warm feeling runs through your body.","You feel less spiritual.","You feel less protected from all the horrible things in the world.","You shiver slightly as your body system slows down.","You feel better as your magical field dissolves.","The white aura around your body fades.","asdfiozxcvoiuzkhwefkbj","You return to your original form.","The spirits of the past return to their alternate existence along with your magical protection.","You feel weaker.","Your sun shield wears off.",["Your surroundings start to change!","Your contingency fails, TOUGH LUCK!"],"Finally you feel that your health is restored!","You grind your teeth in pain as you realize how hurt you actually are.","You seem a little less faithful.",["The cloak of blindness around you dissolves","You feel better. Your vision returns!","Your vision returns!"],"The last drop of venom drips off of","Your shadow enshrouds you!","You stretch out for your shadow...","Your shadow hums innocently as it pretends to protect you!",""]</json>
    </var>
    <trigger priority="980">
      <pattern>^({@affinlist})$</pattern>
      <value>#ADDKEY affectslist @affintoname.%1 1
;#say ping</value>
    </trigger>
    <var name="tempvar">Sanctuary</var>
    <var name="affectstokeep" type="StringList">
      <value>Haste|Blood Mirror|Prayer|Regenerate|Contingency</value>
      <json>["Haste","Blood Mirror","Prayer","Regenerate","Contingency"]</json>
    </var>
    <alias name="determineaffectstokeep">
      <value><![CDATA[affectstokeep=""
#IF (@iswarlock>0 or @ismagician>0) {#additem affectstokeep Haste}
#IF @iswarlock>0 {#additem affectstokeep Combat}
#If (@iswarlock>1 and %1="group") {#additem affectstokeep "Ritual Of Pain"}
#IF @istemplar>0 {#additem affectstokeep "Holy Armor"}
#IF @istemplar=2 {#additem affectstokeep "Gods Blessing"}
#IF ((%1="group" and @charlevel>77 and @ismagician>0) or (@ismagician>0 and %1="solo") ) {#additem affectstokeep "Blood Mirror"}
#IF (@ismagician=2 and @charlevel>54 and !%ismember(@affectstokeep, "Blood Mirror")) {#additem affectstokeep "Force Field"}
#IF (@ispriest=1 or @istemplar>0) {#additem affectstokeep Prayer}
;#IF ((@ispriest=1 or @istemplar>0) and %1="group") {#additem affectstokeep Bless}
#IF (@ispriest>0) {#additem affectstokeep Regenerate}
#IF (@ispriest=0 and @istemplar+@ismagician+@iswarlock+@isanimist+@isnightblade>0) {getregen=1} {getregen=0}
#IF @isnightblade>1 {#additem affectstokeep "Life Blood"}
#IF @isnightblade>0 {#additem affectstokeep "Mountain Heart"}
#IF (%1!="solo" and @isnightblade>0 and @currentmaxmana>600) {#additem affectstokeep "Adrenal Focus"}
#IF (@isnightblade>0 and %1!="solo") {#additem affectstokeep "Shadow Displacement"}
#IF @isnightblade>3 {#additem affectstokeep "Venom"}
#IF @isnightblade>1 {#additem affectstokeep "Deathshadow"}
#IF @isanimist>0 {#additem affectstokeep Barkskin}
#IF @isanimist>0 {#additem affectstokeep "Armor Of Thorns"}
#IF @ismagician>0 {#additem affectstokeep "Contingency"}
#IF ((@ismagician=2 or @iswarlock=2) and %1="group") {#additem affectstokeep "Blood Rite"}
#IF (%1="solo" and (@ismagician+@iswarlock+@ispriest+@isnightblade+@isanimist+@istemplar>0)) {#additem affectstokeep Armor}
#IF (%1="solo" and (@ismagician+@iswarlock+@isnightblade>0)) {#additem affectstokeep Blur}
#IF (%1="solo" and (@istemplar+@ispriest>0)) {#additem affectstokeep Protection}
#IF (%1="solo" and (@isanimist>0)) {#additem affectstokeep "Giant Size"}
#IF (@charrace!="K'ta'viir" and (@ismagician+@ispriest+@isnightblade+@iswarlock+@isanimist+@istemplar>0)) {aff add "Detect Invisibility"}]]></value>
    </alias>
    <trigger priority="980">
      <pattern>^({@affoutlist})</pattern>
      <value>#DELKEY affectslist @affouttoname.%1
;#say pong @affouttoname.%1
#IF (@affouttoname.%1="Sanctuary" and @aholy and @ispriest&gt;0) {cast 'holyword'}
#IF (@fighting=0 and %ismember(@affouttoname.%1, @affectstokeep) and @affouttoname.%1!="Blood Rite" and @affouttoname.%1!="Venom" and @affouttoname.%1!="Armor Of Thorns" and @affouttoname.%1!="Shadow Displacement") {
  cast '@affouttoname.%1'
  #IF (@affouttoname.%1="Barkskin" and %ismember("Armor Of Thorns", @affectstokeep)) {cast 'Armor Of Thorns'}
  #IF @affouttoname.%1="Adrenal Focus" {#ADD commandpending 1}
  }
#IF (@affouttoname.%1="Shadow Displacement" and @leader != @charname) {cast 'Shadow Displacement' @leader}
#IF (@fighting=0 and %ismember(@affouttoname.%1, @affectstokeep) and @affouttoname.%1="Venom") {cast '@affouttoname.%1' @currentweapon}</value>
    </trigger>
    <alias name="castspellupkeep">
      <value>#IF (@getregen and !@ispriest) {getregenspell}
#IF (@aholy and !%ismember("Sanctuary", @affectslist)) {cast 'holyword'}
#IF !%null(@affectslist."Critical Wounds") {
  #IF (@isanimist+@istemplar+@ispriest&gt;0) {cast 'cure critic'} {getcc}
  }
#FORALL @affectstokeep {#IF (%null(@affectslist.%i) and %i!="Blood Rite") {
  #IF %i="Venom" {cast 'Venom' @currentweapon} {
  #IF %i="Shadow Displacement" {#IF (@leading=0 and @leader=@charname) {} {cast 'Shadow Displacement' %if(@leading, @priestlist.1, @leader)}} {
  #IF (%i="Adrenal Focus" and @adrenalpending) {} {cast '%i'}
  }
  }
  }
  }
#IF (%ismember(Blood Rite, @affectstokeep) and @currentmaxhp&gt;%eval(@maxhp-50) and @currentmana&lt;%eval(@currentmaxmana-300)) {cast 'blood rite'}</value>
    </alias>
    <var name="affectnames" type="StringList">
      <value>Adrenal Focus|Armor|Armor Of Thorns|Aura Of Despair|Barkskin|Bladeturn|Bless|Blood Mirror|Blur|Combat|Critical Wounds|Darkvision|Detect Invisibility|Fly|Force Field|Giant Size|Haste|Holy Armor|Holy Aura|Immolation Cold|Immolation Fire|Improved Invisibility|Invisibility|Life Blood|Mana Shield|Mirror Image|Poison|Prayer|Protection|Regenerate|Ritual Of Pain|Sanctuary|Serenity|Shadow Form|Spirit Armor|Strength|Sun Shield|Contingency|Blood Rite|Mountain Heart|Gods Blessing|Blindness|Venom|Deathshadow|Shadow Displacement</value>
      <json>["Adrenal Focus","Armor","Armor Of Thorns","Aura Of Despair","Barkskin","Bladeturn","Bless","Blood Mirror","Blur","Combat","Critical Wounds","Darkvision","Detect Invisibility","Fly","Force Field","Giant Size","Haste","Holy Armor","Holy Aura","Immolation Cold","Immolation Fire","Improved Invisibility","Invisibility","Life Blood","Mana Shield","Mirror Image","Poison","Prayer","Protection","Regenerate","Ritual Of Pain","Sanctuary","Serenity","Shadow Form","Spirit Armor","Strength","Sun Shield","Contingency","Blood Rite","Mountain Heart","Gods Blessing","Blindness","Venom","Deathshadow","Shadow Displacement"]</json>
    </var>
    <alias name="aff">
      <value>#IF %1="add" {
  #IF %2="Immolation Fire" {aff remove "Immolation Cold"}
  #IF %2="Immolation Cold" {aff remove "Immolation Fire"}
  #IF %ismember(%2, @affectnames) {#additem affectstokeep %2
  #say
  #say %2 Added to affects upkeep. New affects upkeep list :
  #say @affectstokeep}}
#IF %1="remove" {#delitem affectstokeep %2
  #say
  #say %2 Removed from affects upkeep. New affects upkeep list :
  #say @affectstokeep}
#IF %1="solo" {determineaffectstokeep solo}
#IF %1="group" {determineaffectstokeep group}
#IF %null(%1) {#say
  #say Affects upkeep list : 
  #say @affectstokeep
  }
  #IF %1="none" {affectstokeep=""}</value>
    </alias>
    <var name="aholy">0</var>
    <alias name="respell">
      <value>#IF @recentrespell {} {castspellupkeep;recentrespell=1;#alarm +5 {recentrespell=0}}</value>
    </alias>
    <var name="recentrespell">0</var>
    <alias name="getregenspell">
      <value>#IF (@priestlist="" and @halfpriestlist="" and @leading=0) {} {
    priestlist=%delitem(@leader, @priestlist)
    halfpriestlist=%delitem(@leader, @halfpriestlist)
  #IF @halfpriestlist="" {
    askregenchar=%item(@priestlist, %random(1, %numitems(@priestlist)))
    } {
    askregenchar=%item(@halfpriestlist|@priestlist, %random(1, %numitems(@halfpriestlist|@priestlist)))
    }
  #IF (@getregen and %null(@affectslist.Regenerate)) {ask @askregenchar regen}
}</value>
    </alias>
    <var name="askregenchar">Halo</var>
    <var name="getregen">0</var>
    <alias name="immo">
      <value>#IF @leading {gt immo %1}
#IF (@iswarlock&gt;0) {
  #IF %1="cold" {aff remove "immolation fire";aff add "immolation cold";castspellupkeep}
  #IF %1="on" {aff remove "immolation fire";aff add "immolation cold";castspellupkeep}
  #IF %1="fire" {aff remove "immolation cold";aff add "immolation fire";castspellupkeep}
  #IF %1="off" {aff remove "immolation fire";aff remove "immolation cold";#IF %iskey(@affectslist,"Immolation Fire") {cast 'immolation cold'};#IF %iskey(@affectslist, "Immolation Cold") {cast 'immolation fire'}}
  }</value>
    </alias>
    <var name="affintoname" type="Record">
      <value>The ancient spirits channel their power into your armor.=Spirit Armor|You become a blur of kaleidoscopic color and split into mirror images of yourself.=Mirror Image|You feel comfortable as you prolong your regenerative powers.=Regenerate|Your thoughts and body become as one!=Adrenal Focus|Praise the Lords, your plea for extra protection is granted!=Protection|You mumble a word of turning. Be gone blades!=Bladeturn|You feel righteous.=Bless|You pray for yourself again, for safety's sake.=Prayer|You feel someone protecting you.=Armor|You catch a glimpse of a shining armor hanging in the air, then it goes invisible.=Armor|asdlkjfasoiagfalkjasdf=Poison|The dark elemental agrees to renew your darkvision.=Darkvision|You throw a handful of sulphur over your head and ignite it!=Immolation Fire|You focus your mind and create a magical force field around you.=Force Field|You remove the old dry bark, replacing it with a new fresh one.=Barkskin|You blur a bit longer.=Blur|You bless yourself. Glory B!=Bless|The spirits of the shadowrealms watches over you!=Deathshadow|You grow small black bat-wings and start flapping.=Fly|You feel comfortable as the regenerative powers are prolonged.=Regenerate|You rip a rift in the space-time continuum connecting your soul with your body.=Mana Shield|The Lords of Orhan accept your plea for protection.=Armor|You strain yourself to hold up the space time continuum rift a little longer.=Mana Shield|You renew your ties to life blood.=Life Blood|You bless yourself again, for safety's sake=Bless|Your eyes tingle.=Detect Invisibility|You feel the heat of the sun as you start glowing.=Sun Shield|You hear the faint murmours of past warriors as a faint purple light surrounds you.=Spirit Armor|You wield the Warhammer of Justice=Bless|Cool it, any more haste and you would get a heart attack.=Haste|zxcoiuqr3nlkndsf=Invisibility|You concentrate upon your magic armor and channel more power into it.=Armor|Suddenly the world starts to slow down.=Haste|Your weapon starts to drip with vile green poison.=Venom|You can sense the protection of a thousand heroes.=Spirit Armor|You focus your energy and create a reflective shield about your body.=Blood Mirror|You invoke the power of darkness.=Shadow Displacement|You will keep yourself alert for a while longer.=Combat|The Lords of Orhan elect to renew your armor spell.=Armor|You feel a slight sensation as your body system speeds up.=Regenerate|You make your holy suit of armor stay a while longer.=Holy Armor|You burst into flames but suddenly realize your mistake and quickly transform fire to ice.=Immolation Cold|You make your wings stay longer.=Fly|You ask your god to strengthen your resolve in combat.=Gods Blessing|You tense your hard muscles.=Strength|Ouch! That Really did HURT!=Critical Wounds|zxcvoisdafn,emwanfewaoiy=Serenity|A warm feeling fills your body as you channel life's blood from within.=Life Blood|Your eyes tingle briefly.=Detect Invisibility|You start glowing.=Sanctuary|Sunny day today, isn't?=Sun Shield|You make the sign of the cross. Protect me my deity!=Holy Armor|You vanish=Improved Invisibility|Combat we shall, Now fast and hard!=Combat|You feel stronger.=Strength|You have a righteous feeling!=Protection|Ah, much better now I look like a tree...=Barkskin|New power pumps your veins!=Blood Rite|Nothing new seems to happen.=Venom|The dark elemental blesses you with the power to see in the dark.=Darkvision|You radiate pure evil as despair fills your heart.=Aura Of Despair|You wield the Warhammer of Justice.=Bless|You catch a glimpse of a shining armor hanging in the air around you, then it goes invisible.=Armor|With a flick of your hand you call upon magic to protect you.=Armor|Eight-inch, wickedly-sharp thorns sprout from your barkskin!=Armor Of Thorns|You renew your magical forcefield.=Blood Mirror|You bleed more freely but you feel an inner energy building inside you.=Ritual Of Pain|No pain no gain!=Mountain Heart|May the god be with me.=Holy Aura|The shadow realm engulfs your body. You stop breathing.=Shadow Form|You update your armor spell.=Armor|You glow even brighter.=Sanctuary|You leech your lifeforce, aahhhh the POWER!=Blood Rite|You feel the Lords of Orhan protecting you.=Armor|You already look like a bear!=Giant Size|You are protected from great harm!!!=Contingency|You make your armor of thorns denser.=Armor Of Thorns|You smile as an armor spell is now protecting you.=Armor|You start to blur in and out of phase.=Blur|You feel spiritual.=Prayer|You feel your muscles grow and stretch!=Giant Size|You are blind!=Blindness</value>
      <json>{"The ancient spirits channel their power into your armor.":"Spirit Armor","You become a blur of kaleidoscopic color and split into mirror images of yourself.":"Mirror Image","You feel comfortable as you prolong your regenerative powers.":"Regenerate","Your thoughts and body become as one!":"Adrenal Focus","Praise the Lords, your plea for extra protection is granted!":"Protection","You mumble a word of turning. Be gone blades!":"Bladeturn","You feel righteous.":"Bless","You pray for yourself again, for safety's sake.":"Prayer","You feel someone protecting you.":"Armor","You catch a glimpse of a shining armor hanging in the air, then it goes invisible.":"Armor","asdlkjfasoiagfalkjasdf":"Poison","The dark elemental agrees to renew your darkvision.":"Darkvision","You throw a handful of sulphur over your head and ignite it!":"Immolation Fire","You focus your mind and create a magical force field around you.":"Force Field","You remove the old dry bark, replacing it with a new fresh one.":"Barkskin","You blur a bit longer.":"Blur","You bless yourself. Glory B!":"Bless","The spirits of the shadowrealms watches over you!":"Deathshadow","You grow small black bat-wings and start flapping.":"Fly","You feel comfortable as the regenerative powers are prolonged.":"Regenerate","You rip a rift in the space-time continuum connecting your soul with your body.":"Mana Shield","The Lords of Orhan accept your plea for protection.":"Armor","You strain yourself to hold up the space time continuum rift a little longer.":"Mana Shield","You renew your ties to life blood.":"Life Blood","You bless yourself again, for safety's sake":"Bless","Your eyes tingle.":"Detect Invisibility","You feel the heat of the sun as you start glowing.":"Sun Shield","You hear the faint murmours of past warriors as a faint purple light surrounds you.":"Spirit Armor","You wield the Warhammer of Justice":"Bless","Cool it, any more haste and you would get a heart attack.":"Haste","zxcoiuqr3nlkndsf":"Invisibility","You concentrate upon your magic armor and channel more power into it.":"Armor","Suddenly the world starts to slow down.":"Haste","Your weapon starts to drip with vile green poison.":"Venom","You can sense the protection of a thousand heroes.":"Spirit Armor","You focus your energy and create a reflective shield about your body.":"Blood Mirror","You invoke the power of darkness.":"Shadow Displacement","You will keep yourself alert for a while longer.":"Combat","The Lords of Orhan elect to renew your armor spell.":"Armor","You feel a slight sensation as your body system speeds up.":"Regenerate","You make your holy suit of armor stay a while longer.":"Holy Armor","You burst into flames but suddenly realize your mistake and quickly transform fire to ice.":"Immolation Cold","You make your wings stay longer.":"Fly","You ask your god to strengthen your resolve in combat.":"Gods Blessing","You tense your hard muscles.":"Strength","Ouch! That Really did HURT!":"Critical Wounds","zxcvoisdafn,emwanfewaoiy":"Serenity","A warm feeling fills your body as you channel life's blood from within.":"Life Blood","Your eyes tingle briefly.":"Detect Invisibility","You start glowing.":"Sanctuary","Sunny day today, isn't?":"Sun Shield","You make the sign of the cross. Protect me my deity!":"Holy Armor","You vanish":"Improved Invisibility","Combat we shall, Now fast and hard!":"Combat","You feel stronger.":"Strength","You have a righteous feeling!":"Protection","Ah, much better now I look like a tree...":"Barkskin","New power pumps your veins!":"Blood Rite","Nothing new seems to happen.":"Venom","The dark elemental blesses you with the power to see in the dark.":"Darkvision","You radiate pure evil as despair fills your heart.":"Aura Of Despair","You wield the Warhammer of Justice.":"Bless","You catch a glimpse of a shining armor hanging in the air around you, then it goes invisible.":"Armor","With a flick of your hand you call upon magic to protect you.":"Armor","Eight-inch, wickedly-sharp thorns sprout from your barkskin!":"Armor Of Thorns","You renew your magical forcefield.":"Blood Mirror","You bleed more freely but you feel an inner energy building inside you.":"Ritual Of Pain","No pain no gain!":"Mountain Heart","May the god be with me.":"Holy Aura","The shadow realm engulfs your body. You stop breathing.":"Shadow Form","You update your armor spell.":"Armor","You glow even brighter.":"Sanctuary","You leech your lifeforce, aahhhh the POWER!":"Blood Rite","You feel the Lords of Orhan protecting you.":"Armor","You already look like a bear!":"Giant Size","You are protected from great harm!!!":"Contingency","You make your armor of thorns denser.":"Armor Of Thorns","You smile as an armor spell is now protecting you.":"Armor","You start to blur in and out of phase.":"Blur","You feel spiritual.":"Prayer","You feel your muscles grow and stretch!":"Giant Size","You are blind!":"Blindness"}</json>
    </var>
    <var name="affouttoname" type="Record">
      <value>Your magical forcefield dissolves as the effort to maintain it becomes too much.=Blood Mirror|You relax a bit.=Combat|The detect invisible wears off.=Detect Invisibility|Your holy suit of armor dissolves.=Holy Armor|You feel less righteous.=Bless|The wings on your back shrink into nothingness.=Fly|Your deadly concentration breaks.=Adrenal Focus|You feel less protected.=Armor|The spirits of the past return to their alternate existence along with your magical protection.=Spirit Armor|Your surroundings start to change!=Contingency|Your aura of despair dissolves.=Aura Of Despair|Your ability to see in the dark is no more.=Darkvision|You now feel all of your opponents blows.=Force Field|Finally you feel that your health is restored!=Blood Rite|You feel less protected from all the horrible things in the world.=Protection|asdofdiuzxv=Invisibility|Your kaleidoscopic mirage collapses in on itself as the magics expire.=Mirror Image|Your contingency fails, TOUGH LUCK!=Contingency|You grind your teeth in pain as you realize how hurt you actually are.=Mountain Heart|Your ties with life's blood fades.=Life Blood|You feel weaker.=Strength|Your thorns wither to death and drop to your feet.=Armor Of Thorns|Your vision returns!=Blindness|Water begins to flow from your shoulders, it's springtime!=Immolation Cold|You shiver slightly as your body system slows down.=Regenerate|God is no longer with you and your holy aura fades away.=Holy Aura|You return to your original form.=Shadow Form|The world suddenly starts spinning.=Haste|The last drop of venom drips off of=Venom|You feel better as your magical field dissolves.=Ritual Of Pain|You let out a soft sigh as the space time continuum returns to normal.=Mana Shield|You become visible again.=Improved Invisibility|You see a shining set of armor materialize in the air before you, then it suddenly dissolves.=Armor|Your sun shield wears off.=Sun Shield|Your shadow enshrouds you!=Deathshadow|You stop using the Warhammer of Justice.=Bless|You seem a little less faithful.=Gods Blessing|You stop blurring!=Blur|You feel better. Your vision returns!=Blindness|Hmmm... Seems like sulphur don't burn too long :(=Immolation Fire|The cloak of blindness around  you dissolves=Blindness|You feel somewhat better.=Critical Wounds|A warm feeling runs through your body.=Poison|You feel much weaker.=Giant Size|The white aura around your body fades.=Sanctuary|You stretch out for your shadow...=Shadow Displacement|You once again feel naked.=Barkskin|You feel yourself exposed.=Improved Invisibility|You can no longer sense your invisible sphere of turning.=Bladeturn|You feel somewhat better as=Critical Wounds|Your shadow hums innocently as it pretends to protect you!=Deathshadow|asdfiozxcvoiuzkhwefkbj=Serenity|You feel less spiritual.=Prayer</value>
      <json>{"Your magical forcefield dissolves as the effort to maintain it becomes too much.":"Blood Mirror","You relax a bit.":"Combat","The detect invisible wears off.":"Detect Invisibility","Your holy suit of armor dissolves.":"Holy Armor","You feel less righteous.":"Bless","The wings on your back shrink into nothingness.":"Fly","Your deadly concentration breaks.":"Adrenal Focus","You feel less protected.":"Armor","The spirits of the past return to their alternate existence along with your magical protection.":"Spirit Armor","Your surroundings start to change!":"Contingency","Your aura of despair dissolves.":"Aura Of Despair","Your ability to see in the dark is no more.":"Darkvision","You now feel all of your opponents blows.":"Force Field","Finally you feel that your health is restored!":"Blood Rite","You feel less protected from all the horrible things in the world.":"Protection","asdofdiuzxv":"Invisibility","Your kaleidoscopic mirage collapses in on itself as the magics expire.":"Mirror Image","Your contingency fails, TOUGH LUCK!":"Contingency","You grind your teeth in pain as you realize how hurt you actually are.":"Mountain Heart","Your ties with life's blood fades.":"Life Blood","You feel weaker.":"Strength","Your thorns wither to death and drop to your feet.":"Armor Of Thorns","Your vision returns!":"Blindness","Water begins to flow from your shoulders, it's springtime!":"Immolation Cold","You shiver slightly as your body system slows down.":"Regenerate","God is no longer with you and your holy aura fades away.":"Holy Aura","You return to your original form.":"Shadow Form","The world suddenly starts spinning.":"Haste","The last drop of venom drips off of":"Venom","You feel better as your magical field dissolves.":"Ritual Of Pain","You let out a soft sigh as the space time continuum returns to normal.":"Mana Shield","You become visible again.":"Improved Invisibility","You see a shining set of armor materialize in the air before you, then it suddenly dissolves.":"Armor","Your sun shield wears off.":"Sun Shield","Your shadow enshrouds you!":"Deathshadow","You stop using the Warhammer of Justice.":"Bless","You seem a little less faithful.":"Gods Blessing","You stop blurring!":"Blur","You feel better. Your vision returns!":"Blindness","Hmmm... Seems like sulphur don't burn too long :(":"Immolation Fire","The cloak of blindness around  you dissolves":"Blindness","You feel somewhat better.":"Critical Wounds","A warm feeling runs through your body.":"Poison","You feel much weaker.":"Giant Size","The white aura around your body fades.":"Sanctuary","You stretch out for your shadow...":"Shadow Displacement","You once again feel naked.":"Barkskin","You feel yourself exposed.":"Improved Invisibility","You can no longer sense your invisible sphere of turning.":"Bladeturn","You feel somewhat better as":"Critical Wounds","Your shadow hums innocently as it pretends to protect you!":"Deathshadow","asdfiozxcvoiuzkhwefkbj":"Serenity","You feel less spiritual.":"Prayer"}</json>
    </var>
    <alias name="getcc">
      <value>$priest=""
#IF (@priestlist="" and @halfpriestlist="" and @leading=0) {group} {
    priestlist=%delitem(@leader, @priestlist)
    halfpriestlist=%delitem(@leader, @halfpriestlist)
  #IF @halfpriestlist="" {
    $priest=%item(@priestlist, %random(1, %numitems(@priestlist)))
    } {
    $priest=%item(@halfpriestlist|@priestlist, %random(1, %numitems(@halfpriestlist|@priestlist)))
    }
  #IF (!%null(@affectslist."Critical Wounds")) {ask $priest cc}
}</value>
    </alias>
    <trigger priority="9550">
      <pattern>Fire and cold, ah back to normal!</pattern>
      <value>; because it touches 2 affects, had to be special cased
#DELKEY affectslist "Immolation cold"
#DELKEY affectslist "Immolation fire"</value>
    </trigger>
  </class>
  <class name="autofight">
    <var name="waitstate">0</var>
    <alias name="autofightdecision">
      <value><![CDATA[;#say tank : @currenttank fighting : @fighting Assistpending: @assistpending commandpending: @commandpending
#IF @gagprompt {#say "";#say ""}
dmade=0
#IF @currenthp<@wimplevel {wimpout;dmade=1;botstatus="off"}
#IF !%null(@retreatdir) {retreat;@retreatdir;commandpending=1;dmade=1}
#IF (@cheating and @glanceval<11 and @grouped) {group self}
#IF (%numitems(@abusepr)>0 and @currenthp<(@maxhp-1000)) {#IF @abuseprindex>%numitems(@abusepr) {abuseprindex=1};ask %item(@abusepr, @abuseprindex) true;abuseprindex=@abuseprindex+1}
#IF ((@cop=0 and @ismagician>0 and !@commandpending) and ((@acop=1 and %numitems(@agglist)>0) or @needtorecop)) {
  #IF (@currentmana<0 and !@copoomtell) {copoomtell=1;t @leader I can't cop due to low mana ~(@currentmana~). I will try when I'm positive.} {
    #IF (@fighting and @currenttank!=@charname) {retreat;cast 'circle of protection';dmade=1;commandpending=@commandpending+1}
    #IF !@fighting {cast 'circle of protection';dmade=1;commandpending=@commandpending+1}
  }
  }
#IF (!@dmade and !@commandpending and @aassist and !@assistpending and !@fighting) {assist;assistpending=1}
#IF (@isfighter=2 and !@triedddance and @addance and !@ddance and @commandpending=0) {deathdance;triedddance=1}
#IF (!@dmade and @aholy and !%ismember("Sanctuary", @affectslist) and @ispriest>0) {cast 'holyword'}
#IF (@adrain and @currentmana>=@currentmaxmana) {retreat;adrain=0;afight=0}
#IF (@adrain and @fighting and !@commandpending) {ed burgl;commandpending=@commandpending+1;dmade=1}
#IF (@arescue and (@isfighter+@istemplar)>0 and !@dmade and !%ismember(@currenttank, @norescuelist)) {rescue @currenttank;dmade=1}
#IF (!@dmade and !@commandpending and !%null(@mainheal) and @aselfheal and !@wildmagic and !@nomagic and @currenthp<@maxhp*0.70) {@mainheal;commandpending=1;dmade=1}
#IF (@aheal and !@dmade) {
#IF !@groupcheckpending {groupcheck}
} {#IF (@afight and !@dmade) {fightingpart}}]]></value>
    </alias>
    <var name="dmade">1</var>
    <alias name="wimpout">
      <value>#IF @norecall {#IF @currenttank=@charname {flee} {#IF @leading {} {retreat;%reversedir(@lastgroupdir)}}} {
  justrecalled=1
  #IF @nomagic {quaff escape;get escape @weaponcontainer} {
    #IF @ispriest&gt;0 {cast 'word of recall'} {
      #IF @isnightblade+@ismagician+@iswarlock&gt;0 {cast 'teleport without error'} {
        quaff escape;get escape @weaponcontainer
        }
      }
    }
  }</value>
    </alias>
    <var name="primarystab" type="Literal"/>
    <var name="lowmanaspell" type="Literal"/>
    <var name="secondarystab" type="Literal"/>
    <var name="assistpending">0</var>
    <var name="commandpending">0</var>
    <var name="aassist">1</var>
    <trigger priority="2070">
      <pattern>Who should the spell be cast upon?</pattern>
      <value>fighting=0</value>
    </trigger>
    <var name="currentdam">
      <value>cast 'fire seeds'</value>
      <json>cast 'fire seeds'</json>
    </var>
    <var name="afight">1</var>
    <var name="aheal">0</var>
    <var name="groupcheckpending">0</var>
    <alias name="groupcheck">
      <value>#IF (@ispriest=2) {group 0-%max(@ghp,@thp,@gphp,@mhp)} {group 0-%max(@ghp,@thp,@mhp)}
groupcheckpending=1
lowcharname=""
lowcharremaininghp=100000
gpownum=0</value>
    </alias>
    <var name="ghp">65</var>
    <var name="thp">65</var>
    <var name="mhp">-10</var>
    <var name="gphp">70</var>
    <var name="gphpn">3</var>
    <trigger priority="2630">
      <pattern>Your group consists of:</pattern>
      <value>lowcharname=""
lowcharremaininghp=1092384</value>
    </trigger>
    <var name="groupheallist" type="Literal"/>
    <trigger priority="4740">
      <pattern>~[(%n)%s(%w)~/(%w)~]%s(%w)%s~[{| |  }(%n)~%H%s(%n)~%M%s%n~%V~]%s%n~.%d%d~%</pattern>
      <value><![CDATA[#ADDITEM grouplist %4
#ADDKEY grouplevellist %4 %1
#IF (%2=Pr and %3=Pr and %1>50) {#ADDITEM priestlist %4}
#IF (%2=Pr and %3=Pr and %1>50) {#ADDKEY priestmanadb %4 %6}
#IF (%2=Pr xor %3=Pr and %1>50) {#ADDITEM halfpriestlist %4}
#IF (%2=Ma or %3=Ma and %1>50) {#ADDITEM magicianlist %4}
#IF (%2=Nb or %3=Nb and %1>50) {#ADDITEM nightbladelist %4}
#IF (%2=An and %3=An) {#ADDITEM animistlist %4}
#IF (@rescuescanning>0 and !%ismember(%4, @norescuelist)) {
  #IF @rescuescanning=1 {#IF (%ismember(%3, Ma|Pr|Wl|An) and !%ismember(%2, Fi|Te)) {#ADDITEM rescuelist %4}}
  #IF @rescuescanning=2 {#IF (!%ismember(%3, Fi|Te)) {#ADDITEM rescuelist %4}}
  #IF @rescuescanning=3 {#ADDITEM rescuelist %4}
}
#IF %4=@leader {
  #IF %5<=@thp {
    #IF (@lowcharremaininghp>%eval(@healestimateclasses.%2+3*@healestimateclasses.%3*%1/50*%5/100)) {
      lowcharremaininghp=%eval(@healestimateclasses.%2+3*@healestimateclasses.%3*%1/50*%5/100)
      lowcharname=%4  
      }
    }
  } {
  #IF %5<=@ghp {
    #IF (@lowcharremaininghp>%eval(@healestimateclasses.%2+3*@healestimateclasses.%3*%1/50*%5/100)) {
      lowcharremaininghp=%eval(@healestimateclasses.%2+3*@healestimateclasses.%3*%1/50*%5/100)
      lowcharname=%4  
      }
    }
}
#IF %5<@gphp {gpownum=@gpownum+1}]]></value>
    </trigger>
    <trigger priority="17110">
      <pattern>~[%n%sMob%s~]%s%w's %w Elemental named '(%w)'%s~[%s(%n)~%H%s%n~%M%s%n~%V~]%s%n.%n~%$</pattern>
      <value>#IF %2&lt;=@ghp {
  #IF (@lowcharremaininghp&gt;3000) {
    lowcharremaininghp=3000
    lowcharname=%1  
    }
  }</value>
    </trigger>
    <trigger priority="17110">
      <pattern>~[%n%sMob%s~]%s%w's Phoenix named '(%w)'%s~[%s(%n)~%H%s%n~%M%s%n~%V~]%s%n.%n~%$</pattern>
      <value>#IF %2&lt;=@ghp {
  #IF (@lowcharremaininghp&gt;3000) {
    lowcharremaininghp=3000
    lowcharname=%1  
    }
  }</value>
    </trigger>
    <trigger priority="17110">
      <pattern>~[%n%sMob%s~]%s%w's Spectre named '(%w)'%s~[%s(%n)~%H%s%n~%M%s%n~%V~]%s%n.%n~%$</pattern>
      <value>#IF %2&lt;=@ghp {
  #IF (@lowcharremaininghp&gt;3000) {
    lowcharremaininghp=3000
    lowcharname=%1  
    }
  }</value>
    </trigger>
    <trigger priority="17110">
      <pattern>~[%n%sMob%s~]%s%w's Wolf named '(%w)'%s~[%s(%n)~%H%s%n~%M%s%n~%V~]%s%n.%n~%$</pattern>
      <value>#IF %2&lt;=@ghp {
  #IF (@lowcharremaininghp&gt;3000) {
    lowcharremaininghp=3000
    lowcharname=%1  
    }
  }</value>
    </trigger>
    <trigger priority="4760">
      <pattern>%sPresent:%s%n%sMissing:%s%n</pattern>
      <value>#IF @groupcheckpending {
groupcheckpending=0
healact=""
#IF @ispriest=2 {lowmana=150}
#IF @isanimist=2 {lowmana=60}
#IF @ispriest=1 {lowmana=50}
#IF @lowcharname!="" {healact=@mainheal+ " " + @lowcharname}
#IF @wildmagic {healact=""}
#IF (@gpownum&gt;=@gphpn and @ispriest=2) {healact="cast 'grouppowerheal'"}
#IF %ismember("Blindness", @affectslist) {#IF (@healact="cast 'grouppowerheal'" or @wildmagic) {healact="cast 'groupheal'"} {healact="cast 'heal'"}}
#IF (@aheal and @healact!="" and @currentmana&gt;@lowmana and !@commandpending) {@healact;commandpending=@commandpending+1;healact=""}
#IF (!@commandpending and @afight and @fighting) {fightingpart}
}
#IF @rescuescanning&gt;0 {rescuescanning=0}</value>
    </trigger>
    <var name="healestimateclasses" type="Record">
      <value>Wl=375|Te=700|Ro=625|Pr=500|Nb=450|Ma=350|Fi=925|An=500</value>
      <json>{"Wl":375,"Te":700,"Ro":625,"Pr":500,"Nb":450,"Ma":350,"Fi":925,"An":500}</json>
    </var>
    <var name="lowcharremaininghp">1092384</var>
    <var name="lowcharname" type="Literal"/>
    <var name="gpownum">33</var>
    <var name="healact" type="Literal"/>
    <var name="mainheal" type="Literal">cast 'powerheal'</var>
    <var name="assistmoblist" type="StringList">
      <value>A great soulcrusher stands here.|The soulcrusher glances at you with fear.|A blurred figure stands here.|A lesser lich of the Sarakeshian order glares at you with its empty eyes.|A skeleton clad in a dark cloak stands here, hatred glowing in its eye sockets.</value>
      <json>["A great soulcrusher stands here.","The soulcrusher glances at you with fear.","A blurred figure stands here.","A lesser lich of the Sarakeshian order glares at you with its empty eyes.","A skeleton clad in a dark cloak stands here, hatred glowing in its eye sockets."]</json>
    </var>
    <trigger priority="5930">
      <pattern>^{@assistmoblist}</pattern>
    </trigger>
    <var name="lowmanaskill" type="Literal"/>
    <var name="commandmessages" type="StringList">
      <value>Let's do nothing, nothing at all!|You lost your concentration!|Who should the spell be cast upon?|You grab|Headbang who?|You try to grab|and leaves a burn mark big as a fist.|SPLAM! Bulls eye, the ice bolt hit|Small sparks run up and down|Sorry, it ain't happening yet.|You solemnly chant to the mighty healing gods.|You enshroud|You are enshrouded in your own vampiric mists!|You utter a single arcane word of pain.|You quickly focus your energy on a blow.|Your thoughts and body become as one!|You call forth the flames of HELL!|You call forth raw elemental energy.|You call forth swirling elemental energy.|You focus your will.|makes a strange sound as you place|You suddenly swell to gigantic proportions and utter a WORD to smite your foes!|You cant seem to do that here!|You bring up black fire from hell to engulf all monsters!|head with your bony DANISH head!|You can't summon enough energy to cast the spell.|You can't do anything while in the clutches of The neo-otyugh.|You call upon your gods to pass judgement.|The wimp isn't here|You draw a sharp blade across|and you nearly cut your own finger!|Kinda hard right now while|You make a handful of seeds glow fiery red and hurl them at|You make a blistering beam of light strike from the sky.|You can't do this sitting!|makes a strange sound but is suddenly very silent as you place|You can't seem to sneak around the back of your target!|Backstab who?|You struggle to break free from The cloaker's grasp but fail.|Nah... You feel too relaxed to do that...|Ok.|Maybe you should get on your feet first?|You quickly circle the area, drawing a circle of protection.|You jumble the words as you attempt to cast.|Nobody here by that name.|Impossible!  You can't concentrate enough!|You summon upon powers to cast a true heal.|You chant loudly for the well being of your group.|You call upon higher beings for a miracle.|Nobody here by that name.|You chant for the well-being of your group.|You start to charge with the life energy of the earth, air and nearby organisms.|You evoke great powers and call upon a meteor!|Fry em!|Ice em!|You pummel|You fail your pummel|Maybe you should be fighting before you pummel?|You whirl your|You make scorching beams of light lance down from the sky.|You chant for transformation.|Your water bolt hit|You can't act, as Lloth has ceased the flow of time!|You unleash a spiralling volley of ice bolts.|You hurl a ferocious barrage of fire bolts.|You frantically flail your arms in the air, trying to impersonate a whirlwind...|You spank|makes a strange sound as you place|No way! You are fighting for your life!|You pray to the healing gods.</value>
      <json>["Let's do nothing, nothing at all!","You lost your concentration!","Who should the spell be cast upon?","You grab","Headbang who?","You try to grab","and leaves a burn mark big as a fist.","SPLAM! Bulls eye, the ice bolt hit","Small sparks run up and down","Sorry, it ain't happening yet.","You solemnly chant to the mighty healing gods.","You enshroud","You are enshrouded in your own vampiric mists!","You utter a single arcane word of pain.","You quickly focus your energy on a blow.","Your thoughts and body become as one!","You call forth the flames of HELL!","You call forth raw elemental energy.","You call forth swirling elemental energy.","You focus your will.","makes a strange sound as you place","You suddenly swell to gigantic proportions and utter a WORD to smite your foes!","You cant seem to do that here!","You bring up black fire from hell to engulf all monsters!","head with your bony DANISH head!","You can't summon enough energy to cast the spell.","You can't do anything while in the clutches of The neo-otyugh.","You call upon your gods to pass judgement.","The wimp isn't here","You draw a sharp blade across","and you nearly cut your own finger!","Kinda hard right now while","You make a handful of seeds glow fiery red and hurl them at","You make a blistering beam of light strike from the sky.","You can't do this sitting!","makes a strange sound but is suddenly very silent as you place","You can't seem to sneak around the back of your target!","Backstab who?","You struggle to break free from The cloaker's grasp but fail.","Nah... You feel too relaxed to do that...","Ok.","Maybe you should get on your feet first?","You quickly circle the area, drawing a circle of protection.","You jumble the words as you attempt to cast.","Nobody here by that name.","Impossible!  You can't concentrate enough!","You summon upon powers to cast a true heal.","You chant loudly for the well being of your group.","You call upon higher beings for a miracle.","Nobody here by that name.","You chant for the well-being of your group.","You start to charge with the life energy of the earth, air and nearby organisms.","You evoke great powers and call upon a meteor!","Fry em!","Ice em!","You pummel","You fail your pummel","Maybe you should be fighting before you pummel?","You whirl your","You make scorching beams of light lance down from the sky.","You chant for transformation.","Your water bolt hit","You can't act, as Lloth has ceased the flow of time!","You unleash a spiralling volley of ice bolts.","You hurl a ferocious barrage of fire bolts.","You frantically flail your arms in the air, trying to impersonate a whirlwind...","You spank","makes a strange sound as you place","No way! You are fighting for your life!","You pray to the healing gods."]</json>
    </var>
    <trigger priority="7000" trigontrig="false">
      <pattern>({@commandmessages})</pattern>
      <value>;#say @commandpending
#IF %1="Kinda hard right now while" {currenttank=@charname;#IF @commandpending=1 {autofightdecision}}
#IF @commandpending&gt;0 {commandpending=@commandpending-1}
#IF %1="You can't seem to sneak around the back of your target!" {currenttank=@charname;#IF @commandpending=0 {autofightdecision}}

#IF (@fighting=1 and !@qaread and @quickness and @commandpending&lt;(1+@quicknessval)) {autofightdecision}
#IF (%ismember(%1, @waitmessages) and !@quickness and @fighting=1) {waitstate=1}
#IF (%ismember(%1, @adrenalmessages)) {adrenalpending=0}
#IF %1="Ok." {#If @holypending=1 {holypending=0}}
#IF @assistpending {assistpending=0}
#IF @qaread {qaread=0}</value>
    </trigger>
    <alias name="roomscandecision">
      <value>#IF @findingguide {findguidedecision}</value>
    </alias>
    <var name="areaingok">0</var>
    <alias name="areaspellselect">
      <value>#IF @ismagician=2 {#IF @damtype=fire {currentdam="cast 'hell storm'"} {currentdam="cast 'plasma ball'"}}
#IF @ismagician=1 {#IF @damtype=fire {currentdam="cast 'hell storm'"} {currentdam="cast 'mass pain'"}}
#IF (@isanimist&gt;0 and @ismagician=0) {currentdam="cast 'sun ray'"}</value>
    </alias>
    <var name="aselfheal">0</var>
    <var name="primaryskill" type="Literal"/>
    <alias name="castaoe">
      <value>aoetmpdamtype=""
#IF @ismagician=2 {
  #IF @spelltype="fire" {cast 'hell storm'}
  #IF @spelltype="water" {cast 'mass pain'}
  #IF !%ismember(@spelltype, fire|water) {cast 'plasma ball'}
  }
#IF (@ismagician=1 and @isanimist=1) {
  #IF @spelltype="fire" {cast 'hell storm'}
  #IF @spelltype="pure" {cast 'sun ray'}
  #IF @spelltype="light" {cast 'sun ray'}
  #IF !%ismember(@spelltype, fire|pure|light) {cast 'mass pain'}
  }
#IF (@ismagician=1 and @isanimist=0) {
  #IF @spelltype="fire" {cast 'hell storm'}
  #IF @spelltype="electricity" {commandpending=0}
  #IF !%ismember(@spelltype, fire|electricity) {dance}
  }
#IF (@ismagician=0 and @isanimist&gt;0) {cast 'sun ray'}</value>
    </alias>
    <var name="waitmessages" type="StringList">
      <value>makes a strange sound as you place|You disengage battle and sneak to the rear.|You pummel</value>
      <json>["makes a strange sound as you place","You disengage battle and sneak to the rear.","You pummel"]</json>
    </var>
    <alias name="fightingpart">
      <value><![CDATA[;#say @qaread qaread
#IF (!@dmade and @commandpending<(%if(@quickness,1+@quicknessval,1)) and !%null(@currentdam) and ((%numitems(@agglist)>1 and ((%numitems(@knownmoblist)=0 or @knownmoblist=@agglist) and %numitems(@moblist)=0))) and !@nomagic and @currentmana>50 and (@ismagician+@isanimist)>0) {
  #IF (@qaread=0) {
    commandpending=@commandpending+1
    castaoe
    #IF @quickness {qaread=1}
    }
  dmade=1}
#IF (!@dmade and @commandpending<(%if(@quickness,1+@quicknessval,1)) and ((%numitems(@agglist)>1 and ((%numitems(@knownmoblist)=0 or @knownmoblist=@agglist) and %numitems(@moblist)=0))) and (@isfighter=2)) {commandpending=1;whirlwind;dmade=1}
#IF (!@dmade and @isfighter>0 and @aberserk and !@berserk) {berserk;dmade=1}
#IF (!@dmade and @commandpending<(%if(@quickness,1+@quicknessval,1)) and !%ismember("Adrenal Focus", @affectslist) and @isnightblade>0 and @charlevel>50 and @currentmana>50 and !@nomagic and !@adrenalpending) {cast 'adrenal focus';commandpending=@commandpending+1;adrenalpending=1;dmade=1}
#IF (!@dmade and @commandpending<(%if(@quickness,1+@quicknessval,1)) and !%null(@primarystab) and @currenttank!=@charname) {@primarystab;commandpending=@commandpending+1;dmade=1}
#IF (!@dmade and @commandpending<(%if(@quickness,1+@quicknessval,1)) and !%null(@currentdam) and !@wildmagic and @currentmana>@lowmana) {
  #IF (@iswarlock=2 and (@spelltype!="ice" or !%null(@abusepr) or @cheating) and !%ismember(@currenttarget, @immuneorresfiremobs) and @currentmana>1000 and @tofathighmana) {cast 'triad of fire';dmade=1;commandpending=@commandpending+1} {@currentdam;dmade=1;commandpending=@commandpending+1}
  }
#IF (!@dmade and @commandpending<(%if(@quickness,1+@quicknessval,1)) and !%null(@primaryskill)) {@primaryskill;dmade=1;commandpending=@commandpending+1}
#IF (!@dmade and @commandpending<(%if(@quickness,1+@quicknessval,1)) and !%null(@secondarystab) and @currenttank!=@charname) {@secondarystab;dmade=1;commandpending=@commandpending+1}
#IF (!@dmade and @commandpending<(%if(@quickness,1+@quicknessval,1)) and !%null(@secondarystab) and @currenttank=@charname and !@wildmagic and @currentmana>40) {@currentdam;dmade=1;commandpending=@commandpending+1}
#IF (!@dmade and @commandpending<(%if(@quickness,1+@quicknessval,1)) and !%null(@lowmanaspell) and !%null(@currentdam) and !@wildmagic and @currentmana>10) {@lowmanaspell;dmade=1;commandpending=@commandpending+1}
#IF (!@dmade and @commandpending<(%if(@quickness,1+@quicknessval,1)) and !%null(@lowmanaskill)) {@lowmanaskill;dmade=1;commandpending=@commandpending+1}
;#SAY @dmade and @commandpending and @quicknessval and @qaread
#IF @qaread=1 {} {
  #IF (@dmade and @commandpending<(1+@quicknessval) and @quickness) {dmade=0;fightingpart}
  }]]></value>
    </alias>
    <var name="adrain">0</var>
    <trigger priority="94670">
      <pattern>%w tells you 'drain'</pattern>
      <value>adrain=1
hit pixie</value>
    </trigger>
    <trigger priority="96400">
      <pattern>{But you are not the member of a group!|No one here by that name.|You can not enroll group members without being head of a group.}</pattern>
      <value>groupcheckpending=0</value>
    </trigger>
    <var name="aoetmpdamtype" type="Literal"/>
    <var name="arescue">0</var>
    <var name="norescuelist"/>
    <var name="aberserk">0</var>
    <var name="ddance">0</var>
    <var name="abuseprindex">2</var>
    <var name="addance">0</var>
    <var name="triedddance">0</var>
    <var name="rescuelist" type="StringList">
      <value>Rnv|Turia|Mask|Rakarth|Janice|Adema|Samba|Weiand|Twiggy|Tamara|Laazar|Overkill|Flame|Not|Greenknight|Kraftwerk|Damien|Zog|Ethernet|Yoggin</value>
      <json>["Rnv","Turia","Mask","Rakarth","Janice","Adema","Samba","Weiand","Twiggy","Tamara","Laazar","Overkill","Flame","Not","Greenknight","Kraftwerk","Damien","Zog","Ethernet","Yoggin"]</json>
    </var>
    <var name="arescuetype">Low</var>
    <var name="holypending"/>
    <trigger priority="143050">
      <pattern>Maybe you should be fighting before you pummel?</pattern>
      <value>fighting=0</value>
    </trigger>
    <trigger priority="113320">
      <pattern>You disengage battle and sneak to the rear.</pattern>
      <value>#IF !@quickness {waitstate=1}</value>
    </trigger>
    <class name="mggrouping">
      <trigger priority="1239" newline="false" prompt="true">
        <pattern>^(%n)~((%n)~)H (%n)~((%n)~)M (%n)~((%n)~)V &gt; (*):(%n)-(%n)~%</pattern>
        <value>glanceval=%8</value>
      </trigger>
      <var name="grouped">1</var>
      <var name="glanceval">5</var>
      <trigger priority="149460">
        <pattern>^@charname is no longer a member of your group.</pattern>
        <value>grouped=0</value>
      </trigger>
      <trigger priority="149470">
        <pattern>^@charname is now a member of your group.</pattern>
        <value>grouped=1</value>
      </trigger>
      <var name="cheating">0</var>
      <trigger priority="149470">
        <pattern>You group yourself.</pattern>
        <value>grouped=1</value>
      </trigger>
    </class>
    <var name="glanceval">100</var>
    <var name="qaread">0</var>
    <trigger priority="5700">
      <pattern>{You drive your blade into the base of|senses your attempt to skewer its brain and dodges your amateurish assassination attempt.}</pattern>
      <value>fighting=1
currenttank=@charname</value>
    </trigger>
    <trigger priority="6200">
      <pattern>You can't act, as Lloth has ceased the flow of time!</pattern>
      <value>groupcheckpending=0</value>
    </trigger>
    <var name="adrenalpending">0</var>
    <var name="adrenalmessages">Your thoughts and body become as one!|You continue your concentration.|You lost your concentration!</var>
  </class>
  <class name="autolog" enabled="false">
    <trigger priority="30" case="true" verbatim="true" newline="false" prompt="true">
      <pattern>Enter account password:</pattern>
      <value>#PW
#T- autolog
@charname
1
1
tog play
</value>
    </trigger>
    <trigger priority="5690" case="true" verbatim="true" newline="false" prompt="true">
      <pattern>Account name ('new' for new account, 'old' for old login system)?</pattern>
      <value>#CH</value>
    </trigger>
  </class>
  <class name="charactervalues">
    <var name="charname">Danimal</var>
    <var name="charrace">K'ta'viir</var>
    <var name="ispriest">1</var>
    <var name="istemplar">0</var>
    <var name="ismagician">1</var>
    <var name="isnightblade">0</var>
    <var name="isanimist">0</var>
    <var name="isrogue">0</var>
    <var name="isfighter">0</var>
    <var name="iswarlock">0</var>
    <var name="charalignment">Neutral</var>
    <var name="charlevel">100</var>
    <trigger priority="170">
      <pattern>Character: (%w)%sRace: (%x)%sCreated: *$%sClass: (%w)/(%w)%sAlignment: (%w) *$%sLevel: (%n)%sExp: *$%sHits: %n~((%n)~)%s{Needed|Excess}: (%x)%sGold: (%x)*$%sMana: %n~((%n)~)%sQuestP: *$%sMove: %n~((%n)~)%s*</pattern>
      <value>charname=%1
charrace=%2
charalignment=%5
charlevel=%6
charmaxhp=%7
chargold=%replace(%9,",","")
charmaxmana=%10
charmaxmove=%11
isfighter=0
isanimist=0
ismagician=0
isnightblade=0
ispriest=0
isrogue=0
istemplar=0
iswarlock=0
#IF %3="Pr" {ispriest=1}
#IF %3="Fi" {isfighter=1}
#IF %3="Ro" {isrogue=1}
#IF %3="Nb" {isnightblade=1}
#IF %3="Ma" {ismagician=1}
#IF %3="Wl" {iswarlock=1}
#IF %3="An" {isanimist=1}
#IF %3="Te" {istemplar=1}
#IF %4="Pr" {#add ispriest 1}
#IF %4="Fi" {#add isfighter 1}
#IF %4="Ro" {#add isrogue 1}
#IF %4="Nb" {#add isnightblade 1}
#IF %4="Ma" {#add ismagician 1}
#IF %4="Wl" {#add iswarlock 1}
#IF %4="An" {#add isanimist 1}
#IF %4="Te" {#add istemplar 1}
</value>
    </trigger>
    <var name="charmaxhp">2750</var>
    <var name="charmaxmana">1486</var>
    <var name="charmaxmove">843</var>
    <trigger name="Elemental essence collected:$%sEarth:%s%n/%n%s~({| |  }(%n)~%~)" priority="210">
      <pattern>Elemental essence collected:$%sEarth:%s%n/%n%s~({| |  }(%n)~%~) Water:%s%n/%n%s~({| |  }(%n)~%~)$      Air:%s%n/%n%s~({| |  }(%n)~%~)  Fire:%s%n/%n%s~({| |  }(%n)~%~)</pattern>
      <value>essenceearth=%1
essencewater=%2
essenceair=%3
essencefire=%4</value>
    </trigger>
    <var name="essenceearth">20</var>
    <var name="essenceair">44</var>
    <var name="essencefire">32</var>
    <trigger name="Strength:  %n / %n      %n / %n%sDAMROLL: +(%n)$ Intelligence:" priority="260">
      <pattern>Strength:  %n / %n      %n / %n%sDAMROLL: +(%n)$ Intelligence:  %n%s%n%sHITROLL: +(%n)$       Wisdom:  %n%s%n%sTHAC0: (%p)(%n)$    Dexterity:  %n%s%n%sArmor-Class: *</pattern>
      <value>chardamroll=%1
#IF %3="-" {charhitroll=(%2+%4)} {charhitroll=(%2-%4)}</value>
    </trigger>
    <var name="chardamroll">30</var>
    <var name="charhitroll">36</var>
    <var name="playing">
      <value>1</value>
      <default>0</default>
    </var>
    <var name="essencewater">137</var>
    <var name="currenthp">2750</var>
    <var name="currentmana">1486</var>
    <var name="currentmaxhp">2750</var>
    <var name="currentmaxmana">1486</var>
    <var name="currentmaxmoves">843</var>
    <var name="currentmoves">843</var>
    <var name="position">standing</var>
    <var name="maxhp">2750</var>
    <alias name="scriptinit">
      <value>score
stats
eq
tog autoloot off
loot=0
butcher=0
weaponbagscan</value>
    </alias>
    <var name="quickness">0</var>
    <trigger priority="124220">
      <pattern>You concentrate your thoughts and begin your deadly display of weapon prowess.</pattern>
      <value>ddance=1</value>
    </trigger>
    <trigger priority="124240">
      <pattern>With a gasp you stop your breathtaking display of weapon mastery.</pattern>
      <value>ddance=0</value>
    </trigger>
    <trigger priority="124290">
      <pattern>With no opponents left nearby, you end your dashing display of weapon skill.</pattern>
      <value>ddance=0</value>
    </trigger>
    <var name="berserk">0</var>
    <trigger priority="124400">
      <pattern>You feel a HUGE adrenaline rush!!!  You will FIGHT TO THE DEATH!</pattern>
      <value>berserk=1
autofightdecision</value>
    </trigger>
    <trigger priority="124410">
      <pattern>You become humble again.</pattern>
      <value>berserk=0</value>
    </trigger>
    <var name="quicknessval">0</var>
    <var name="aboutitem">
      <value>wyrmking</value>
      <json>wyrmking</json>
    </var>
    <var name="feetitem">boots</var>
    <var name="shielditem">
      <value>sphere</value>
      <json>sphere</json>
    </var>
    <var name="aboutlist" type="Record">
      <value>the Wyrmking mantle=wyrmking</value>
      <json>{"the Wyrmking mantle":"wyrmking"}</json>
    </var>
    <var name="shieldlist" type="Record">
      <value>the Sphere of Defence=sphere</value>
      <json>{"the Sphere of Defence":"sphere"}</json>
    </var>
    <var name="feetlist"/>
    <alias name="showfrags">
      <value><![CDATA[#IF %null(%1) {emote is filled with ~&+yEarth~&n: @essenceearth~% ~&+bWater~&n: @essencewater~% ~&+cAir~&n: @essenceair~% ~&+rFire~&n: @essencefire~%} {
#IF %null(%2) {%1 is filled with ~&+yEarth~&n: @essenceearth~% ~&+bWater~&n: @essencewater~% ~&+cAir~&n: @essenceair~% ~&+rFire~&n: @essencefire~%} {%1 %2 is filled with ~&+yEarth~&n: @essenceearth~% ~&+bWater~&n: @essencewater~% ~&+cAir~&n: @essenceair~% ~&+rFire~&n: @essencefire~%}}]]></value>
    </alias>
    <var name="holdlist" type="Record">
      <value>the Demonic Wing=wing</value>
      <json>{"the Demonic Wing":"wing"}</json>
    </var>
    <var name="holditem">
      <value>wing</value>
      <json>wing</json>
    </var>
    <var name="chargold">3352077</var>
    <var name="aura">aura of Regeneration</var>
    <class name="eqscan" enabled="false">
      <trigger priority="6790">
        <pattern>&lt;held&gt;               (*)</pattern>
        <value>#IF %iskey(@holdlist,%1) {holditem=@holdlist.%1}</value>
      </trigger>
      <trigger priority="166730">
        <pattern>&lt;surrounded by&gt;      (*)</pattern>
        <value>aura=%1
#IF @aura="aura of Quickness" {quickness=1} {quickness=0}</value>
      </trigger>
      <trigger priority="166720">
        <pattern>&lt;worn about body&gt;    (*)</pattern>
        <value>#IF %iskey(@aboutlist, %1) {aboutitem=@aboutlist.%1} {aboutitem=cape}</value>
      </trigger>
      <trigger priority="166700">
        <pattern>&lt;worn as shield&gt;     (*)</pattern>
        <value>#IF %iskey(@shieldlist, %1) {shielditem=@shieldlist.%1} {shielditem=shield}</value>
      </trigger>
      <trigger priority="166730">
        <pattern>&lt;worn on feet&gt;       (*)</pattern>
        <value>#IF %iskey(@feetlist, %1) {feetitem=@feetlist.%1} {feetitem=boots}</value>
      </trigger>
    </class>
    <trigger priority="23470">
      <pattern>^You are using:$</pattern>
      <value>#T+ eqscan
#alarm +2 {#T- eqscan}</value>
    </trigger>
  </class>
  <class name="damtypes">
    <var name="damtype">mythical</var>
    <var name="damspells" type="Record">
      <value>electricity|normal=cast 'powerword pain'|conserve|stun=cast 'powerword pain'|fire=cast 'hell fire'</value>
      <json>{"electricity":"","normal":"cast 'powerword pain'","conserve":"","stun":"cast 'powerword pain'","fire":"cast 'hell fire'"}</json>
    </var>
    <var name="currentweapon">
      <value>deathbringer</value>
      <json>deathbringer</json>
    </var>
    <var name="weaponlist" type="Record" sorted="1">
      <value>'Frostbite', the sword of Winter=frostbite|a bright-blue mace 'Icestorm'=icestorm|a cold-iron scimitar=scimitar|a copper hammer=copper|a dagger of wind=winddagger|a dark-red blade 'Firestorm'=firestorm|a dragon tailed whip=tailed|a fifteen thronged whip=fifteen|a fire-headed mace=headed|a fishing rod=fishing|a flaming blade of darkness=flamingbladedarkness|a flowing blue longsword=flowing|a forked lightning trident=forked|a ghostly spear=ghostly|a gigantic maul from ancient times=gigantic|a gleaming white sword=gleaming|a hammer made from the tail of a red dragon=fashioned|a honed shortsword 'Zedraikis'=zedraikis|a horgarian fleshspine=fleshspine|a huge black demonsword called 'Zcobori'=zcobori|a jagged spear=jagged|a misty transparent leash=leash|a pilfered parang=parang|a razor sharp silver lance=lance|a runic spear=runic|a sharp iron hatchet=hatchet|a shortsword named 'Windweaver'=windweaver|a Skaven Fang=skaven|a slither of lightning=slither|a snake shaped hammer=snake|a tendril of darkness=tendril|a wicked flaming bastard sword named Flametongue=flametongue|an infernal soulblade=infernal|Azimers razor talon=azimer|Claws of Darkness=claws|Gorm's dragon slayer=gorm|Nemesis, the blade of shadows=nemesis|PathWeaver DeathFlame=deathflame|PathWeaver HailStrike=hailstrike|PathWeavers blade=origshift|Poseidon's trident=poseidon|the "Claw of Penetration"=penetration|the Arcane Hammer of Magic=arcane|the Athame=athame|the avalanche=avalanche|the dagger of souls=souls|the dreaded Thorn club=dreaded|the King's sword=king|the mace 'Deathbringer'=deathbringer|the obsidian spear named "Gungner"=gungner|the Onyx dagger named 'Chakara the souldrainer'=chakara|the royal ice dagger=royal|the Runeblade 'Lawbringer'=lawbringer|the Skean-dhu=skean|the soul reaper=reaper|the spear of the seas=seas|the tail of a black dragon=blackdragontail|the Warhammer of Justice=justice|Wolf headed battle staff=wolf|Wyrmsbane=wyrmsbane</value>
      <json>{"'Frostbite', the sword of Winter":"frostbite","a bright-blue mace 'Icestorm'":"icestorm","a cold-iron scimitar":"scimitar","a copper hammer":"copper","a dagger of wind":"winddagger","a dark-red blade 'Firestorm'":"firestorm","a dragon tailed whip":"tailed","a fifteen thronged whip":"fifteen","a fire-headed mace":"headed","a fishing rod":"fishing","a flaming blade of darkness":"flamingbladedarkness","a flowing blue longsword":"flowing","a forked lightning trident":"forked","a ghostly spear":"ghostly","a gigantic maul from ancient times":"gigantic","a gleaming white sword":"gleaming","a hammer made from the tail of a red dragon":"fashioned","a honed shortsword 'Zedraikis'":"zedraikis","a horgarian fleshspine":"fleshspine","a huge black demonsword called 'Zcobori'":"zcobori","a jagged spear":"jagged","a misty transparent leash":"leash","a pilfered parang":"parang","a razor sharp silver lance":"lance","a runic spear":"runic","a sharp iron hatchet":"hatchet","a shortsword named 'Windweaver'":"windweaver","a Skaven Fang":"skaven","a slither of lightning":"slither","a snake shaped hammer":"snake","a tendril of darkness":"tendril","a wicked flaming bastard sword named Flametongue":"flametongue","an infernal soulblade":"infernal","Azimers razor talon":"azimer","Claws of Darkness":"claws","Gorm's dragon slayer":"gorm","Nemesis, the blade of shadows":"nemesis","PathWeaver DeathFlame":"deathflame","PathWeaver HailStrike":"hailstrike","PathWeavers blade":"origshift","Poseidon's trident":"poseidon","the \"Claw of Penetration\"":"penetration","the Arcane Hammer of Magic":"arcane","the Athame":"athame","the avalanche":"avalanche","the dagger of souls":"souls","the dreaded Thorn club":"dreaded","the King's sword":"king","the mace 'Deathbringer'":"deathbringer","the obsidian spear named \"Gungner\"":"gungner","the Onyx dagger named 'Chakara the souldrainer'":"chakara","the royal ice dagger":"royal","the Runeblade 'Lawbringer'":"lawbringer","the Skean-dhu":"skean","the soul reaper":"reaper","the spear of the seas":"seas","the tail of a black dragon":"blackdragontail","the Warhammer of Justice":"justice","Wolf headed battle staff":"wolf","Wyrmsbane":"wyrmsbane"}</json>
    </var>
    <alias name="use">
      <value>#IF %1="slay" {newdamtype=%2} {newdamtype=%1}
#IF @newdamtype=@damtype {} {
#IF (@leading and !@soloing) {
  #IF @newdamtype="horgar" {gt horgar} {
    #IF %ismember(@newdamtype, @slaytypes) {gt use slay @newdamtype} {gt use @newdamtype}
  }
}
}
spellswitch @newdamtype
determineweapon @newdamtype
damtype=@newdamtype
#IF (@currentweapon="athame") {} {
weaponswap @weaponlist.@determinedweapon
}</value>
    </alias>
    <var name="slaytypes" type="StringList">
      <value>human|elf|drow|mythical|magical|undead|snake|dragon|elemental|demon</value>
      <json>["human","elf","drow","mythical","magical","undead","snake","dragon","elemental","demon"]</json>
    </var>
    <trigger priority="2200">
      <pattern>You stop using (*).</pattern>
      <value>#IF %iskey(%1, @weaponlist) {currentweapon=""}
#DELKEY affectslist Venom</value>
    </trigger>
    <trigger priority="2210">
      <pattern>You wield (*).</pattern>
      <value>currentweapon=@weaponlist.%1</value>
    </trigger>
    <var name="damweapons" type="StringList">
      <value>a fishing rod|the Skean-dhu|PathWeaver HailStrike|a honed shortsword 'Zedraikis'|the dreaded Thorn club|a snake shaped hammer|a forked lightning trident|a dagger of wind|a gigantic maul from ancient times|a honed shortsword 'Zedraikis'|a gleaming white sword|a hammer made from the tail of a red dragon|a horgarian fleshspine|the avalanche|a Skaven Fang|a razor sharp silver lance|a fire-headed mace|the soul reaper</value>
      <json>["a fishing rod","the Skean-dhu","PathWeaver HailStrike","a honed shortsword 'Zedraikis'","the dreaded Thorn club","a snake shaped hammer","a forked lightning trident","a dagger of wind","a gigantic maul from ancient times","a honed shortsword 'Zedraikis'","a gleaming white sword","a hammer made from the tail of a red dragon","a horgarian fleshspine","the avalanche","a Skaven Fang","a razor sharp silver lance","a fire-headed mace","the soul reaper"]</json>
    </var>
    <alias name="weaponswap">
      <value>#IF (%null(%1) or %1=@currentweapon) {} {
  get %1 @weaponcontainer
  #IF @quickdraw {quickdraw %1} {#IF !%null(@currentweapon) {unwield};wield %1}
  #IF !%null(@currentweapon) {put @currentweapon @weaponcontainer}
  currentweapon = %1
  }</value>
    </alias>
    <var name="onhitdamtypes" type="Record">
      <value>The Lesser Eraditor="light|pure"|The Storm Demon="light|pure"|An initiate of the crescent moon=lugroki|A dracolich=lugroki|The thassaloss="pure|lugroki"|A ghost of a decapitated woman="pure|water|light"|The Efreeti Sultan="ice|pure"|The Terrorite Demon="light|pure"|A witch of the crescent moon=lugroki|The beast="fire|pure|lugroki"|The Eraditor="light|pure"|A soldier="pure|lugroki"|A member of the Trojan Royal House="normal|lugroki"|A drow guard="ice|light|pure|lugroki"|A drow warrior="ice|light|pure|lugroki"|The Great Soulcrusher="light|pure"|Morgoth the Valar God="light|pure|lugroki"|The remorhaz=lugroki|The Thonis="light|pure"|A skeletal dragon=lugroki|A crone of the crescent moon=lugroki|A fanatic Grolim priest="light|pure"|A Medjai Warrior=lugroki|The Balrog="light|pure"|The Efreeti Pasha="ice|light|pure"|The Charred Skeleton="pure|lugroki"|A Guard of Khron="light|ice|conserve"|The Shadow Demon="fire|pure"|The monster="fire|pure|lugroki"|The umber hulk="fire|lugroki"|The horgar="fire|lugroki"|A Doomed Black Wyrm=lugroki|The Sword Demon="light|pure"|The pyrohydra="light|ice"|A Grolim warrior priest="pure|stun|conserve"|The Major Eraditor="light|pure"|The soulcrusher="light|pure"|The gauth="light|pure|lugroki"</value>
      <json>{"The Lesser Eraditor":["light","pure"],"The Storm Demon":["light","pure"],"An initiate of the crescent moon":"lugroki","A dracolich":"lugroki","The thassaloss":["pure","lugroki"],"A ghost of a decapitated woman":["pure","water","light"],"The Efreeti Sultan":["ice","pure"],"The Terrorite Demon":["light","pure"],"A witch of the crescent moon":"lugroki","The beast":["fire","pure","lugroki"],"The Eraditor":["light","pure"],"A soldier":["pure","lugroki"],"A member of the Trojan Royal House":["normal","lugroki"],"A drow guard":["ice","light","pure","lugroki"],"A drow warrior":["ice","light","pure","lugroki"],"The Great Soulcrusher":["light","pure"],"Morgoth the Valar God":["light","pure","lugroki"],"The remorhaz":"lugroki","The Thonis":["light","pure"],"A skeletal dragon":"lugroki","A crone of the crescent moon":"lugroki","A fanatic Grolim priest":["light","pure"],"A Medjai Warrior":"lugroki","The Balrog":["light","pure"],"The Efreeti Pasha":["ice","light","pure"],"The Charred Skeleton":["pure","lugroki"],"A Guard of Khron":["light","ice","conserve"],"The Shadow Demon":["fire","pure"],"The monster":["fire","pure","lugroki"],"The umber hulk":["fire","lugroki"],"The horgar":["fire","lugroki"],"A Doomed Black Wyrm":"lugroki","The Sword Demon":["light","pure"],"The pyrohydra":["light","ice"],"A Grolim warrior priest":["pure","stun","conserve"],"The Major Eraditor":["light","pure"],"The soulcrusher":["light","pure"],"The gauth":["light","pure","lugroki"]}</json>
    </var>
    <var name="damswaprooms" type="Record">
      <value>Third Level of Eastern Tower=pure|The entrance to the great Dwarven kingdom, Inglestone=water|An Old Knotted Tree=normal|Entrance to the Ruins of Kaltor=unlife|Ensor Road near the Battlefields=unlife|Deep down in the ravine=drow|Outside a ruined Gatehouse=water</value>
      <json>{"Third Level of Eastern Tower":"pure","The entrance to the great Dwarven kingdom, Inglestone":"water","An Old Knotted Tree":"normal","Entrance to the Ruins of Kaltor":"unlife","Ensor Road near the Battlefields":"unlife","Deep down in the ravine":"drow","Outside a ruined Gatehouse":"water"}</json>
    </var>
    <alias name="damagesetup">
      <value>afight=1
aassist=1
aheal=0
arescue=0
aholy=0
addance=0
aberserk=0
damspells=""
primarystab=""
secondarystab=""
primaryskill=""
lowmanaspell=""
lowmanaskill=""
mainheal=""
lowmana=@defaultlowmana
quickdraw=0
#If (@isrogue&gt;0 and @charlevel&gt;54) {quickdraw=1}
#ADDKEY damspells electricity ""
#ADDKEY damspells conserve ""
#IF @iswarlock=2 {
  #ADDKEY damspells fire "cast 'triad of fire'"
  #ADDKEY damspells ice "cast 'triad of ice'"
  #ADDKEY damspells normal "cast 'triad of ice'"
  #ADDKEY damspells water "cast 'water bolt'"
  #ADDKEY damspells conserve "headbang"
  lowmanaskill=headbang
}
#IF @isanimist&gt;0 {
  #ADDKEY damspells fire "cast 'fire seeds'"
  #ADDKEY damspells normal "cast 'fire seeds'"
  #ADDKEY damspells pure "cast 'fire seeds'"
  #ADDKEY damspells light "cast 'sun arrow'"
  #ADDKEY damspells conserve "cast 'sun arrow'"
  #ADDKEY damspells unlife "cast 'sticks to snakes'"
  #ADDKEY damspells dark "cast 'sticks to snakes'"
  #IF @isanimist=2 {mainheal="cast 'burst of life'"}
  }
#IF @ismagician=2 {
  #ADDKEY damspells fire "cast 'hell fire'"
  #ADDKEY damspells water "cast 'powerword pain'"
  #ADDKEY damspells stun "cast 'powerword pain'"
  #ADDKEY damspells normal "cast 'plasma bolt'"
  #ADDKEY damspells electricity ""
  lowmanaspell="cast 'force bolt'"
  lowmana=350
  }
  #IF @isnightblade=1 {
  secondarystab=murder
  lowmanaskill="cast 'attack'"
  }
  #IF @isnightblade=2 {
  primarystab=murder
  primaryskill="cast 'attack'"
  }
  #IF @isfighter=2 {
  primaryskill="pummel"
  }
  #IF @isrogue=2 {
  primarystab=backstab
  }
  #IF @isrogue=1 {
  secondarystab=backstab
  }
  #IF @istemplar=2 {
  #ADDKEY damspells normal "cast 'judgement'"
  lowmana=100
  }
#IF @ispriest=2 {
  aassist=0
  aheal=1
  afight=0
  agheal=0
  mainheal="cast 'trueheal'"
  }
#IF @ismagician=1 {
  #IF !%iskey(@damspells, fire) {#ADDKEY damspells fire "cast 'hell fire'"}
  #ADDKEY damspells normal "cast 'powerword pain'"
  #ADDKEY damspells stun "cast 'powerword pain'"
  lowmana=250
  }
#IF @ispriest=1 {
  mainheal="cast 'powerheal'"
  }
#IF @iswarlock=1 {
  #ADDKEY damspells fire "cast 'fire bolt'"
  #ADDKEY damspells ice "cast 'ice bolt'"
  #ADDKEY damspells normal "cast 'ice bolt'"
  #ADDKEY damspells conserve "headbang"
  lowmanaskill=headbang

  }
#IF @istemplar=1 {
  #ADDKEY damspells pure "cast 'judgement'"
  }</value>
    </alias>
    <trigger priority="5960" trigontrig="false">
      <pattern>^(*)$</pattern>
      <value>#IF @weaponbagscan=2 {
  #IF %iskey(@weaponlist, %1) {damweapons = %additem(%1, @damweapons)}
  }</value>
    </trigger>
    <var name="weaponbagscan">0</var>
    <alias name="determineweapon">
      <value>determinedweapon=""
#FORALL @masterweaponlist.%1 {#IF (%null(@determinedweapon) and %ismember(%i, @damweapons)) {determinedweapon=%i}}
#FORALL @masterweaponlist.normal {#IF (%null(@determinedweapon) and %ismember(%i, @damweapons)) {determinedweapon=%i}}</value>
    </alias>
    <var name="determinedweapon">a gigantic maul from ancient times</var>
    <var name="masterweaponlist" type="Record">
      <value>elemental='Frostbite', the sword of Winter|ice="asdovzixcvj|'Frostbite', the sword of Winter|a bright-blue mace 'Icestorm'|PathWeaver HailStrike|the royal ice dagger"|gas|elf|air=a dagger of wind|plain=a fifteen thronged whip|mythical=a gigantic maul from ancient times|superlarge|silver=a razor sharp silver lance|lugroki="the Warhammer of Justice|a pilfered parang|a sharp iron hatchet"|unlife="the dagger of souls|a huge black demonsword called 'Zcobori'|an infernal soulblade|Claws of Darkness|a pilfered parang"|undead=the soul reaper|horgar="a fire-headed mace|a wicked flaming bastard sword named Flametongue"|energy="the Arcane Hammer of Magic|a ghostly spear|PathWeavers blade"|light=the Warhammer of Justice|large|mental="the dreaded Thorn club|the King's sword"|electricity="a forked lightning trident|a slither of lightning"|dragon="Wyrmsbane|Gorm's dragon slayer|a hammer made from the tail of a red dragon|a dragon tailed whip|Azimers razor talon"|normal="a dark-red blade 'Firestorm'|a fishing rod|the Onyx dagger named 'Chakara the souldrainer'|the ""Claw of Penetration""|the Skean-dhu|a fifteen thronged whip|a jagged spear|a copper hammer|a pilfered parang|a sharp iron hatchet"|human="the Skean-dhu|the mace 'Deathbringer'|the Runeblade 'Lawbringer'"|water="the spear of the seas|a flowing blue longsword|Poseidon's trident"|magical=the soul reaper|giant=the sword of Halo'ki|poison=a horgarian fleshspine|earth=the avalanche|wood|stun|pure="the Warhammer of Justice|Wolf headed battle staff|a pilfered parang|a sharp iron hatchet"|mana=athame|iron="the Skean-dhu|the mace 'Deathbringer'|the Runeblade 'Lawbringer'|a pilfered parang|a sharp iron hatchet"|fire="a dark-red blade 'Firestorm'|a flaming blade of darkness|a honed shortsword 'Zedraikis'|PathWeaver DeathFlame|a fire-headed mace|a wicked flaming bastard sword named Flametongue"|drow=PathWeaver HailStrike|dark="a flaming blade of darkness|a Skaven Fang|a tendril of darkness|Nemesis, the blade of shadows"|acid="Gorm's dragon slayer|the tail of a black dragon|a horgarian fleshspine"|bleed</value>
      <json>{"elemental":"'Frostbite', the sword of Winter","ice":["asdovzixcvj","'Frostbite', the sword of Winter","a bright-blue mace 'Icestorm'","PathWeaver HailStrike","the royal ice dagger"],"gas":"","elf":"","air":"a dagger of wind","plain":"a fifteen thronged whip","mythical":"a gigantic maul from ancient times","superlarge":"","silver":"a razor sharp silver lance","lugroki":["the Warhammer of Justice","a pilfered parang","a sharp iron hatchet"],"unlife":["the dagger of souls","a huge black demonsword called 'Zcobori'","an infernal soulblade","Claws of Darkness","a pilfered parang"],"undead":"the soul reaper","horgar":["a fire-headed mace","a wicked flaming bastard sword named Flametongue"],"energy":["the Arcane Hammer of Magic","a ghostly spear","PathWeavers blade"],"light":"the Warhammer of Justice","large":"","mental":["the dreaded Thorn club","the King's sword"],"electricity":["a forked lightning trident","a slither of lightning"],"dragon":["Wyrmsbane","Gorm's dragon slayer","a hammer made from the tail of a red dragon","a dragon tailed whip","Azimers razor talon"],"normal":["a dark-red blade 'Firestorm'","a fishing rod","the Onyx dagger named 'Chakara the souldrainer'","the \"Claw of Penetration\"","the Skean-dhu","a fifteen thronged whip","a jagged spear","a copper hammer","a pilfered parang","a sharp iron hatchet"],"human":["the Skean-dhu","the mace 'Deathbringer'","the Runeblade 'Lawbringer'"],"water":["the spear of the seas","a flowing blue longsword","Poseidon's trident"],"magical":"the soul reaper","giant":"the sword of Halo'ki","poison":"a horgarian fleshspine","earth":"the avalanche","wood":"","stun":"","pure":["the Warhammer of Justice","Wolf headed battle staff","a pilfered parang","a sharp iron hatchet"],"mana":"athame","iron":["the Skean-dhu","the mace 'Deathbringer'","the Runeblade 'Lawbringer'","a pilfered parang","a sharp iron hatchet"],"fire":["a dark-red blade 'Firestorm'","a flaming blade of darkness","a honed shortsword 'Zedraikis'","PathWeaver DeathFlame","a fire-headed mace","a wicked flaming bastard sword named Flametongue"],"drow":"PathWeaver HailStrike","dark":["a flaming blade of darkness","a Skaven Fang","a tendril of darkness","Nemesis, the blade of shadows"],"acid":["Gorm's dragon slayer","the tail of a black dragon","a horgarian fleshspine"],"bleed":""}</json>
    </var>
    <alias name="weaponbagscan">
      <value>damweapons=""
eq
#IF %null(%1) {look in @weaponcontainer} {look in %1;weaponcontainer=%1}
weaponbagscan=1</value>
    </alias>
    <trigger priority="5959">
      <pattern>~(carried~) : $</pattern>
      <value>#IF @weaponbagscan=1 {weaponbagscan=2}</value>
    </trigger>
    <alias name="spellswitch">
      <value>currentdam=@damspells.normal
spelltype=normal
#IF %ismember(%1, @slaytypes) {#say slaytypes hit;spellswitch @slaytypestospells.%1} {
#FORALL %1 {
  #IF %iskey(@damspells, %i) {spelltype=%i;currentdam=@damspells.%i}
  }
}
;spelltype=%1
;#IF %null(@damspells.%1) {currentdam=@damspells.normal} {currentdam=@damspells.%1}</value>
    </alias>
    <trigger priority="5960" trigontrig="false">
      <pattern>^(*)..It seems to absorb light!$</pattern>
      <value>#IF @weaponbagscan=2 {
  #IF %iskey(@weaponlist, %1) {damweapons = %additem(%1, @damweapons)}
  }</value>
    </trigger>
    <trigger priority="5960" trigontrig="false">
      <pattern>^(*) {|~(venom~) }{~(humming~)|~(invisible~)|~(glowing~)|~(invisible~) ~(humming~)}$</pattern>
      <value>#IF @weaponbagscan=2 {
  #IF %iskey(@weaponlist, %1) {
    damweapons = %additem(%1, @damweapons)}
  }</value>
    </trigger>
    <trigger priority="5960" trigontrig="false">
      <pattern>^(*)..It seems to absorb light! ~(humming~)$</pattern>
      <value>#IF @weaponbagscan=2 {
  #IF %iskey(@weaponlist, %1) {damweapons = %additem(%1, @damweapons)}
  }</value>
    </trigger>
    <var name="spellswaponhit">1</var>
    <var name="newdamtype">
      <value>unlife</value>
      <json>unlife</json>
    </var>
    <var name="spelltype">
      <value>light</value>
      <json>light</json>
    </var>
    <trigger priority="94250" regex="true">
      <pattern>^&lt;wielded&gt;            (.*?)(?:\.\.| \(|$)</pattern>
      <value>;#say %1
#IF @selfeqscan {
  #additem damweapons %1
  currentweapon=@weaponlist.%1
  }</value>
    </trigger>
    <trigger priority="95440">
      <pattern>^You are using:</pattern>
      <value>selfeqscan=1</value>
    </trigger>
    <var name="selfeqscan">0</var>
    <var name="immuneorresfiremobs" type="StringList">
      <value>The Storm Demon|A ghost of a decapitated woman|The Efreeti Sultan|The Terrorite Demon|The Eraditor|The Thonis|The Efreeti Pasha|The Major Eraditor|The soulcrusher|A captain of the Brettonian High Command|The mystical soulcrusher|A lieutenant of the Brettonian High Command|The Great Soulcrusher|The Lesser Eraditor|A Guard of Khron|Palladrus|The pyrohydra|An Elite Daedroth Guard|A Daedroth|A Grolim warrior priest|The Sword Demon|Pheron the Archmage|Rowlik, the Master Summoner</value>
      <json>["The Storm Demon","A ghost of a decapitated woman","The Efreeti Sultan","The Terrorite Demon","The Eraditor","The Thonis","The Efreeti Pasha","The Major Eraditor","The soulcrusher","A captain of the Brettonian High Command","The mystical soulcrusher","A lieutenant of the Brettonian High Command","The Great Soulcrusher","The Lesser Eraditor","A Guard of Khron","Palladrus","The pyrohydra","An Elite Daedroth Guard","A Daedroth","A Grolim warrior priest","The Sword Demon","Pheron the Archmage","Rowlik, the Master Summoner"]</json>
    </var>
    <var name="slaytypestospells" type="Record">
      <value>elemental|elf="dark|unlife"|mythical|lugroki="light|fire|pure"|undead|dragon|human|magical|drow="pure|ice|lugroki"|demon="pure|light"|snake</value>
      <json>{"elemental":"","elf":["dark","unlife"],"mythical":"","lugroki":["light","fire","pure"],"undead":"","dragon":"","human":"","magical":"","drow":["pure","ice","lugroki"],"demon":["pure","light"],"snake":""}</json>
    </var>
    <alias name="weaponsmenusetup">
      <value>damweaponsshort=""
#FORALL @damweapons {#ADDITEM damweaponsshort @weaponlist.%i}
#BUTTON 1 @damweaponsshort</value>
    </alias>
    <var name="damweaponsshort" type="StringList">
      <value>fishing|skean|hailstrike|zedraikis|dreaded|snake|forked|winddagger|gigantic|zedraikis|gleaming|fashioned|fleshspine|avalanche|skaven|lance|headed|reaper</value>
      <json>["fishing","skean","hailstrike","zedraikis","dreaded","snake","forked","winddagger","gigantic","zedraikis","gleaming","fashioned","fleshspine","avalanche","skaven","lance","headed","reaper"]</json>
    </var>
    <trigger priority="5960" trigontrig="false">
      <pattern>^(*)ASDFSADF ({|~(invisible~)}){| }({|~(venom~)}){| }({|~(humming~)})$</pattern>
      <value>#say %1</value>
    </trigger>
  </class>
  <class name="environmentvariables">
    <var name="fighting">0</var>
    <trigger priority="1840">
      <pattern>^(*)$Obvious Exits: ~[(*)~]</pattern>
      <value>#IF !@awaitingpeekinfo {
  retreatdir=""
  wildmagic=0
  nomagic=0
  noflee=0
  norecall=0
  waterroom=0
  fighting=0
  cos=0
  cop=0
  needtorecop=0
  copoomtell=0
  agglist=""
  moblist=""
  assistlist=""
  knownmoblist=""
  currenttank=@leader
  butchnumber=1
  roomname=%1
  #if %match(@roomname,"^%n~(%n~)H %n~(%n~)M %n~(%n~)V &gt; (*)",roomname) {} {}
  exits=%replace(%2, ", ", "|")
  roomscantoprompt=1
  #IF %ismember(@roomname, @wildmagicrooms) {wildmagic=1}
  #IF %ismember(@roomname, @waterrooms) {waterroom=1}
  #IF @roomname="The Temple of Karandras" {continent=oc;windcoming=0;#IF @justrecalled {s;justrecalled=0}}
  #IF @roomname="The Temple Altar of Myrridon" {continent=nc;windcoming=0;#IF @justrecalled {.ww;justrecalled=0}}
  #IF (@roomname="A Ferry Dock in Myrridon" and @continent=oc and @onship=1) {#IF @leading=1 {leave}}
  #IF (@roomname="The landing-stage of the inter-continental ferry" and @continent=nc and @onship=1) {#IF @leading=1 {leave}}
  #IF (@roomname="The Ashinara Outpost" and @onship=1) {#IF @leading=1 {leave}}
  #IF (@roomname="The Dragontail Outpost" and @onship=1) {#IF @leading=1 {leave}}
  #IF (@roomname="Port of Lost Souls" and @onship=1) {#IF @leading=1 {leave}}
  #IF (@roomname="Port of the Styx Marsh" and @onship=1) {#IF @leading=1 {leave}}
  #IF @damswaponroom {#IF !%null(@damswaprooms.%1) {use @damswaprooms.%1}}
  }</value>
    </trigger>
    <var name="roomname">The Reception</var>
    <var name="exits">North</var>
    <var name="waterrooms">A Wide Pool|A Narrow Underground Stream|A Deep Eddy|An Underground Lake</var>
    <var name="wildmagicrooms" type="StringList">
      <value>A Magical Waterfall|In the Essence Flows</value>
      <json>["A Magical Waterfall","In the Essence Flows"]</json>
    </var>
    <var name="wildmagic">0</var>
    <var name="waterroom">0</var>
    <var name="leading">0</var>
    <trigger name="({You sit down and rest your tired bones.|You stop resting, and" priority="2450">
      <pattern>({You sit down and rest your tired bones.|You stop resting, and stand up.|You go to sleep.|You wake, and stand up.|You sit down.|You stand up.})</pattern>
      <value>#IF %1="You sit down and rest your tired bones." {position=resting}
#IF %1="You stop resting, and stand up." {position=standing}
#IF %1="You go to sleep." {position=sleeping}
#IF %1="You wake, and stand up." {position=standing}
#IF %1="You sit down." {position=sitting}
#IF %1="You stand up." {position=standing}</value>
    </trigger>
    <trigger priority="2480">
      <pattern>^%w draws forth arcane stones from the soil in a circle around {her|him|it}.</pattern>
      <value>cos=1</value>
    </trigger>
    <var name="cos">0</var>
    <var name="cop">0</var>
    <trigger priority="2520">
      <pattern>{The ground is covered with ancient looking runes.|quickly circles the area, drawing ancient runes on the ground.|The ground gets covered with ancient runes of protection.}</pattern>
      <value>cop=1
needtorecop=0</value>
    </trigger>
    <trigger priority="2910">
      <pattern>The ancient looking runes on the ground wither apart.</pattern>
      <value>cop=0
#IF @recop {needtorecop=1}
#IF !@fighting {recopexecute}</value>
    </trigger>
    <var name="roomscantoprompt">0</var>
    <trigger priority="6190">
      <pattern>The ground is circled with stones that hum with ancient power.</pattern>
      <value>cos=1</value>
    </trigger>
    <trigger priority="6200">
      <pattern>A circle of stones forms around you, humming with power.</pattern>
      <value>cos=1</value>
    </trigger>
    <var name="nomagic">0</var>
    <var name="butchnumber">1</var>
    <alias name="scsetup">
      <value>score
affects
eq all
gagsetup
weaponbagscan
#alarm +3 {damagesetup;aff group;use @damtype;initbuttons;wimplevel=%eval(@maxhp*0.35)}</value>
    </alias>
    <var name="abusepr" type="Literal"/>
    <var name="copoomtell">0</var>
    <alias name="recopexecute">
      <value>#IF (!@cop and @recop) {
  #IF (@position="resting" or @position="sitting") {stand}
  cast 'circle of protection'
  #IF (@position="resting" or @position="sitting") {rest}
  #alarm +5 {recopexecute}
  }</value>
    </alias>
    <var name="noflee">0</var>
    <var name="norecall">0</var>
    <trigger priority="101510">
      <pattern>The surroundings keeps you from doing so.</pattern>
      <value>norecall=1</value>
    </trigger>
    <var name="wellrooms" type="StringList">
      <value>A Magical Waterfall|In the Essence Flow|A Small Cavern|A Small Passage|A Glittering Passage|An Icy Passage|A Pool of Quicksand|A Hot Lava Flow|A Deep Pool|A Narrow Underground Stream|A Wide Pool|A Shimmering Passage|A Frozen Pool</value>
      <json>["A Magical Waterfall","In the Essence Flow","A Small Cavern","A Small Passage","A Glittering Passage","An Icy Passage","A Pool of Quicksand","A Hot Lava Flow","A Deep Pool","A Narrow Underground Stream","A Wide Pool","A Shimmering Passage","A Frozen Pool"]</json>
    </var>
    <var name="needtorecop">0</var>
    <var name="continent">oc</var>
    <var name="soloing">0</var>
    <var name="temporarilyleading">0</var>
    <var name="solobutcher">0</var>
    <alias name="strippromptfromroomname"/>
    <alias name="gagsetup">
      <value>gag other all set
gag all get remove
gag all spell set</value>
    </alias>
    <var name="version">DS v1.38</var>
    <trigger priority="23620">
      <pattern>You can't seem to do that here!</pattern>
      <value>nomagic=1</value>
    </trigger>
    <var name="justrecalled">0</var>
  </class>
  <class name="group">
    <var name="leader">Istarion</var>
    <trigger priority="1640">
      <pattern>^(%w) issues the order 'recall'</pattern>
      <value>#IF (%1=@leader or %1="someone") {recallorder}</value>
    </trigger>
    <trigger priority="1650">
      <pattern>^@leader tells the group, '(%w)'</pattern>
      <value>#IF %1="rest" {#IF (@isanimist=2 and @cosonregen and !@cos) {cos};rest;groupposition=resting}
#IF %1="sleep" {#IF (@isanimist=2 and @cosonregen and !@cos) {cos};groupposition=sleeping;#IF @recop=1 {rest} {sleep}}
#IF %1="wake" {groupposition=standing;#IF @position="sleeping" {wake} {#IF (@position="resting" or @position="sitting") {stand}};respell}
#IF %1="stand" {groupposition=standing;#IF @position="sleeping" {wake} {#IF (@position="resting" or @position="sitting") {stand}};respell}
#IF %1="status" {groupstatusline}
#IF %1="recall" {recallorder}
#IF %1="horgar" {use horgar}</value>
    </trigger>
    <trigger priority="1660">
      <pattern>You are now a member of (%w)'s group.</pattern>
      <value>#IF @leader!=%1 {group}
leader=%1</value>
    </trigger>
    <trigger priority="1650">
      <pattern>^@leader tells the group, 'use (%w)'</pattern>
      <value>use %1</value>
    </trigger>
    <trigger priority="1650">
      <pattern>^@leader tells the group, 'use slay (%w)'</pattern>
      <value>damtype=%1
use slay %1</value>
    </trigger>
    <var name="groupposition">resting</var>
    <alias name="groupstatusline">
      <value>#IF @aheal {
  #IF (@ispriest=2) {
    %concat("gtf , -- Tank:",@leader," Mhp:",@mhp,"% Thp:",@thp,"% Ghp:",@ghp,"% Gphp:",@gphp,"%(",@gphpn,") (",@version,")")
    } {
    %concat("gtf , -- Tank:",@leader," Thp:",@thp,"% Ghp:",@ghp,"% (",@version,")")}
    }</value>
    </alias>
    <trigger priority="1650">
      <pattern>^@leader tells the group, '(%w) (%w)'</pattern>
      <value><![CDATA[#IF (%1=track and (@isanimist=2 or @isrogue=2)) {trackchannel="gtf , ";track self;track %2;tracktarget=%2}
#IF (%1=pick and @isrogue>0) {pick %2}
#IF (%1=bash and (@isfighter + @istemplar)>0) {pick %2}
#IF (%1="immo" and @iswarlock>0) {
  #IF %2="cold" {aff add "immolation cold";castspellupkeep}
  #IF %2="on" {aff add "immolation cold";castspellupkeep}
  #IF %2="fire" {aff add "immolation fire";castspellupkeep}
  #IF %2="off" {aff remove "immolation fire";aff remove "immolation cold";#IF %iskey(@affectslist,"Immolation Fire") {cast 'immolation cold'};#IF %iskey(@affectslist, "Immolation Cold") {cast 'immolation fire'}}
  }
#IF (%1="aura" and @istemplar>0) {
  #IF %ismember(%2, on|up) {aff add "holy aura";castspellupkeep}
  #IF %ismember(%2, off|down) {aff remove "holy aura";#IF %ismember("Holy Aura", @affectslist) {cast 'holy aura' off}}
  }
#IF (%1="peek" and @isrogue=2) {peek %2;awaitingpeekinfo=1;peekchannel="gtf ,"}
#IF (%1="enter") {
  #IF (%2="field" and @iswuss) {} {enter %2}
  #IF %2="tipi" {sleep}
}
#IF (%1="drink" and %2="well") {drink well}
#IF (%1="leave") {wake;leave}
#IF (%1=%lower(@charname) and %2="wake") {#IF @position="sleeping" {wake} {#IF @position=("resting" or "sitting") {stand}}}
#IF (%1="popcheck" and @ispriest>0) {gt Wasting mana? No thanks. use tell if you want me to popcheck.}
#IF (%1="build" and @isfighter>0) {build %2}
#IF (%1="leadeff") {leadeff %2}
#IF (%1="rem" or %1="remove") {
  #IF %2="boots" {rem @feetitem}
  #IF %2="about" {rem @aboutitem}
  #IF %2="shield" {rem @shielditem}
  }
#IF (%1="wear") {
  #IF %2="boots" {wear @feetitem}
  #IF %2="about" {wear @aboutitem}
  #IF %2="shield" {wear @shielditem}
  }
#IF (%1="retreat") {
  retreatdir=%2
  }]]></value>
    </trigger>
    <var name="loot">0</var>
    <var name="butcher">0</var>
    <trigger priority="2060">
      <pattern>^(%w) tells you 'exp'</pattern>
      <value>#IF (%ismember(%1, @followblacklist)) {} {
  #IF (%1!=@charname) {
    fol %1
    leading=0
    loot=0
    butcher=0
    scsetup
    tog autoloot off
  }
}</value>
    </trigger>
    <trigger priority="5810">
      <pattern>^(%w) starts following you.</pattern>
      <value>group all
#IF (@leading=0 and %1=@leader and @temporarilyleading) {disband @leader;fol @leader}</value>
    </trigger>
    <trigger priority="1650">
      <pattern>^@leader tells you '(%w) (%w) (%w)'</pattern>
      <value>#IF (%1="rescue" and @isfighter&gt;0) {
  #IF %2="add" {rescueadd %3;t @leader Alright, %3 added to the rescuelist.}
  #IF %2="remove" {rescuedel %3;#ADDITEM norescuelist %proper(%3);t @leader Alright, %3 removed from the rescuelist, and added to the norescuelist.}
}
#IF (%1="dd" and %2="cop" and @ismagician&gt;0) {dd %3;#alarm +2 {#IF @cop {} {cop}}}
</value>
    </trigger>
    <class name="tracking">
      <var name="tracktarget">charred</var>
      <trigger priority="94090">
        <pattern>You sense a trail (%w) from here!</pattern>
        <value>#IF (!@leading) {@trackchannel Track: Target: @tracktarget, Direction: &amp;+G%upper(%copy(%1,1,1))%copy(%1, 2)&amp;n} {
#color 159}</value>
      </trigger>
      <trigger priority="95200">
        <pattern>^The track ends here!</pattern>
        <value>#IF (!@leading) {@trackchannel Track: The track ends here.}</value>
      </trigger>
      <trigger priority="95230">
        <pattern>Damn! You lost track of your victim.</pattern>
        <value>#IF (!@leading) {@trackchannel Track: Lost track.}</value>
      </trigger>
      <trigger priority="95250">
        <pattern>Sorry, you can't track for a while, too weary.</pattern>
        <value>#IF (!@leading) {@trackchannel Track: Weary}</value>
      </trigger>
      <var name="trackchannel" type="Literal">gtf , </var>
    </class>
    <class name="peeks">
      <trigger priority="94270">
        <pattern>^(*)$Obvious exits: ~[(*)~]</pattern>
        <value><![CDATA[#IF @awaitingpeekinfo=2 {
  awaitingpeekinfo=3
  peekreturnvalue=@peekchannel + " [&+Y" + %upper(@peekdir) + "&n] &+G" + %IF(%iskey(@shortroomnames,%1),@shortroomnames.%1,%1) + " &+BExits&n: &+y[&+c" + %2 + "&+y]&n"
  }]]></value>
      </trigger>
      <var name="awaitingpeekinfo">0</var>
      <var name="peekdir">north</var>
      <var name="peekreturnvalue" type="Literal"/>
      <var name="peekchannel">t Turia </var>
      <alias name="returnpeek">
        <value><![CDATA[#VAR peekreturnvalue %additem(@peekchannel [~&+Y%upper(@peekdir)~&n] [~&+rEND~&n],@peekreturnvalue)
#FORALL @peekreturnvalue {%i}
peekreturnvalue=""]]></value>
      </alias>
      <trigger priority="5960" ansi="true" trigontrig="false">
        <pattern>^%e[(%n)m(*)$</pattern>
        <value><![CDATA[;#say %1, %2
#IF @awaitingpeekinfo=3 {
  #IF %1="...glowing with a bright light!" {#IF @wellsubs {} {peekreturnvalue=@peekreturnvalue + "(sanc)"}} {
    #IF (%1=""or %2="") {} {
      #IF %1=32 {#VAR peekreturnvalue %additem(@peekchannel [~&+Y%upper(@peekdir)~&n] ~&+g %stripansi(%2) ~&n,@peekreturnvalue)}
      #IF %1=33 {#VAR peekreturnvalue %additem(@peekchannel [~&+Y%upper(@peekdir)~&n] ~&+y %if(@wellsubs and %iskey(@sublist, %stripansi(%2)), %remove("[33m",%eval(@sublist.%stripansi(%2))), %stripansi(%2)) ~&n,@peekreturnvalue)}
      #IF %1=35 {#VAR peekreturnvalue %additem(@peekchannel [~&+Y%upper(@peekdir)~&n] ~&+m %stripansi(%2) ~&n,@peekreturnvalue)}
    }
  }
  }]]></value>
      </trigger>
      <trigger priority="94580">
        <pattern>Sorry there is no exit (%w).</pattern>
        <value>#IF @awaitingpeekinfo {@peekchannel There is no exit %1}
awaitingpeekinfo=0</value>
      </trigger>
      <trigger priority="94590">
        <pattern>You fail to peek!</pattern>
        <value>#IF (@peekdir="" or @leading) {} {peek @peekdir}</value>
      </trigger>
      <trigger priority="94600">
        <pattern>^...glowing with a bright light!$</pattern>
        <value>#IF @awaitingpeekinfo=3 {#IF @wellsubs {} {peekreturnvalue=@peekreturnvalue + "&amp;+w(sanc)&amp;n"}}</value>
      </trigger>
      <trigger priority="95180">
        <pattern>No way! You are fighting for your life!</pattern>
        <value>awaitingpeekinfo=0</value>
      </trigger>
      <trigger priority="95930">
        <pattern>Nah... You feel too relaxed to do that...</pattern>
        <value>awaitingpeekinfo=0</value>
      </trigger>
      <trigger priority="97040">
        <pattern>As you peek (%w) you see the following:</pattern>
        <value>#IF @awaitingpeekinfo=1 {awaitingpeekinfo=2;peekdir=%1}</value>
      </trigger>
      <var name="shortroomnames1" type="Record">
        <value><![CDATA[An Ice-Covered Cavern=[ice]&+CAICC&n|An Icy Passage=[ice]&+CAIP&n|In the Essence Flows=[WM]&+MItEF&n|A Frozen Pool=[ice]&+CAFP&n|A Hot Lava Flow=[lava]&+RAHLF&n|A Small Cavern=[norm]&+gASC&n|A Small Passage=[norm]&+gASP&n|A Magical Waterfall=[WM]&+MAMW&n|A Shimmering Room=[nodrop]&+cASR&n|A Glittering Passage=[nodrop]&+cAGP&n|A Fiery Lavafall=[lava]&+RAFL&n|A Wide Pool=[water]&+BAWP&n|A Deep Pool=[water]&+BADP&n|A Deep Eddy=[water]&+BADE&n]]></value>
        <json><![CDATA[{"An Ice-Covered Cavern":"[ice]&+CAICC&n","An Icy Passage":"[ice]&+CAIP&n","In the Essence Flows":"[WM]&+MItEF&n","A Frozen Pool":"[ice]&+CAFP&n","A Hot Lava Flow":"[lava]&+RAHLF&n","A Small Cavern":"[norm]&+gASC&n","A Small Passage":"[norm]&+gASP&n","A Magical Waterfall":"[WM]&+MAMW&n","A Shimmering Room":"[nodrop]&+cASR&n","A Glittering Passage":"[nodrop]&+cAGP&n","A Fiery Lavafall":"[lava]&+RAFL&n","A Wide Pool":"[water]&+BAWP&n","A Deep Pool":"[water]&+BADP&n","A Deep Eddy":"[water]&+BADE&n"}]]></json>
      </var>
    </class>
    <trigger priority="94370">
      <pattern>^(%w) tells you '(%w) (%x)'</pattern>
      <value>#IF (%2="peek" and @isrogue=2) {
  #IF @awaitingpeekinfo {awaitingpeekinfo=0} {
  peekdir=%3
  #IF @position=resting {stand;peek %3;rest}
  #IF @position=sleeping {wake;peek %3;sleep}
  #IF @position=standing {peek %3}
  awaitingpeekinfo=1
  peekchannel="t " + %1 + " "
  }
  }
#IF (%2="summon" and @ispriest&gt;0) {cast 'summon' 0.%3;summonpending=1}
#IF (%2="track" and (@isanimist=2 or @isrogue=2)) {trackchannel="tf " + @leader + " , ";track self;track %3;tracktarget=%3}
#IF (%2="disband" and !@leading and %1=%proper(%3)) {
  #IF (%ismember(%1, @followblacklist)) {t %1 Sorry, I won't hand a group to someone in my blacklist.} {disband %3}
  }
#IF (%2="rescue" and @isfighter&gt;0) {
  #IF !@arescue {t %1 Rescues are not currently enabled.} {
  #IF %3="on" {
    #ADDITEM rescuelist %1
    #DELITEM norescuelist %1
    t %1 Alright. I'll rescue you.
    }
  #IF %3="off" {
    #DELITEM rescuelist %1
    #ADDITEM norescuelist %1
    t %1 Alright. I won't rescue you.
    }
  }
  }
#IF %ismember(%1, @whitelist) {
  #IF (%2="dd" and %3="cop") {dd %1;#alarm +2 {#IF @cop {} {cop}}}
  }</value>
    </trigger>
    <trigger priority="94380">
      <pattern>^@leader tells the group, '(%w) (%w) (%w)'</pattern>
      <value>#IF (%1=pick and @isrogue&gt;0) {pick %2 %3}
#IF (%1=bash and (@isfighter + @istemplar)&gt;0) {pick %2 %3}
#IF (%1="dd" and %2="cop" and @ismagician&gt;0) {dd %3;#alarm +2 {#IF @cop {} {cop}}}
#IF (%lower(%1)=%lower(@charname)) {
  #IF %2="enter" {enter %3;sleep}
  #IF %2="leave" {wake;leave tipi}
  }</value>
    </trigger>
    <trigger priority="94370">
      <pattern>^(%w) tells you '(%w)'</pattern>
      <value>#IF (%2="summon" and @ispriest&gt;0) {
  #IF @fighting=1 {tell %1 I'm fighting, I can't summon.} {cast 'summon' 0.%1}
  }
#IF (%ismember(%1, @whitelist) and (%1 != @leader)) {
  #IF (%2="dd") {dd %1}
  }</value>
    </trigger>
    <trigger priority="94370">
      <pattern>^(%w) tells you '(%w) (%n).(%w)'</pattern>
      <value>#IF (%1="summon" and @ispriest&gt;0) {cast 'summon' %2.%3}</value>
    </trigger>
    <trigger priority="1650">
      <pattern>^@leader tells you '(%w)'</pattern>
      <value>#IF %1="aholy" {aholy=%mod(@aholy+1, 2);#IF @aholy {t @leader Aholy on;castspellupkeep} {t @leader Aholy off}}
#IF (%1="aheal" and (@ispriest=1 or @isanimist=2)) {aheal=%mod(@aheal+1, 2);#IF @aheal {afight=0;t @leader GroupHealing On} {afight=1;t @leader GroupHealing Off}}
#IF (%1="aheal" and @ispriest=2) {#IF @aheal=0 {aheal=1;afight=0;t @leader GroupHealing On} {t @leader Are you sure? I'm Pr/Pr and I think you just asked me to turn off healing. Tell me 'aheal off' if you really want that.}}
#IF (%1="dd" and @ismagician&gt;0) {#IF @roomname="The Temple of Karandras" {s};dd @leader}
#IF (%1="refollow") {fol @leader}
#IF (%1="acop") {acop=%mod(@acop+1, 2);t @leader Acop set to @acop}
#IF (%1="recop") {recop=%mod(@recop+1, 2);t @leader Recop set to @recop}
#IF (%1="agheal") {agheal=%mod(@agheal+1, 2);#IF @agheal {t @leader I will now heal blindness after fights.} {t @leader I will no longer heal blindness after fights.}}
#IF (%1="abutcher") {butcher=%mod(@butcher+1, 2);t @leader abutcher is now @butcher}
#IF (%1="aloot") {loot=%mod(@loot+1, 2);t @leader loot is now @loot}
#IF (%1="wellsubs") {wellsubs=%mod(@wellsubs+1, 2);t @leader wellsubs are now %if(@wellsubs, ON, OFF)}
#IF (%1="merge" and @isnightblade&gt;0) {#IF %iskey(@affectslist, "Shadow Displacement") {#IF @roomname="The Temple of Karandras" {s};merge}}
#IF (%1="recall") {recallorder}
#IF (%1="area") {cast 'mass pain'}</value>
    </trigger>
    <trigger priority="95330">
      <pattern>You are now the leader.</pattern>
      <value>#IF @roomname="The gatehouse to the stronghold of Alterac" {e;#IF @ispriest&gt;0 {cast 'summon' @leader}}
#IF @roomname="Deep down in the ravine" {
  #IF @charalignment="Good" {tell @leader I'm too good to walk into drow} {
    s
    #IF @ispriest&gt;0 {cast 'summon' @leader}
    }
  }
#If @leading {leader=@charname} {temporarilyleading=1}</value>
    </trigger>
    <trigger priority="95360">
      <pattern>(%w) is now the leader.</pattern>
      <value>leader=%1
temporarilyleading=0</value>
    </trigger>
    <trigger priority="96090">
      <pattern>^The leader is now (%w).</pattern>
      <value>leader=%1</value>
    </trigger>
    <trigger priority="96100">
      <pattern>Alas, your alignment forbids you to go that way...</pattern>
      <value>#IF (!@leading and @ismagician&gt;0) {dd @leader;retrylostcon=1;#alarm +5 {retrylostcon=0}}
#IF (!@leading and @ismagician=0) {tell @askregenchar summon}</value>
    </trigger>
    <class name="grouplist">
      <var name="grouplist" type="Literal"/>
      <trigger priority="96910">
        <pattern>Your group consists of:</pattern>
        <value>grouplist=""
priestlist=""
halfpriestlist=""
grouplevellist=""
priestmanadb=""
notheres=""
animistlist=""
magicianlist=""
nightbladelist=""</value>
      </trigger>
      <trigger priority="96920">
        <pattern>^(%w) is now a member of @leader's group.</pattern>
        <value>#ADDITEM grouplist %1</value>
      </trigger>
      <trigger priority="96930">
        <pattern>^(%w) is now a member of your group.</pattern>
        <value>#ADDITEM grouplist %1</value>
      </trigger>
      <var name="priestlist" type="Literal"/>
      <var name="halfpriestlist" type="Literal"/>
      <trigger priority="4740">
        <pattern>~[(%n)%s(%w)~/(%w)~]%s(%w)%s~[{| |  }(%n)~%H%s(%n)~%M%s%n~%V~] NotHere</pattern>
        <value><![CDATA[#ADDITEM grouplist %4
#ADDKEY grouplevellist %4 %1
#ADDITEM notheres %4
#IF (%2=Pr and %3=Pr and %1>50) {#ADDITEM priestlist %4}
#IF (%2=Pr and %3=Pr and %1>50) {#ADDKEY priestmanadb %4 %6}
#IF (%2=Pr xor %3=Pr and %1>50) {#ADDITEM halfpriestlist %4}
#IF (%2=Ma or %3=Ma and %1>50) {#ADDITEM magicianlist %4}
#IF (%2=Nb or %3=Nb and %1>50) {#ADDITEM nightbladelist %4}
#IF (%2=An and %3=An) {#ADDITEM animistlist %4}
#IF (@rescuescanning>0 and !%ismember(%4, @norescuelist)) {
  #IF @rescuescanning=1 {#IF (%ismember(%3, Ma|Pr|Wl|An) and !%ismember(%2, Fi|Te)) {rescueadd %4}}
  #IF @rescuescanning=2 {#IF (!%ismember(%3, Fi|Te)) {rescueadd %4}}
  #IF @rescuescanning=3 {rescueadd %4}
}]]></value>
      </trigger>
      <var name="rescuescanning">0</var>
      <alias name="rescuescan">
        <value>#IF (@isfighter+@istemplar)&gt;0 {
  rescuelist=""
  rescuescanning=%1
  group
  }
arescuetype=None
#IF %1="1" {arescuetype=Low}
#IF %1="2" {arescuetype=Medium}
#IF %1="3" {arescuetype=All}
#IF %1="4" {arescuetype=None}</value>
      </alias>
      <alias name="rescueadd">
        <value>#ADDITEM rescuelist %1</value>
      </alias>
      <alias name="rescuedel">
        <value>#DELITEM rescuelist %1</value>
      </alias>
      <var name="grouplevellist" type="Record">
        <value>Istarion=89|Neaga=59</value>
        <json>{"Istarion":89,"Neaga":59}</json>
      </var>
      <var name="priestmanadb" type="Literal"/>
      <var name="setpriestchar">Bucket</var>
      <var name="notheres" type="Literal"/>
      <alias name="sumnotheres">
        <value>;All priests can summon
$summoners = %dups(@halfpriestlist|@priestlist)
$summoners = %delitem("", $summoners)
;Dont have missing priests summon
#FO @notheres {$summoners = %delitem(%i, $summoners)}
;Don't use your character for summoning.
$summoners = %delitem(@charname, $summoners)
$index = 1
#FO @notheres {
  t %item($summoners, $index) summon %i
  $index=$index+1
  #IF $index&gt;%numitems($summoners) {$index=1}
  }</value>
      </alias>
      <alias name="summissing">
        <value>grou
#alarm +3 {sumnotheres}</value>
      </alias>
      <var name="animistlist" type="Literal"/>
      <alias name="setpriestshelper">
        <value>$avgmana = 0;
#FO %dbvalues(@priestmanadb) {$avgmana=$avgmana+%i}
$avgmana = $avgmana / %numkeys(@priestmanadb)
#IF ($avgmana &lt; 40) {
  #FO @animistlist {
    t %i aheal on
    t %i thp 68
    t %i ghp 68
    }
} {
  #FO @animistlist {
  t %i aheal off
  }
}
$tmpmanadb=@priestmanadb
$tmpname="null"
$namelist=""
#WHILE (%numkeys($tmpmanadb)&gt;0) {
  $tmpmana=-10  
  #LOOPDB $tmpmanadb {
    #IF %val&gt;$tmpmana {$tmpmana=%val;$tmpname=%key}
  }
  $tmpmanadb=%delkey($tmpmanadb, $tmpname)
  $namelist=%additem($tmpname,$namelist)
}
#IF $namelist!="" {t %item($namelist, 1) :heal m~=0 t~=65 g~=55 gp~=75}
#DELNITEM $namelist 1
#IF $namelist!="" {t %item($namelist, 1) :heal m~=0 t~=55 g~=60 gp~=70}
#DELNITEM $namelist 1
#IF $namelist!="" {t %item($namelist, 1) :heal m~=0 t~=50 g~=50 gp~=65}
#DELNITEM $namelist 1
#IF $namelist!="" {t %item($namelist, 1) :heal m~=0 t~=40 g~=40 gp~=80}
#DELNITEM $namelist 1
#IF $namelist!="" {t %item($namelist, 1) :heal m~=0 t~=40 g~=40 gp~=60}
#DELNITEM $namelist 1
</value>
      </alias>
      <alias name="setpriests">
        <value>grou
#alarm +3 {setpriestshelper}</value>
      </alias>
      <alias name="snh">
        <value>;All priests can summon
$summoners = %dups(@halfpriestlist|@priestlist)
$summoners = %delitem("", $summoners)
;Dont have missing priests summon
#FO @notheres {$summoners = %delitem(%i, $summoners)}
;Don't use your character for summoning.
$summoners = %delitem(@charname, $summoners)
$index = 1
#FO @notheres {
  t %item($summoners, $index) summon %i
  $index=$index+1
  #IF $index&gt;%numitems($summoners) {$index=1}
  }</value>
      </alias>
      <var name="magicianlist" type="Literal"/>
      <var name="nightbladelist" type="Literal"/>
      <alias name="ddnh">
        <value>;tell mages and nightblades that aren't here to dd or merge.
#FO @notheres {
  #IF %ismember(%i, @magicianlist) {t %i dd} {
  #IF %ismember(%i, @nightbladelist) {t %i merge}}
}</value>
      </alias>
    </class>
    <var name="blindlist" type="StringList">
      <json>[]</json>
    </var>
    <trigger priority="96950">
      <pattern>^(%w) {is blind.|seems to be blinded.}</pattern>
      <value>#IF %ismember(%1, @grouplist) {#additem blindlist %1}
#say @blindlist</value>
    </trigger>
    <trigger priority="96960">
      <pattern>^%w utters the words, '{groupheal|ofajspzar}'$You feel better as %w utters some strange words.</pattern>
      <value>blindlist=""</value>
    </trigger>
    <trigger priority="96970">
      <pattern>^%w heals (%w).</pattern>
      <value>#delitem blindlist %1</value>
    </trigger>
    <alias name="remgroupblind">
      <value>#IF (%numitems(@blindlist)=1 and @ispriest=2) {heal @blindlist;blindlist=""}
#IF (%numitems(@blindlist)&gt;1 and @ispriest=2) {gheal}
#IF %numitems(@blindlist)&gt;0 {#alarm +3 {remgroupblind}}</value>
    </alias>
    <trigger priority="97000">
      <pattern>You chant for the well-being of your group.</pattern>
      <value>blindlist=""</value>
    </trigger>
    <trigger priority="97010">
      <pattern>^(%w) is healed.</pattern>
      <value>#delitem blindlist %1</value>
    </trigger>
    <class name="popcheck">
      <var name="popcheckreturn"/>
      <var name="popcheckpending">0</var>
      <alias name="popcheck">
        <value>#IF %1="oc" {popcheckqueue="coven|graveyard|uw|dungeon|shadowdwell";dopopcheck soulcrusher} {
  #IF %1="nc" {popcheckqueue="drow|alterac|sarakesh|khronatio|whitebridge|firbolg|cove|wizarn";dopopcheck medjai} {dopopcheck %1}
  }</value>
      </alias>
      <var name="popcheckqueue" type="StringList">
        <json>[]</json>
      </var>
      <alias name="dopopcheck">
        <value>#IF %ismember(%1, @popcheckarealist) {popcheckzone=%1;popcheckpending=1} {gtf , Popcheck: Unrecognized zone, zone list: @popcheckarealist}
#IF %1="alterac" {cast 'summon' 8.waywatcher}
#IF %1="drow" {cast 'summon' 260.drow}
#IF %1="medjai" {cast 'summon' 8.medjai}
#IF %1="sarakesh" {cast 'summon' 20.sarakesh}
#IF %1="khronatio" {cast 'summon' 10.decapitated}
#IF %1="soulcrusher" {cast 'summon' 70.soulcrusher}
#IF %1="soulies" {cast 'summon' 70.soulcrusher}
#IF %1="uw" {cast 'summon' 1.jason}
#IF %1="graveyard" {cast 'summon' 8.dracolich}
#IF %1="dungeon" {cast 'summon' 8.monster}
#IF %1="coven" {cast 'summon' 6.crone}
#IF %1="shadowdwell" {cast 'summon' 6.malebranche}
#IF %1="wizarn" {cast 'summon' 6.wizarne}
#IF %1="cove" {cast 'summon' 6.mutineer}
#IF %1="firbolg" {cast 'summon' 18.firbolg}
#IF %1="whitebridge" {cast 'summon' 10.councillor}</value>
      </alias>
      <trigger priority="104040">
        <pattern>You failed.</pattern>
        <value>#IF @popcheckpending {popstatusreturn 1}</value>
      </trigger>
      <trigger priority="104050">
        <pattern>You lost your concentration!</pattern>
        <value>#IF @popcheckpending {popstatusreturn 1}</value>
      </trigger>
      <alias name="popstatusreturn">
        <value>popcheckpending=0
#IF %1=1 {gtf , Popcheck zone: @popcheckzone is popped.}
#IF %1=0 {gtf , Popcheck zone: @popcheckzone is not popped.}
#IF %1="nomana" {popcheckqueue="";gtf , Popcheck, out of mana. aborting.}
#IF %null(@popcheckqueue) {} {
  popcheckzone=%item(@popcheckqueue,1)
  #DELNITEM popcheckqueue 1
  dopopcheck @popcheckzone
  }</value>
      </alias>
      <var name="popcheckarealist" type="StringList">
        <value>alterac|drow|medjai|sarakesh|khronatio|soulcrusher|uw|graveyard|dungeon|coven|shadowdwell|cove|whitebridge|firbolg|wizarn</value>
        <json>["alterac","drow","medjai","sarakesh","khronatio","soulcrusher","uw","graveyard","dungeon","coven","shadowdwell","cove","whitebridge","firbolg","wizarn"]</json>
      </var>
      <var name="popcheckzone">uw</var>
      <trigger priority="104090">
        <pattern>Nobody playing by that name.</pattern>
        <value>#IF @popcheckpending {popstatusreturn 0}</value>
      </trigger>
      <trigger priority="104100">
        <pattern>As the words escape your lips and</pattern>
        <value>#IF @popcheckpending {popstatusreturn 1}</value>
      </trigger>
      <trigger priority="104110">
        <pattern>That person is in a safe area!</pattern>
        <value>#IF @popcheckpending {popstatusreturn 1}
#IF @summonpending {t @summontarget I can't summon because &amp;+Cyou&amp;+c are safe.;summonpending=0}</value>
      </trigger>
      <trigger priority="105950">
        <pattern>You can't summon mobs to Karandras.</pattern>
        <value>#IF @popcheckpending {popstatusreturn 1}</value>
      </trigger>
      <trigger priority="7850">
        <pattern>You can't summon enough energy to cast the spell.</pattern>
        <value>#IF @popcheckpending {popstatusreturn nomana}</value>
      </trigger>
    </class>
    <trigger priority="94850">
      <pattern>^(%w) tells you 'buy corpse'</pattern>
      <value>.3s3w3n
with 5000000
buy corpse</value>
    </trigger>
    <trigger priority="107890">
      <pattern>^@leader tells the group, 'Group is now disbanded!'</pattern>
      <value>leader=@charname</value>
    </trigger>
    <class name="orbcheck">
      <class name="checkingorb" enabled="false">
        <trigger priority="5380">
          <pattern>* is using:</pattern>
          <value>iseq=1</value>
        </trigger>
        <trigger priority="5400">
          <pattern>^Orb of (*)</pattern>
          <value>isorb=1
#ADDITEM orbtype %1</value>
        </trigger>
        <trigger priority="130" newline="false" prompt="true">
          <pattern>(%n)~((%n)~)H (%n)~((%n)~)M (%n)~((%n)~)V ~&gt;</pattern>
          <value>orbretval = "tf "+ @leader + " , EQ?: "
#IF @iseq {orbretval = @orbretval + "Yes."} {orbretval = @orbretval + "No."}
orbretval = @orbretval + " Orbs?: "
#IF @isorb {
#FORALL @orbtype {orbretval = @orbretval + "Orb of " + %i }
} {orbretval = @orbretval + "None."}
@orbretval
#T- checkingorb</value>
        </trigger>
        <var name="orbretval">tf Adema , EQ?: Yes. Orbs?: Orb of Vampirism</var>
      </class>
      <var name="isorb">1</var>
      <var name="iseq">1</var>
      <var name="orbtype" type="StringList">
        <value>Vampirism</value>
        <json>["Vampirism"]</json>
      </var>
      <trigger priority="5430">
        <pattern>@leader tells the group, 'check (%w)'</pattern>
        <value>#IF @isrogue&gt;0 {
  orbchecking=1
  iseq=0
  isorb=0
  orbtype=""
  look %1
  }</value>
      </trigger>
      <var name="orbchecking">0</var>
      <trigger name="{is in excellent condition.|has a few scratches.|has some small" priority="5490">
        <pattern>{is in excellent condition.|has a few scratches.|has some small wounds and bruises.|has quite a few wounds.|has some big nasty wounds and scratches.|is pretty hurt.|is in awful condition.}</pattern>
        <value>#IF @orbchecking {#T+ checkingorb
orbchecking=0
}</value>
      </trigger>
      <trigger priority="5430">
        <pattern>@leader tells the group, 'check (%d).(%w)'</pattern>
        <value>#IF @isrogue&gt;0 {
  orbchecking=1
  iseq=0
  isorb=0
  orbtype=""
  look %1~.%2
  }</value>
      </trigger>
      <trigger priority="5430">
        <pattern>@leader tells you 'check (%w)'</pattern>
        <value>#IF @isrogue&gt;0 {
  orbchecking=1
  iseq=0
  isorb=0
  orbtype=""
  look %1
  }</value>
      </trigger>
      <trigger priority="5430">
        <pattern>@leader tells you 'check (%d).(%w)'</pattern>
        <value>#IF @isrogue&gt;0 {
  orbchecking=1
  iseq=0
  isorb=0
  orbtype=""
  look %1~.%2
  }</value>
      </trigger>
    </class>
    <var name="followblacklist" type="Literal"/>
    <trigger priority="94850">
      <pattern>^(%w) tells you 'corpse'</pattern>
      <value>fixcorpse</value>
    </trigger>
    <trigger priority="2060">
      <pattern>^(%w) tells you 'beep'</pattern>
      <value>#beep</value>
    </trigger>
    <trigger priority="125870">
      <pattern>You stop following</pattern>
      <value>leader=""
grouplist=""
halfpriestlist=""
priestlist=""</value>
    </trigger>
    <var name="solo">0</var>
    <trigger priority="94380">
      <pattern>^%w tells the group, '(%w) (%w)'</pattern>
      <value><![CDATA[#IF (%1="rescue") {
  #IF (%2="info") {gt Rescues are currently: %if(@arescue,On,Off). %if(@arescue, Rescuetype: @arescuetype,) Leader commands: tell arescue <low|medium|all|off|on|info>, tell rescue <add|remove> <name>, group commands: tell rescue <on|off>. rescue off persists through rescue scans.}
  }
#IF (%1="disband") {
  #IF @temporarilyleading {
    disband %2;fol %2;leading=0
  }
}]]></value>
    </trigger>
    <trigger priority="94380">
      <pattern>^%w tells the group, '(%w)'</pattern>
      <value>#IF %1="rescue" {}</value>
    </trigger>
    <trigger priority="94380">
      <pattern>^%w tells the group, '(%w) (%w) (%w)'</pattern>
      <value>#IF %1="rescue" {}</value>
    </trigger>
    <trigger priority="1650">
      <pattern>^@leader tells you '(%w) (%x)'</pattern>
      <value><![CDATA[#IF %1="kill" {kill %2}
#IF (%1="touch" and %2="door") {touch door}
#IF (%1="dd" and %2="cop") {dd @leader;#alarm +2 {cop};retrylostcon=1;#alarm +8 {retrylostcon=0}}
#IF (%1="aholy" and @ispriest>0) {#IF %2="on" {aholy=1;t @leader Aholy on;castspellupkeep};#IF %2="off" {aholy=0;t @leader Aholy off}}
#IF (%1="aheal" and (@ispriest=1 or @isanimist=2)) {#IF %2="on" {aheal=1};#IF %2="off" {aheal=0};#IF @aheal {afight=0;aassist=0;t@leader GroupHealing On} {afight=1;aassist=1;t @leader GroupHealing Off}}
#IF (%1="aheal" and @ispriest=2) {#IF %2="on" {aheal=1;t @leader GroupHealing On};#IF %2="off" {aheal=0;t @leader GroupHealing Off ~(and I'm Pr/Pr, so I hope you know what you're doing.~)}}
#IF (%1="acop" and %ismember(%2,"on|On|off|Off") and @ismagician>0) {#IF %ismember(%2,"On|on") {acop=1} {acop=0};t @leader Acop set to @acop}
#IF (%1="recop" and %ismember(%2,"on|On|off|Off") and @ismagician>0) {#IF %ismember(%2,"On|on") {recop=1} {recop=0};t @leader Recop set to @recop}
#IF (%1="gate" and @ispriest=2) {
  #T+ gatelistener
  gate %2
  retrylostcon=1
  gatetarget=%2
  #alarm +7 {retrylostcon=0}
}
#IF (%ismember(%1, mhp|thp|ghp|gphp|gphpn) and !(@ispriest>0 or @isanimist=2)) {t @leader I think you need a few more cocktails.} {
  #IF (%1="mhp") {mhp=%2;tell @leader mhp is now @mhp}
  #IF (%1="thp") {thp=%2;tell @leader thp is now @thp}
  #IF (%1="ghp") {ghp=%2;tell @leader ghp is now @ghp}
  #IF (%1="gphp") {gphp=%2;tell @leader gphp is now @gphp}
  #IF (%1="gphpn") {gphpn=%2;tell @leader gphpn is now @gphpn}
}
#IF (%1="popcheck" and @ispriest>0) {popcheck %2}
#IF (%1="arescue" and @isfighter>0) {
  #IF (!@arescue and %2!="info") {arescue=1;afight=0;aberserk=0;addance=0}
  #IF %2="all" {rescuescan 3}
  #IF %2="low" {rescuescan 1}
  #IF %2="medium" {rescuescan 2}
  #IF %2="off" {arescue=0;afight=1;aberserk=1;addance=1}
  #IF %2="on" {}
  #IF %2="info" {t @leader Low is all primary class an/pr/ma/wl. medium includes stabbers. all is everyone.} {#ALARM +5 {#IF @arescue {t @leader Rescue list is now: @rescuelist} {t @leader Rescues are now off.}}}
}
#IF (%1="protect") {
  protect %2
  #IF %ismember(%2,self|@charname) {#IF @rescuelist="" {afight=1;aberserk=1;addance=1};t @leader Alright, I'm not protecting or rescuing anyone, so damage is back on.} {afight=0;aberserk=0;addance=0}
  }
#IF %1="abusepr" {#IF %2="off" {abusepr="";t @leader No longer asking for heals.} {abusepr=%2;t @leader I'll now ask @abusepr for heals.}}]]></value>
    </trigger>
    <class name="damlogscan">
      <trigger name="Damlog$Name                  Miss  Hits  Weapon   Skill   Spell" priority="165860">
        <pattern>Damlog$Name                  Miss  Hits  Weapon   Skill   Spell    Total Average Ticks</pattern>
        <value>#T+ damlogscanning
dsd=""
dsdsorted=""
damscantoprompt=1
totalavg=0
totaleff=0
totaldamagers=0</value>
      </trigger>
      <class name="damlogscanning">
        <trigger priority="165890">
          <pattern>^(%w)%s(%n)%s(%n)%s(%n)%s(%n)%s(%n)%s(%n)%s(%n)%s(%n)</pattern>
          <value>#IF @dsscantype="DamAvg" {#ADDKEY dsd %1 %8}
#IF @dsscantype="DamEfficiency" {#ADDKEY dsd %1 %eval(%8/@grouplevellist.%1)}
#IF %8&gt;500 {#ADD totalavg %8;#ADD totaleff %eval(%8/@grouplevellist.%1);#ADD totaldamagers 1}</value>
        </trigger>
      </class>
      <var name="dsd" type="Record">
        <value>Istarion=4296|Insane=2590|Dreadlock=996|Tyr=3076|Oka=12584|Fan=6174|Musty=5693|Mommy=4122|Shroom=791|Anasadi=8280|Jagularen=5244|Tamara=17552|Knurks=10446|Jorah=683|Ethernet=5559|Damien=5067|Xyron=12223|Overkill=6278|Cd=11|Greenknight=16608|Jacques=14535|Hurricane=5611|Turia=3712|Triad=1232|Tesla=3447|Twov=13963|Skyr=1060|Ride=5027|Orca=8331|Mule=3145|Mask=4613|Halo=6|Tizgib=1053|Coore=25|Yoggin=5|Rumpy=2717|River=0</value>
        <json>{"Istarion":4296,"Insane":2590,"Dreadlock":996,"Tyr":3076,"Oka":12584,"Fan":6174,"Musty":5693,"Mommy":4122,"Shroom":791,"Anasadi":8280,"Jagularen":5244,"Tamara":17552,"Knurks":10446,"Jorah":683,"Ethernet":5559,"Damien":5067,"Xyron":12223,"Overkill":6278,"Cd":11,"Greenknight":16608,"Jacques":14535,"Hurricane":5611,"Turia":3712,"Triad":1232,"Tesla":3447,"Twov":13963,"Skyr":1060,"Ride":5027,"Orca":8331,"Mule":3145,"Mask":4613,"Halo":6,"Tizgib":1053,"Coore":25,"Yoggin":5,"Rumpy":2717,"River":0}</json>
      </var>
      <var name="dsdsorted" type="Literal"/>
      <alias name="dspalias">
        <value>#SAY @totaldamagers
#WHILE %numkeys(@dsd)&gt;0 {
maxname=""
maxval=-1
#LOOPDB @dsd {
  #IF %val&gt;@maxval {maxval=%val;maxname=%key}
  }
#IF @dsscantype="DamAvg" {#ADDKEY dsdsorted @maxname @maxval}
#IF @dsscantype="DamEfficiency" {#ADDKEY dsdsorted @maxname %format(2,%eval(%float(@maxval)*@totaldamagers/@totaleff))}
#DELKEY dsd @maxname
}
#If @dsrequested&gt;0 {dsdisplay @dsrequested}</value>
      </alias>
      <var name="maxname">Akira</var>
      <var name="maxval">1</var>
      <alias name="dsdisplay">
        <value><![CDATA[dsoutput=""
dsoutput=%concat("gt ",@dsscantype," &+G1. &+R<3 &+M",%dbkeys(@dsdsorted).1,"&n&+R(&+r",@dsdsorted.1"&+R) <3")
#IF %1>1 {dsoutput=%concat(@dsoutput," &+G2. &+c",%dbkeys(@dsdsorted).2,"(&+C",@dsdsorted.2,"&+c)")}
#IF %1>2 {dsoutput=%concat(@dsoutput," &+G3. &+c",%dbkeys(@dsdsorted).3,"(&+C",@dsdsorted.3,"&+c)")}
#IF %1>3 {dsoutput=%concat(@dsoutput," &+G4. &+c",%dbkeys(@dsdsorted).4,"(&+C",@dsdsorted.4,"&+c)")}
#IF %1>4 {dsoutput=%concat(@dsoutput," &+G5. &+c",%dbkeys(@dsdsorted).5,"(&+C",@dsdsorted.5,"&+c)")}
#IF %1>5 {dsoutput=%concat(@dsoutput,"|gt ",@dsscantype)}
#IF %1>5 {dsoutput=%concat(@dsoutput," &+G6. &+c",%dbkeys(@dsdsorted).6,"(&+C",@dsdsorted.6,"&+c)")}
#IF %1>6 {dsoutput=%concat(@dsoutput," &+G7. &+c",%dbkeys(@dsdsorted).7,"(&+C",@dsdsorted.7,"&+c)")}
#IF %1>7 {dsoutput=%concat(@dsoutput," &+G8. &+c",%dbkeys(@dsdsorted).8,"(&+C",@dsdsorted.8,"&+c)")}
#IF %1>8 {dsoutput=%concat(@dsoutput," &+G9. &+c",%dbkeys(@dsdsorted).9,"(&+C",@dsdsorted.9,"&+c)")}
#IF %1>9 {dsoutput=%concat(@dsoutput," &+G10. &+c",%dbkeys(@dsdsorted).10,"(&+C",@dsdsorted.10,"&+c)")}
#IF %1>10 {dsoutput=%concat(@dsoutput,"|gt ",@dsscantype)}
#IF %1>10 {dsoutput=%concat(@dsoutput," &+G11. &+c",%dbkeys(@dsdsorted).11,"(&+C",@dsdsorted.11,"&+c)")}
#IF %1>11 {dsoutput=%concat(@dsoutput," &+G12. &+c",%dbkeys(@dsdsorted).12,"(&+C",@dsdsorted.12,"&+c)")}
#IF %1>12 {dsoutput=%concat(@dsoutput," &+G13. &+c",%dbkeys(@dsdsorted).13,"(&+C",@dsdsorted.13,"&+c)")}
#IF %1>13 {dsoutput=%concat(@dsoutput," &+G14. &+c",%dbkeys(@dsdsorted).14,"(&+C",@dsdsorted.14,"&+c)")}
#IF %1>14 {dsoutput=%concat(@dsoutput," &+G15. &+c",%dbkeys(@dsdsorted).15,"(&+C",@dsdsorted.15,"&+c)")}
#IF %1>15 {dsoutput=%concat(@dsoutput,"|gt ",@dsscantype)}
#IF %1>15 {dsoutput=%concat(@dsoutput," &+G16. &+c",%dbkeys(@dsdsorted).16,"(&+C",@dsdsorted.16,"&+c)")}
#IF %1>16 {dsoutput=%concat(@dsoutput," &+G17. &+c",%dbkeys(@dsdsorted).17,"(&+C",@dsdsorted.17,"&+c)")}
#IF %1>17 {dsoutput=%concat(@dsoutput," &+G18. &+c",%dbkeys(@dsdsorted).18,"(&+C",@dsdsorted.18,"&+c)")}
#IF %1>18 {dsoutput=%concat(@dsoutput," &+G19. &+c",%dbkeys(@dsdsorted).19,"(&+C",@dsdsorted.19,"&+c)")}
#IF %1>19 {dsoutput=%concat(@dsoutput," &+G20. &+c",%dbkeys(@dsdsorted).20,"(&+C",@dsdsorted.20,"&+c)")}
#IF %1>20 {dsoutput=%concat(@dsoutput,"|gt ",@dsscantype)}
#IF %1>20 {dsoutput=%concat(@dsoutput," &+G21. &+c",%dbkeys(@dsdsorted).21,"(&+C",@dsdsorted.21,"&+c)")}
#IF %1>21 {dsoutput=%concat(@dsoutput," &+G22. &+c",%dbkeys(@dsdsorted).22,"(&+C",@dsdsorted.22,"&+c)")}
#IF %1>22 {dsoutput=%concat(@dsoutput," &+G23. &+c",%dbkeys(@dsdsorted).23,"(&+C",@dsdsorted.23,"&+c)")}
#IF %1>23 {dsoutput=%concat(@dsoutput," &+G24. &+c",%dbkeys(@dsdsorted).24,"(&+C",@dsdsorted.24,"&+c)")}
#IF %1>24 {dsoutput=%concat(@dsoutput," &+G25. &+c",%dbkeys(@dsdsorted).25,"(&+C",@dsdsorted.25,"&+c)")}
#IF %1>25 {dsoutput=%concat(@dsoutput,"|gt ",@dsscantype)}
#IF %1>25 {dsoutput=%concat(@dsoutput," &+G26. &+c",%dbkeys(@dsdsorted).26,"(&+C",@dsdsorted.26,"&+c)")}
#IF %1>26 {dsoutput=%concat(@dsoutput," &+G27. &+c",%dbkeys(@dsdsorted).27,"(&+C",@dsdsorted.27,"&+c)")}
#IF %1>27 {dsoutput=%concat(@dsoutput," &+G28. &+c",%dbkeys(@dsdsorted).28,"(&+C",@dsdsorted.28,"&+c)")}
#IF %1>28 {dsoutput=%concat(@dsoutput," &+G29. &+c",%dbkeys(@dsdsorted).29,"(&+C",@dsdsorted.29,"&+c)")}
#IF %1>29 {dsoutput=%concat(@dsoutput," &+G30. &+c",%dbkeys(@dsdsorted).30,"(&+C",@dsdsorted.30,"&+c)")}
#IF %1>30 {dsoutput=%concat(@dsoutput,"|gt ",@dsscantype)}
#IF %1>30 {dsoutput=%concat(@dsoutput," &+G31. &+c",%dbkeys(@dsdsorted).31,"(&+C",@dsdsorted.31,"&+c)")}
#IF %1>31 {dsoutput=%concat(@dsoutput," &+G32. &+c",%dbkeys(@dsdsorted).32,"(&+C",@dsdsorted.32,"&+c)")}
#IF %1>32 {dsoutput=%concat(@dsoutput," &+G33. &+c",%dbkeys(@dsdsorted).33,"(&+C",@dsdsorted.33,"&+c)")}
#IF %1>33 {dsoutput=%concat(@dsoutput," &+G34. &+c",%dbkeys(@dsdsorted).34,"(&+C",@dsdsorted.34,"&+c)")}
#IF %1>34 {dsoutput=%concat(@dsoutput," &+G35. &+c",%dbkeys(@dsdsorted).35,"(&+C",@dsdsorted.35,"&+c)")}
#IF %1>35 {dsoutput=%concat(@dsoutput,"|gt ",@dsscantype)}
#IF %1>35 {dsoutput=%concat(@dsoutput," &+G36. &+c",%dbkeys(@dsdsorted).36,"(&+C",@dsdsorted.36,"&+c)")}
#IF %1>36 {dsoutput=%concat(@dsoutput," &+G37. &+c",%dbkeys(@dsdsorted).37,"(&+C",@dsdsorted.37,"&+c)")}
#IF %1>37 {dsoutput=%concat(@dsoutput," &+G38. &+c",%dbkeys(@dsdsorted).38,"(&+C",@dsdsorted.38,"&+c)")}
#IF %1>38 {dsoutput=%concat(@dsoutput," &+G39. &+c",%dbkeys(@dsdsorted).39,"(&+C",@dsdsorted.39,"&+c)")}
#IF %1>39 {dsoutput=%concat(@dsoutput," &+G40. &+c",%dbkeys(@dsdsorted).40,"(&+C",@dsdsorted.40,"&+c)")}
%item(@dsoutput,1)
%item(@dsoutput,2)
%item(@dsoutput,3)
%item(@dsoutput,4)
%item(@dsoutput,5)
%item(@dsoutput,6)
%item(@dsoutput,7)
%item(@dsoutput,8)
dsrequested=0
;gt DamAvg &+G1. &+R~<3 %dbkeys(@dsdsorted).1~(&+r@dsdsorted.1&+R~) ~<3 &+G2. &+c%dbkeys(@dsdsorted).2~(&+C@dsdsorted.2&+c~) 3. %dbkeys(@dsdsorted).3 ~(@dsdsorted.3~) 4. %dbkeys(@dsdsorted).4 ~(@dsdsorted.4~) 5. %dbkeys(@dsdsorted).5 ~(@dsdsorted.5~)
;gt DamAvg 6. %dbkeys(@dsdsorted).6 ~(@dsdsorted.6~) 7. %dbkeys(@dsdsorted).7 ~(@dsdsorted.7~) 8. %dbkeys(@dsdsorted).8 ~(@dsdsorted.8~) 9. %dbkeys(@dsdsorted).9 ~(@dsdsorted.9~) 10. %dbkeys(@dsdsorted).10 ~(@dsdsorted.10~)]]></value>
      </alias>
      <var name="dsoutput"><![CDATA[gt DamAvg &+G1. &+R<3 &+MIstarion&n&+R(&+r16328&+R) <3 &+G2. &+cSkinhead(&+C10567&+c) &+G3. &+cTizgib(&+C10352&+c) &+G4. &+cLegendary(&+C9143&+c) &+G5. &+cSkyie(&+C8986&+c)|gt DamAvg &+G6. &+cLuca(&+C8861&+c) &+G7. &+cKosken(&+C8500&+c) &+G8. &+cCoward(&+C7379&+c) &+G9. &+cSoren(&+C7306&+c) &+G10. &+cBosch(&+C6820&+c)]]></var>
      <trigger priority="166140">
        <pattern>%w tells the group, 'top(%n)'</pattern>
        <value>#IF @showlogsongt {damscan %1}</value>
      </trigger>
      <var name="dsrequested">0</var>
      <var name="damscantoprompt">0</var>
      <alias name="damscan">
        <value>group
daml s g
dsrequested=10
dsscantype=DamAvg
#IF !%null(%1) {dsrequested=%1}
#IF %2="eff" {dsscantype=DamEfficiency}</value>
      </alias>
      <var name="totalavg">196708</var>
      <var name="totaldamagers">32</var>
      <var name="dsscantype">DamAvg</var>
      <var name="totaleff">2215</var>
      <trigger priority="166140">
        <pattern>%w tells the group, 'eff(%n)'</pattern>
        <value>#IF @showlogsongt {damscan %1 eff}</value>
      </trigger>
    </class>
    <trigger priority="2060">
      <pattern>^(%w) tells you 'invoke'</pattern>
      <value>invoke orb</value>
    </trigger>
    <trigger priority="170630">
      <pattern>The artifact seems to resist your attempts to pick it up.</pattern>
      <value>#BEEP
#color</value>
    </trigger>
    <trigger priority="1650">
      <pattern>^@leader tells you ':heal m=(%n) t=(%n) g=(%n) gp=(%n)'</pattern>
      <value>#IF (%ismember(%1, mhp|thp|ghp|gphp|gphpn) and !(@ispriest&gt;0 or @isanimist=2)) {t @leader I think you need a few more cocktails.} {
  mhp=%1
  thp=%2
  ghp=%3
  gphp=%4
}</value>
    </trigger>
    <var name="gatetarget">east</var>
    <class name="summons">
      <var name="summonpending">0</var>
      <trigger priority="9280">
        <pattern>You lost your concentration!</pattern>
        <value>#if @summonpending {cast 'summon' @summontarget}</value>
      </trigger>
      <var name="summontarget"/>
    </class>
    <trigger priority="2060">
      <pattern>^(%w) tells the Clearly Outplayed, 'exp'</pattern>
      <value>#IF (%ismember(%1, @followblacklist)) {} {
  #IF (%1!=@charname) {
    fol %1
    leading=0
    loot=0
    butcher=0
    scsetup
    tog autoloot off
  }
}</value>
    </trigger>
    <trigger priority="2060">
      <pattern>^(%w) tells you 'well'</pattern>
      <value>#IF (%ismember(%1, @followblacklist)) {} {
  #IF (%1!=@charname) {
    fol %1
    leading=0
    loot=0
    butcher=0
    scsetup
    tog autoloot off
  }
}</value>
    </trigger>
    <var name="retreatdir" type="Literal"/>
    <alias name="recallorder">
      <value>#IF @nomagic {recal} {recall}
justrecalled=1</value>
    </alias>
    <class name="gatelistener" enabled="false">
      <trigger priority="24690">
        <pattern>You wait in vain as no dimension portal appears.</pattern>
        <value>gt Failed to establish gate.
#T- gatelistener</value>
      </trigger>
      <trigger priority="24700">
        <pattern>You create a red field of energy.</pattern>
        <value>gt Gate created to @gatetarget.
#T- gatelistener</value>
      </trigger>
    </class>
    <trigger priority="1649">
      <pattern>^@leader tells you '(%w) (*)'</pattern>
      <value>#IF %1="scribe" {
  #IF (@ismagician+@ispriest&gt;0) {get parchment @weaponcontainer;scribe %2;give scroll @leader} {t @leader My class cannot scribe.}
}</value>
    </trigger>
  </class>
  <class name="lostcon">
    <trigger priority="2940">
      <pattern>You lost your concentration!</pattern>
      <value>#IF @retrylostcon {~!}</value>
    </trigger>
    <var name="retrylostcon">0</var>
  </class>
  <class name="misc">
    <trigger priority="780">
      <pattern>into a void</pattern>
      <value>shudder</value>
    </trigger>
    <trigger priority="66760">
      <pattern>Your limbs move of their own accord, you have no control over your body.</pattern>
      <value>recal
.8w2su
tog play
tog play
.dn</value>
    </trigger>
    <trigger priority="96600">
      <pattern>^The Draconian Jailor picks up (%w) and runs away from battle.</pattern>
      <value>sum %1</value>
    </trigger>
    <var name="blindleft">0</var>
    <trigger priority="103520">
      <pattern>^The Primeval Worm strikes with its slime-dripping maw, swallowing you whole!</pattern>
      <value>#say you dun got eated.
flee</value>
    </trigger>
    <trigger priority="103530">
      <pattern>^Some sudden squirming movements make you lose your footing, and you feel$yourself sliding down with a huge blob of disgusting slime.</pattern>
      <value>#say uh oh!
flee</value>
    </trigger>
    <trigger priority="103870">
      <pattern>^PANIC! You couldn't escape!</pattern>
      <value>flee</value>
    </trigger>
    <trigger priority="112600">
      <pattern>is blind.</pattern>
      <value>#alarm +130 {#say Blind out in 20 seconds!}
#alarm +150 {#say Blind out!}</value>
    </trigger>
    <alias name="pginfo">
      <value><![CDATA[#IF %1="nyx" {gt ~&+WRefollow on entry, if you fall, ~&+Rs4w3s6e3nu3s3w3n~&+W, and then the fight is North.~&n}
#IF %1="zandramas" {gt ~&+CIf you get pushed out, &+R3n2e3n2e, enter~&+C, to get back to the fight.~&n}
#IF %1="colossus" {gt ~&+WWalk &+Rsdesd&+W. During the fight, do not try to remove blind, and healers gpow while blind.}
#IF %1="brain" {gt &+WIf you are charmed, &+RRECALL&+W using the skill, walk &+R8w2su&+W, &+Rtog play x2&+W, then return to the group and fight.}]]></value>
    </alias>
    <var name="maliusforms" type="StringList">
      <value>A female peasant is busy at work here  (White Aura)|A merchant has stopped here briefly to trade goods|A guard of Alterac defends the sanctity of his homeland (White Aura)|A soldier of fortune waits here for instruction (invisible)|An elven ranger is scouting the surrounding hinterland (White Aura)|A hero of the Alliance stands fully alert (White Aura)</value>
      <json>["A female peasant is busy at work here  (White Aura)","A merchant has stopped here briefly to trade goods","A guard of Alterac defends the sanctity of his homeland (White Aura)","A soldier of fortune waits here for instruction (invisible)","An elven ranger is scouting the surrounding hinterland (White Aura)","A hero of the Alliance stands fully alert (White Aura)"]</json>
    </var>
    <trigger priority="125210">
      <pattern>{@maliusforms}</pattern>
      <value>#say MALIUS</value>
    </trigger>
    <class name="ship">
      <trigger priority="125270">
        <pattern>({The ship|A huge Silver Dragon|The Barge of the Dead}) arrives</pattern>
        <value>#IF %1="The ship" {
#IF (@roomname="A Ferry Dock in Myrridon" and @continent=nc) {#IF @leading=1 {board ship}}
#IF (@roomname="The landing-stage of the inter-continental ferry" and @continent=oc) {#IF @leading=1 {board ship}}
}
#IF %1="A huge Silver Dragon" {
#IF (@roomname="The Ashinara Outpost") {#IF @leading=1 {board dragon}}
}
#IF %1="The Barge of the Dead" {
#IF (@roomname="Port of Lost Souls") {#IF @leading=1 {board ship}}
#IF (@roomname="Port of the Styx Marsh") {#IF @leading=1 {board ship}}
}</value>
      </trigger>
      <var name="onship">0</var>
      <trigger priority="125310">
        <pattern>You board {The ship|A huge Silver Dragon|The Barge of the Dead}.</pattern>
        <value>onship=1</value>
      </trigger>
      <trigger priority="125320">
        <pattern>You disembark.</pattern>
        <value>onship=0</value>
      </trigger>
    </class>
    <class name="findguide">
      <alias name="findguidedecision">
        <value>#IF %ismember("a desert guide battles through the sandstorms in search of a wondrous city.", @moblist) {findingguide=0;#stop} {#ok}</value>
      </alias>
      <var name="findingguide">0</var>
      <path name="miloraipath">eennewwswswenwnnwsnnnseswwwenwwewssewnewnewnewswssssssw</path>
      <alias name="findguide">
        <value>findingguide=1
#slow miloraipath</value>
      </alias>
    </class>
    <alias name="poollook">
      <value>#IF %1=reset {poollookcount=1} {
 look @poollookcount~.%1
 #ADD poollookcount 1
}</value>
    </alias>
    <var name="poollookcount">68</var>
    <trigger priority="168350">
      <pattern>You are thirsty.</pattern>
      <value>drink mug
get grape pouch
eat grape</value>
    </trigger>
    <trigger priority="6140">
      <pattern>^(%w) tells you 'version'</pattern>
      <value>t %1 @version</value>
    </trigger>
    <var name="vhistory">Version history

1.24:
  - improved handling of stabbers when tanking
  - added well substitutions, wellsubs=0, wellsubs=1 leader can tell wellsubs to toggle.
  - hopefully made buttons toggle again
  - fixed fighter buttons to not show deathdance for half fighters.

1.25:
  - Added drink well trig
  - made showfrags prettier

1.33:
  - fixed immolation triggers. off should now work. swapping straight from fire to cold or vice versa will be delayed.
  - added whitelist accessors. people on superwhitelist can use tell whitelist name to add name to the whitelist, tell whitelist will respond with the whitelist.
    - whitelisted people can ask for dd and dd cop whether they're leader or not, and can use the invoke trig (which has no checks, so it will invoke over good        orbs, so make sure the people on your whitelist don't secretly hate you.)
  - added auto ship handling for uw and dragontail
  - I believe I fixed an issue with auto-blind removal breaking heals. let me know if it isn't fixed.

1.34:
  - who knows

1.35:
  - added eq check to scsetup, checks orb and sets quickness if quickness orb.
  - color track dir line if tracking as leader

1.36:
  - Add walk south after recall
  - add Sword Demon to immuneorresfiremobs

1.37:
  - Added ddnh alias, tell all magician and nightblade who are not here to dd or merge (ma/nb will be told dd, not both). Operates off the last group list seen.
  - Added @iswuss variable, if @iswuss = 1, will not enter field when leader gt's enter field

1.38:
  - holy gate triggers now give more informative feedback on the result of the gate attempt.
  - added satiate to spellbot
  - add cove, wizarn, whitebridge, and firbolg to popcheck
  - add scribe trigs for leader</var>
    <class name="autobuy">
      <trigger priority="7100">
        <pattern>^{Sheila|The secretary} says 'Sorry @charname, you don't have the (%n) gold coins that we would have to charge for that corpse retrieval!'</pattern>
        <value>#IF @autobuy {with %1;buy corpse}</value>
      </trigger>
      <trigger priority="7100">
        <pattern>^The secretary says 'That will cost you (%n) coins, @charname!'</pattern>
        <value>#IF @autobuy {with %1;buy corpse}</value>
      </trigger>
      <alias name="fixcorpse">
        <value>score
get all @charname
hold wing
hold silmaril
hold overlord
hold frontal
hold innocence
wear sturm neck
wear sturm neck
wear all
get all @charname
wear all
get all @charname
wear all
save
get @charname
donate corpse</value>
      </alias>
    </class>
    <trigger priority="6140">
      <pattern>^(%w) tells you 'whitelist (%w)'</pattern>
      <value>#IF %ismember(%1, @superwhitelist) {#add whitelist %2} {t %1 I will not add whitelist members for anyone not on the superwhitelist: @superwhitelist}
</value>
    </trigger>
    <trigger priority="6140">
      <pattern>^(%w) tells you 'whitelist'</pattern>
      <value>t %1 Whitelist: @whitelist</value>
    </trigger>
    <trigger priority="23640">
      <pattern>You create a scroll</pattern>
      <value>#alarm +78 {#say Can scribe again}</value>
    </trigger>
  </class>
  <class name="peek keys">
    <macro key="CTRL-KEY4">
      <value>#IF @isrogue=2 {peek west} {tell @peeker peek west}</value>
    </macro>
    <macro key="CTRL-KEY2">
      <value>#IF @isrogue=2 {peek south} {tell @peeker peek south}</value>
    </macro>
    <macro key="CTRL-KEY6">
      <value>#IF @isrogue=2 {peek east} {tell @peeker peek east}</value>
    </macro>
    <macro key="CTRL-KEY8">
      <value>#IF @isrogue=2 {peek north} {tell @peeker peek north}</value>
    </macro>
    <macro key="CTRL-KEY1">
      <value>#IF @isrogue=2 {peek down} {tell @peeker peek down}</value>
    </macro>
    <macro key="CTRL-KEY7">
      <value>#IF @isrogue=2 {peek up} {tell @peeker peek up}</value>
    </macro>
    <var name="peeker">Charle</var>
  </class>
  <class name="preferencevariables">
    <var name="whitelist" type="StringList">
      <value>Ghodris|Wind|Orca|Totici|Entropy|Mommy|Daddy|Brutus|Tiberius|Tembo|Dylma</value>
      <json>["Ghodris","Wind","Orca","Totici","Entropy","Mommy","Daddy","Brutus","Tiberius","Tembo","Dylma"]</json>
    </var>
    <var name="lowmana">250</var>
    <var name="weaponcontainer">void</var>
    <var name="misccontainer"/>
    <var name="wimplevel">962.5</var>
    <var name="quickdraw">0</var>
    <var name="damswaponroom">1</var>
    <var name="acop">
      <value>0</value>
      <default>0</default>
    </var>
    <var name="cosonregen">
      <value>1</value>
      <default>0</default>
    </var>
    <var name="recop">0</var>
    <var name="agheal">0</var>
    <var name="autobuy">0</var>
    <var name="gagprompt">0</var>
    <var name="defaultlowmana">100</var>
    <var name="showlogsongt">1</var>
    <var name="superwhitelist">Danimal|Dreadlock</var>
    <var name="tofathighmana">1</var>
    <var name="iswuss">0</var>
  </class>
  <class name="pulsedetection">
    <trigger priority="1120">
      <pattern>^You {miss|hit|obliterate|annihilate|vaporize|pulverize|atomize|ultraslay|~*~*~*ULTRASLAY~*~*~*} (*) with your %w.</pattern>
      <value>#IF !@attackorwhirl {intrapulse=1}
currenttarget=%1
#IF !@fighting {
  fighting=1
  currenttank=@leader
  #IF (@agglist="" and %numitems(@assistlist)&gt;0 and %ismember(%1, @assistlist)) {agglist=@assistlist;assistlist=""}
  }
assistpending=0
;#say %1, @onhitdamtypes.%1, @currentdam
#IF @spellswaponhit {#IF !%null(@onhitdamtypes.%1) {spellswitch @onhitdamtypes.%1}}</value>
    </trigger>
    <var name="currenttarget">someone</var>
    <var name="intrapulse">0</var>
    <trigger priority="1150">
      <pattern>^(*) {misses|hits|massacres|obliterates|annihilates|vaporizes|pulverizes|atomizes|ultraslays|~*~*~*ULTRASLAYS~*~*~*} (*){ to small fragments|} with {his|her|its}{ deadly|} %w.</pattern>
      <value>#IF !@attackorwhirl {
  intrapulse=1
  #IF @currenttank="" {currenttank=%2}
  }</value>
    </trigger>
    <trigger priority="1180">
      <pattern>^(*) thinks that (*) deserves punishment.</pattern>
      <value>currenttank=%2</value>
    </trigger>
    <trigger priority="1190">
      <pattern>^(*) notices (*)'s retreat and launches a swift attack.</pattern>
      <value>currenttank=%2</value>
    </trigger>
    <trigger priority="1200">
      <pattern>^(*) {dodges|parries} (*)'s attack.</pattern>
      <value>#IF !@attackorwhirl {
  intrapulse=1
}</value>
    </trigger>
    <trigger priority="1210">
      <pattern>^(*) flails around blindly and attacks (*).</pattern>
      <value>currenttank=%2</value>
    </trigger>
    <trigger priority="1220">
      <pattern>^(*) says '(%w), I will get you for trying to {sneak up on|murder} me!'</pattern>
      <value>currenttank=%2</value>
    </trigger>
    <trigger priority="1240" newline="false" prompt="true">
      <pattern>^(%n)~((%n)~)H (%n)~((%n)~)M (%n)~((%n)~)V &gt;</pattern>
      <value>#IF @awaitingpeekinfo=3 {awaitingpeekinfo=0;returnpeek}
#IF @selfeqscan {selfeqscan=0}
#IF @roomscantoprompt&gt;0 {
  roomscantoprompt=0
;  #say roomscanning results
;  #say assistlist: @assistlist
;  #SAY moblist   : @moblist
;  #SAY knownlist : @knownmoblist
;  #say agglist   : @agglist
  roomscandecision
  #IF (@botstatus="On" and @fighting=0) {
    #IF @botskiprooms&gt;0 {botskiprooms=@botskiprooms-1} {botcommand}
  }
  }
#IF @damscantoprompt {damscantoprompt=0;#IF @dsrequested&gt;0 {dspalias}}

currenthp=%1
#IF @fighting=0 {currentmaxhp=%2}
#IF (!%iskey(@affectslist, Critical Wounds) and !%iskey(@affectslist, Blood Rite)) {maxhp=%2}
currentmana=%3
currentmaxmana=%4
currentmoves=%5
currentmaxmoves=%6
pulsedetectionpromptalias
#IF @weaponbagscan=2 {weaponbagscan=0;weaponsmenusetup}
#IF @gagprompt {#gag;#gag}</value>
    </trigger>
    <alias name="pulsedetectionpromptalias">
      <value>attackorwhirl=0
#add combatpulses 1
#IF @intrapulse {
  intrapulse=0
  #IF @waitstate&gt;0 {waitstate=@waitstate-1} {autofightdecision}
  }</value>
    </alias>
    <trigger priority="1340">
      <pattern>^* gulps in surprise as *'s hit slips through his guard...</pattern>
      <value>attackorwhirl=1</value>
    </trigger>
    <var name="attackorwhirl">0</var>
    <trigger priority="1360">
      <pattern>You quickly focus your energy on a blow.</pattern>
      <value>attackorwhirl=1</value>
    </trigger>
    <trigger priority="1370">
      <pattern>You receive %n{ lousy|} experience point{s|}.</pattern>
      <value>;#IF %ismember(%1, @agglist) {agglist=%delitem(%1, @agglist)} {
;  #IF %ismember(%1, @assistlist) {assistlist=%delitem(%1, @assistlist)} {
;    #IF %numitems(@moblist)&gt;0 {moblist=%delnitem(@moblist, 1)}
;    }
;  }
#IF @triedddance {triedddance=0}</value>
    </trigger>
    <trigger priority="1430">
      <pattern>^(*) thinks that YOU deserve punishment.</pattern>
      <value>currenttank=@charname</value>
    </trigger>
    <trigger priority="1680">
      <pattern>^You rush to attack (*)!</pattern>
      <value>currenttarget=%1
fighting=1
#IF (@leading and @roomscantoprompt) {
  #DELNITEM moblist 1
  #additem agglist %1
  currenttank=@charname
}</value>
    </trigger>
    <trigger priority="2050">
      <pattern>^* jumps up high in the air and make a 360 degree spin-kick...</pattern>
      <value>attackorwhirl=1</value>
    </trigger>
    <trigger priority="1120">
      <pattern>^You massacre (*) to small fragments with your %w.</pattern>
      <value>#IF !@attackorwhirl {intrapulse=1}
currenttarget=%1
fighting=1</value>
    </trigger>
    <trigger priority="5800">
      <pattern>You can't see who is fighting (him|her|it}!</pattern>
      <value>assistpending=0</value>
    </trigger>
    <trigger priority="6350">
      <pattern>{Whom do you wish to assist?|No way! You are fighting for your life!}</pattern>
      <value>assistpending=0</value>
    </trigger>
    <var name="currenttank">Istarion</var>
    <trigger priority="12720">
      <pattern>You are rescued by *, you are confused!</pattern>
      <value>fighting=0</value>
    </trigger>
    <trigger priority="12740">
      <pattern>{The Terrorite Demon whips its tail out towards you, striking with great precision.|The manticore swings its tail in a vicious arc before suddenly releasing countless small darts from its tail. The air is thick with sharp projectiles which strike you - OUCH!}</pattern>
      <value>fighting=0</value>
    </trigger>
    <trigger priority="12850">
      <pattern>^(*) rushes to attack YOU!</pattern>
      <value>currenttank=@charname
#IF @leading {
  #DELNITEM moblist 1
; agglist=%additem(%1, @agglist)
}
#IF @fighting=0 {fighting=1}</value>
    </trigger>
    <trigger priority="1410">
      <pattern>^You obliterate (*) with your deadly %w.</pattern>
      <value>#IF !@fighting {
  fighting=1
  currenttank=@leader
  #IF (@agglist="" and %numitems(@assistlist)&gt;0 and %ismember(%1, @assistlist)) {agglist=@assistlist;assistlist=""}
  }</value>
    </trigger>
    <trigger priority="94680">
      <pattern>You retreat from the melee with</pattern>
      <value>fighting=0</value>
    </trigger>
    <trigger priority="1120">
      <pattern>^You hit (*) {very|extremely} hard.</pattern>
      <value>#IF !@attackorwhirl {intrapulse=1}
;currenttarget=%1
fighting=1
assistpending=0</value>
    </trigger>
    <trigger priority="97100">
      <pattern>^You join the fight!</pattern>
      <value>assistpending=0</value>
    </trigger>
    <trigger priority="1360">
      <pattern>You whirl your * over your head and go to attack...</pattern>
      <value>attackorwhirl=1</value>
    </trigger>
    <trigger priority="12720">
      <pattern>^Banzai! To the rescue...</pattern>
      <value>currenttank=@charname</value>
    </trigger>
    <trigger priority="152520">
      <pattern>detects your pathetic {backstab|assassination} attempt and charges!</pattern>
      <value>fighting=1
currenttank=@charname</value>
    </trigger>
    <trigger priority="5690">
      <pattern>Kinda hard right now while it is all over you!</pattern>
      <value>currenttank=@charname
autofightdecision</value>
    </trigger>
    <trigger priority="7840">
      <pattern>^(%n)~((%n)~)H (%n)~((%n)~)M (%n)~((%n)~)V &gt;$</pattern>
      <value>#say Krubba's Prompt detected. Please type 'display' to return prompt to the default.</value>
    </trigger>
  </class>
  <class name="roomscan">
    <trigger priority="6290" ansi="true" trigontrig="false">
      <pattern>^%e[33m(*)%e[0m{ ~(hidden~)| ~(invisible~)| ~(invisible~) ~(hidden~)|} is here, fighting (%w).{ ~(Red Aura~)| ~(White Aura~)|}</pattern>
      <value>#IF @roomscantoprompt {
  #IF @currenttank="" {currenttank=%2}
  moblist = %delitem(%1, @moblist)
  agglist = %additem(%1, @agglist)
  #IF (%1="The water weird" and @ispriest+@isnightblade+@istemplar+@isanimist&gt;0) {retreat;cast 'remove poison' weird}
}</value>
    </trigger>
    <var name="moblist" type="StringList">
      <value>A large white swan flaps it's wings and honks.|The receptionist sits here, ready to help you check into a room.</value>
      <json>["A large white swan flaps it's wings and honks.","The receptionist sits here, ready to help you check into a room."]</json>
    </var>
    <var name="agglist" type="Literal"/>
    <var name="assistlist" type="Literal"/>
    <trigger ansi="true" trigontrig="false" regex="true">
      <pattern>^\033\[33m(.*?)\033\[0m(.*)</pattern>
      <value>#IF @roomscantoprompt {
  #IF %iskey(@assistmobs, %1) {assistlist = %additem(@assistmobs.%1, @assistlist)}
  #IF %iskey(@knownmobs, %1) {knownmoblist = %additem(@knownmobs.%1, @knownmoblist)} {
      moblist = %additem(%1, @moblist)
      }
  #IF %1="A faintly visible, almost transparent mist floats through the air." {nomagic=1}
  }</value>
    </trigger>
    <var name="assistmobs" type="Record">
      <value>A skeleton clad in a dark cloak stands here, hatred glowing in its eye sockets.=An acolyte of Sarakesh|A lesser lich of the Sarakeshian order glares at you with its empty eyes.=An acolyte of Sarakesh|A great soulcrusher stands here.=The Great Soulcrusher|A blurred figure stands here.=The soulcrusher|A mystical soulcrusher=The mystical soulcrusher|The soulcrusher glances at you with fear.=The soulcrusher</value>
      <json>{"A skeleton clad in a dark cloak stands here, hatred glowing in its eye sockets.":"An acolyte of Sarakesh","A lesser lich of the Sarakeshian order glares at you with its empty eyes.":"An acolyte of Sarakesh","A great soulcrusher stands here.":"The Great Soulcrusher","A blurred figure stands here.":"The soulcrusher","A mystical soulcrusher":"The mystical soulcrusher","The soulcrusher glances at you with fear.":"The soulcrusher"}</json>
    </var>
    <trigger priority="96170">
      <pattern>The galeb duhr brings a nearby boulder to life and summons it to his aid.</pattern>
      <value>agglist = %additem("A boulder", @agglist)</value>
    </trigger>
    <var name="knownmoblist" type="Literal"/>
    <var name="knownmobs" type="Record">
      <value>A dragon skeleton stands here with smoke seeping from its nasal cavity.=A skeletal dragon|An elven ranger scouts the surrounding hinterland=An Elven waywatcher|A skeleton clad in a dark cloak stands here, hatred glowing in its eye sockets.=An acolyte of Sarakesh|A drow is here, guarding the hallways.=A drow guard|A minstrel of the argonauts stands here.=uwman|A member of the Trojan Royal House stands here.=A member of the Trojan Royal House|You see the ghost of a long dead woman floating here.=A ghost of a decapitated woman|A lesser lich of the Sarakeshian order glares at you with its empty eyes.=An acolyte of Sarakesh|An angry looking soulcrusher is standing here.=The soulcrusher|A Castle Guard stands here.=The Castle Guard|A mythical being stands here.=Ajax|A wizarne is here studying the arts of magic.=A wizarne|A warrior lies here resting.=A Medjai Warrior|The spirit of a dead sailor haunts the wreckage of his vessel.=A revenant sailor|A mythical man of ancient Greece stands here.=uwman|A deceased mariner haunts the cove here.=A phantom mariner|A large Kronatio cityguard is standing here.=A Guard of Khron|A winged hulking fiend stomps around here.=A malebranche|A wizarn is here studying the arts of magic.=A wizarn|A famed and glorious soldier stands here.=A soldier|The ugly wight of a long-dead seafarer hovers here.=A seafarer's wight|A hungry warg glares at you and licks its fangs.=A hungry warg|a soldier of the gods stands here.=A soldier|A great soulcrusher stands here.=The Great Soulcrusher|A ghostly bilge-rat wails as it approaches you.=A ghostly bilge-rat|The Lord of the Citadel is here looking at his maps.=Lord Ceanyth|An executive officier of the city authority is busy working here.=An Executive Officer|A warrior stands here protecting the gates of the palace.=A Medjai Warrior|The musical son of Orpheus stands here.=Musaeus|The decomposing corpse of a dragon stumbles around here.=A dracolich|A creepy monster stands in front of you.=The monster|A Fallen Knight stands guarding the Chamber of Paladine.=A Fallen Knight|A brave soldier stands here having been rewarded by the gods.=A brave soldier|A lieutenant of the high command oversees proceedings=A lieutenant of the Brettonian High Command|A huge, ancient tree towers above you.=A huge, ancient tree|A powerful witch of the hive is busy creating new incantations.=A witch of the crescent moon|A white ambience surrounds this mutineer.=The dead mutineer|A young initiate of the hive awaits instruction from her superiors here.=An initiate of the crescent moon|The apparition of a shipwrecked buccaneer roams the cove.=A phantasmal buccaneer|A blurred figure stands here.=The soulcrusher|A warrior stands here protecting the palace.=A Medjai Warrior|A warrior stands here overseeing the protection of Egypt.=A Medjai Warrior|A mystical soulcrusher=The mystical soulcrusher|This careless mariner died from alcohol poisoning rather than a shipwreck.=A haunted grog-fiend|An old crone of the hive scrunches her face up at your presence.=A crone of the crescent moon|A very large drow is here, dressed in black and gold armor.=A drow elite guard|A member of the Alterac high command opposes you=A captain of the Brettonian High Command|A huge warg stands before you, saliva dripping from its huge fangs.=A bloodthirsty warg|A warrior stands here looking at antiquity.=A Medjai Warrior|An elderly black wyrm, nearing death, staggers around here.=A Doomed Black Wyrm|A winged sinewy demon glides over the rooftops.=A greater nabassu|The soulcrusher glances at you with fear.=The soulcrusher|A drow warrior is here, training.=A drow warrior|A drow guard is here, sleeping in his bed.=A drow guard|A drow guard is here, playing cards.=A drow guard|A cabinet member is here debating important issues.=A Cabinet Member|A Whitebridge Councillor is here in discussion.=A Whitebridge Councillor|A great skeleton clad in full platemail raises his sword as you enter.=A Templar of Sarakesh|A black warg glances at you, apparently too tired to attempt to eat you.=A sleepy warg</value>
      <json>{"A dragon skeleton stands here with smoke seeping from its nasal cavity.":"A skeletal dragon","An elven ranger scouts the surrounding hinterland":"An Elven waywatcher","A skeleton clad in a dark cloak stands here, hatred glowing in its eye sockets.":"An acolyte of Sarakesh","A drow is here, guarding the hallways.":"A drow guard","A minstrel of the argonauts stands here.":"uwman","A member of the Trojan Royal House stands here.":"A member of the Trojan Royal House","You see the ghost of a long dead woman floating here.":"A ghost of a decapitated woman","A lesser lich of the Sarakeshian order glares at you with its empty eyes.":"An acolyte of Sarakesh","An angry looking soulcrusher is standing here.":"The soulcrusher","A Castle Guard stands here.":"The Castle Guard","A mythical being stands here.":"Ajax","A wizarne is here studying the arts of magic.":"A wizarne","A warrior lies here resting.":"A Medjai Warrior","The spirit of a dead sailor haunts the wreckage of his vessel.":"A revenant sailor","A mythical man of ancient Greece stands here.":"uwman","A deceased mariner haunts the cove here.":"A phantom mariner","A large Kronatio cityguard is standing here.":"A Guard of Khron","A winged hulking fiend stomps around here.":"A malebranche","A wizarn is here studying the arts of magic.":"A wizarn","A famed and glorious soldier stands here.":"A soldier","The ugly wight of a long-dead seafarer hovers here.":"A seafarer's wight","A hungry warg glares at you and licks its fangs.":"A hungry warg","a soldier of the gods stands here.":"A soldier","A great soulcrusher stands here.":"The Great Soulcrusher","A ghostly bilge-rat wails as it approaches you.":"A ghostly bilge-rat","The Lord of the Citadel is here looking at his maps.":"Lord Ceanyth","An executive officier of the city authority is busy working here.":"An Executive Officer","A warrior stands here protecting the gates of the palace.":"A Medjai Warrior","The musical son of Orpheus stands here.":"Musaeus","The decomposing corpse of a dragon stumbles around here.":"A dracolich","A creepy monster stands in front of you.":"The monster","A Fallen Knight stands guarding the Chamber of Paladine.":"A Fallen Knight","A brave soldier stands here having been rewarded by the gods.":"A brave soldier","A lieutenant of the high command oversees proceedings":"A lieutenant of the Brettonian High Command","A huge, ancient tree towers above you.":"A huge, ancient tree","A powerful witch of the hive is busy creating new incantations.":"A witch of the crescent moon","A white ambience surrounds this mutineer.":"The dead mutineer","A young initiate of the hive awaits instruction from her superiors here.":"An initiate of the crescent moon","The apparition of a shipwrecked buccaneer roams the cove.":"A phantasmal buccaneer","A blurred figure stands here.":"The soulcrusher","A warrior stands here protecting the palace.":"A Medjai Warrior","A warrior stands here overseeing the protection of Egypt.":"A Medjai Warrior","A mystical soulcrusher":"The mystical soulcrusher","This careless mariner died from alcohol poisoning rather than a shipwreck.":"A haunted grog-fiend","An old crone of the hive scrunches her face up at your presence.":"A crone of the crescent moon","A very large drow is here, dressed in black and gold armor.":"A drow elite guard","A member of the Alterac high command opposes you":"A captain of the Brettonian High Command","A huge warg stands before you, saliva dripping from its huge fangs.":"A bloodthirsty warg","A warrior stands here looking at antiquity.":"A Medjai Warrior","An elderly black wyrm, nearing death, staggers around here.":"A Doomed Black Wyrm","A winged sinewy demon glides over the rooftops.":"A greater nabassu","The soulcrusher glances at you with fear.":"The soulcrusher","A drow warrior is here, training.":"A drow warrior","A drow guard is here, sleeping in his bed.":"A drow guard","A drow guard is here, playing cards.":"A drow guard","A cabinet member is here debating important issues.":"A Cabinet Member","A Whitebridge Councillor is here in discussion.":"A Whitebridge Councillor","A great skeleton clad in full platemail raises his sword as you enter.":"A Templar of Sarakesh","A black warg glances at you, apparently too tired to attempt to eat you.":"A sleepy warg"}</json>
    </var>
    <trigger priority="1380">
      <pattern>^(*) is dead! R.I.P.</pattern>
      <value>#IF %ismember(%1, @agglist) {
  agglist=%delitem(%1, @agglist)
  #IF %ismember(%1, @knownmoblist) {knownmoblist=%delitem(%1, @knownmoblist)}
  } {
#IF %ismember(%1, @assistlist) {assistlist=%delitem(%1, @assistlist)}
#IF %ismember(%1, @knownmoblist) {knownmoblist=%delitem(%1, @knownmoblist)} {
  #IF %numitems(@moblist)&gt;0 {moblist=%delnitem(@moblist, 1)} {}
  }
}
#IF %1=@currenttarget {fighting=0}
#say agglist : @agglist, assistlist : @assistlist
#IF @intrapulse {
  #ADD combatpulses 1
  }
intrapulse=0
waitstate=0
#IF (@loot and !%ismember(%1, @grouplist)) {get all corpse}
;#say @agglist
#IF (@agglist="") {
  #IF @butcher {
    #IF @solobutcher { group self }
    butch @butchnumber
    #if @solobutcher { group self }
    }
  #IF (@ispriest=2 and @agheal) {remgroupblind}
  #IF @needtorecop {#IF @commandpending {#alarm +5 {recopexecute}} {recopexecute}}
  #IF (@windcoming and !@waterroom) {rest}
  respell
  } {
  autofightdecision
  #IF @butcher {butchnumber=@butchnumber+1}
  }
;#say knownmobs: @knownmoblist, agglist: @agglist, moblist: @moblist
#IF @cheating {group all;glanceval=100}
#IF (@botstatus="On" and @roomscantoprompt=0) {#IF %1="A Doomed Black Wyrm" {#alarm +1 {botcommand}} {botcommand} {}}</value>
    </trigger>
    <var name="onewordmobs" type="Record">
      <value>An Executive Officer=exec|An acolyte of Sarakesh=acoly|An initiate of the crescent moon=init|An Elven waywatcher=way|A dracolich=dracol|A bloodthirsty warg=bloodth|A wizarne is here studying the arts of magic.=wizarne|A ghost of a decapitated woman=woman|A phantom mariner=mariner|A witch of the crescent moon=witch|The dead mutineer=mutineer|A wizarn is here studying the arts of magic.=wizarn|A seafarer's wight=wight|A soldier=sold|A member of the Trojan Royal House=memb|A Whitebridge Councillor=counci|A drow elite guard=elite|A drow guard=drow|A drow warrior=warrior|A captain of the Brettonian High Command=mem|The Great Soulcrusher=great|A huge, ancient tree=ancient|A skeletal dragon=skeletal|A Templar of Sarakesh=templar|A haunted grog-fiend=grog|A wizarne=wizarne|A crone of the crescent moon=crone|A wizarn=wizarn|Musaeus=musaeus|A revenant sailor=sailor|A Medjai Warrior=medjai|A malebranche=malebranche|A Guard of Khron=guard|A ghostly bilge-rat=bilge|A Fallen Knight=knight|A brave soldier=sold|The monster=monster|A hungry warg=hungry|A mystical soulcrusher=mystica|uwman=man|The Castle Guard=gua|A phantasmal buccaneer=buccaneer|A Cabinet Member=mem|A Doomed Black Wyrm=wyrm|Ajax=ajax|A greater nabassu=nabassu|A sleepy warg=sleepy|The soulcrusher=soulc|Lord Ceanyth=lord|A lieutenant of the Brettonian High Command=lieu</value>
      <json>{"An Executive Officer":"exec","An acolyte of Sarakesh":"acoly","An initiate of the crescent moon":"init","An Elven waywatcher":"way","A dracolich":"dracol","A bloodthirsty warg":"bloodth","A wizarne is here studying the arts of magic.":"wizarne","A ghost of a decapitated woman":"woman","A phantom mariner":"mariner","A witch of the crescent moon":"witch","The dead mutineer":"mutineer","A wizarn is here studying the arts of magic.":"wizarn","A seafarer's wight":"wight","A soldier":"sold","A member of the Trojan Royal House":"memb","A Whitebridge Councillor":"counci","A drow elite guard":"elite","A drow guard":"drow","A drow warrior":"warrior","A captain of the Brettonian High Command":"mem","The Great Soulcrusher":"great","A huge, ancient tree":"ancient","A skeletal dragon":"skeletal","A Templar of Sarakesh":"templar","A haunted grog-fiend":"grog","A wizarne":"wizarne","A crone of the crescent moon":"crone","A wizarn":"wizarn","Musaeus":"musaeus","A revenant sailor":"sailor","A Medjai Warrior":"medjai","A malebranche":"malebranche","A Guard of Khron":"guard","A ghostly bilge-rat":"bilge","A Fallen Knight":"knight","A brave soldier":"sold","The monster":"monster","A hungry warg":"hungry","A mystical soulcrusher":"mystica","uwman":"man","The Castle Guard":"gua","A phantasmal buccaneer":"buccaneer","A Cabinet Member":"mem","A Doomed Black Wyrm":"wyrm","Ajax":"ajax","A greater nabassu":"nabassu","A sleepy warg":"sleepy","The soulcrusher":"soulc","Lord Ceanyth":"lord","A lieutenant of the Brettonian High Command":"lieu"}</json>
    </var>
    <trigger name="The slain wyrm hits the ground with a tremendous THUD and blood" priority="96790">
      <pattern>The slain wyrm hits the ground with a tremendous THUD and blood seeps from the corpse.</pattern>
      <value>agglist = %additem("A Zombie Wyrm", @agglist)</value>
    </trigger>
    <trigger priority="97020">
      <pattern>^(*) rushes to attack (%w)!</pattern>
      <value>agglist = %additem(%1, @agglist)</value>
    </trigger>
    <trigger priority="109040">
      <pattern>^(*) says 'Hey! You're not supposed to be here!'</pattern>
      <value>agglist = %additem(%1, @agglist)</value>
    </trigger>
    <trigger priority="169040">
      <pattern>You feel a hot dry wind blow dust into your face, as you blink to clear your vision you see</pattern>
      <value>agglist = %additem("A huge tumbleweed", @agglist)</value>
    </trigger>
  </class>
  <class name="speedies">
    <path name="narnia">2nen2en3en2en2es2es2en3enwnw3nw6ne2ne2ne2nw3n</path>
    <path name="medjai">2nen2en3en2en2es2es2en3enwnw3nw6ne2ne2ne2nenwnnnennn</path>
    <path name="drow">2nen2en3enw3ws2w2n3w2s2ws</path>
    <path name="apoc">5s2es2enen2enen2ene2nene2n2e2n3en3ese</path>
    <path name="obliv">5s2es2enen2enen2enen7w5n3e3n3e</path>
    <path name="clerist">5s2es2e3sen</path>
    <path name="woods">2nen2en3en2en2es2es2en3enwnw3ne</path>
    <path name="nc">3wnwne2nw2nwne2nwn3en2es2enen5e</path>
    <path name="amphi">wwwnwnennwnnwnennwnnnwnnnnwnnnwwww</path>
    <path name="oceanfloor">us4dese2se2nwnw3nwn4e2n2es2e2swss2e</path>
    <path name="taon">2en2e2n2wn2wn3wnwn4w2s7e7n6w6s2u3e4n4w3u3e2n3u</path>
    <path name="lorchid">2nen2en3en2en2es2es2en3enwnw3nw6ne2ne2ne2ne2ne2ne2ne2ne2ne4n</path>
    <path name="alterac">2nen2en3en2en2es2es2en3enwnw3nw6ne2ne2ne2ne2ne2n4ese</path>
    <path name="threemages">13w3sw2s3wn</path>
    <alias name="fount">
      <value>.13w3sw2s3wn
.10n3w4ne
open door e
e
open door n
.nes
open door s
s
tell syden summon
drink fount</value>
    </alias>
    <path name="dwashield">swwwwwwwwneuuuuueedenesdwwnwwwswnwsswwsssseeswnw</path>
    <path name="varakring">.5s10e8n3wne4nd2w2nunw</path>
    <path name="sarakesh">3wnwne2nw2nwne2nwn3en2es2enen5e</path>
    <path name="dragontail">3wnwne2nw2nwne2nwn3en2es2enen5e</path>
    <path name="udshop">.5s14enend3n2wendws2esenwwnenwnneessedswwswneseene3s2ed2wsess</path>
    <path name="wyrmtonc">2wd2n7es6enen2ene5nwne3ne2ne</path>
    <path name="cove">n3endn5eue2sd3ene2nen3eneds</path>
    <path name="graven">12s3e2nene2nennen2e3ne2n</path>
  </class>
  <class name="spellbot">
    <trigger priority="6150">
      <pattern>^(%w) asks you '(%w)'</pattern>
      <value>spellbotlogic %1 %2</value>
    </trigger>
    <trigger priority="6150">
      <pattern>^(%w) asks you '(%w) (%w)'</pattern>
      <value>spellbotlogic %1 %2 %3</value>
    </trigger>
    <trigger priority="6150">
      <pattern>^(%w) asks you '(%w) (%n).(%w)'</pattern>
      <value>spellbotlogic %1 %2 %4 %3</value>
    </trigger>
    <alias name="spellbotlogic">
      <value><![CDATA[;%1 is asker
;%2 is spell asked for
;%3 is target, if given
;%4 is number, if given
spellbottarget=%1
#IF !%null(%3) {spellbottarget=%3}
#IF !%null(%4) {spellbottarget=%4.%3}
#IF (@fighting and %1=@leader and !%ismember(%2, heal|true|pow|mira|gpow|gheal|burst|holy|cc)) {retreat}
;#IF (@fighting and %1!=@leader) {tell %1 Sorry, Fighting. IntraFight spellbot is available only to my leader.}
#IF (%2="cos" and @isanimist=2) {cast 'circle of stone'}
#IF (%2="cop" and @ismagician>0) {cast 'circle of protection'}
#IF (%2="cp" and %1=@leader and !%null(%3)) {cast 'celestial peace' @spellbottarget}
#IF (%2="arm" and @ismagician+@iswarlock+@isnightblade+@istemplar+@isanimist+@ispriest>0 and @fighting=0) {cast 'armor' @spellbottarget}
#IF (%2="regen" and @ispriest>0 and @fighting=0) {cast 'regenerate' @spellbottarget}
#IF (%2="true" and @ispriest=2) {cast 'trueheal' @spellbottarget}
#IF (%2="pow" and @ispriest>0) {cast 'powerheal' @spellbottarget}
#IF (%2="heal" and @isanimist+@istemplar+@ispriest>0 and @fighting=0) {cast 'heal' @spellbottarget}
#IF (%2="cb" and @ispriest>0 and @fighting=0) {cast 'cure blind' @spellbottarget}
#IF (%2="cc" and @isanimist+@istemplar+@ispriest>0 and @fighting=0) {cast 'cure critic' @spellbottarget}
#IF (%2="invis" and @ismagician+@iswarlock>0 and @fighting=0) {cast 'invisibility' @spellbottarget}
#IF (%2="gfly" and @ismagician=2) {cast 'magic carpet'}
#IF (%2="ginvis" and @ismagician=2 and %1=@leader) {cast 'group invisibility'}
#IF (%2="str" and @ismagician+@iswarlock+@istemplar>0 and @fighting=0) {cast 'strength' @spellbottarget}
#IF (%2="sanc" and @ispriest+@istemplar>0 and @fighting=0) {cast 'sanctuary' @spellbottarget}
#IF (%2="bless" and @ispriest+@istemplar>0 and @fighting=0) {cast 'bless' @spellbottarget}
#IF (%2="burst" and @isanimist=2) {cast 'burst of life' @spellbottarget}
#IF (%2="mira" and (@istemplar=2 or @ispriest=2)) {cast 'miracle' @spellbottarget}
#IF (%2="rc" and @ispriest+@istemplar>0 and @fighting=0) {cast 'remove curse' @spellbottarget}
#IF (%2="rp" and @ispriest+@istemplar+@isanimist+@isnightblade>0 and @fighting=0) {cast 'remove poison' @spellbottarget}
#IF (%2="gheal" and @ispriest=2) {cast 'groupheal'}
#IF (%2="gpow" and @ispriest=2) {cast 'grouppowerheal'}
#IF (%2="gbless" and @ispriest=2) {cast 'group bless'}
#IF (%2="holy" and @ispriest>0) {cast 'holyword'}
#IF (%2="serenity" and @isanimist=2 and @charlevel>54) {cast 'serenity'}
#IF (%2="sat" and @isanimist>0) {cast 'satiate' @spellbottarget}
#IF (%2="tranq" and @isanimist=2) {cast 'tranquility'}
#IF (%2="garm" and @ispriest=2) {cast 'group armor'}
#IF (%2="fly" and @ismagician>0 and @fighting=0) {cast 'fly' @spellbottarget}
#IF (%2="revit" and @ispriest>0 and @fighting=0) {cast 'revitalize' @spellbottarget}
#IF (%2="report") {report}
;#IF @spellbotsent=0 {#IF @fighting {t %1 Sorry, Fighting} {t %1 Sorry, probably can't cast that spell, or my script sucks.}]]></value>
    </alias>
    <var name="spellbottarget">Neaga</var>
  </class>
  <class name="tells">
    <trigger priority="10">
      <pattern>^~(tell~)</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="1">
      <pattern>^(%w) tells you '(*)'</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="10">
      <pattern>^%w gossips, '</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="10">
      <pattern>^~(group~)</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="10">
      <pattern>^You tell</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="10">
      <pattern>^You gossip, '</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="10">
      <pattern>^%w tells the group, '</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="10" case="true">
      <pattern>^You are dead</pattern>
      <value>#beep
#GAG
#show %time( hh:mm:ss) @charname died. Leader was: @leader
#CAP tell
1
#IF @autobuy {.ssswwwnnn;buy corpse}</value>
    </trigger>
    <trigger priority="10">
      <pattern>^%w tells the Clearly Outplayed,</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="10">
      <pattern>^~(gossip~)</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="84290">
      <pattern>^~[Clearly Outplayed~]</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="10">
      <pattern>^AUCTION~[</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="96230">
      <pattern>^~[QUEST~]</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="96240">
      <pattern>^~&lt;QUEST:</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="96230">
      <pattern>^~[INFO~]</pattern>
      <value>#CAP tell</value>
    </trigger>
    <trigger priority="10">
      <pattern>^AUCTION: </pattern>
      <value>#CAP tell</value>
    </trigger>
  </class>
  <class name="well">
    <var name="lastgroupdir">north</var>
    <trigger priority="3310">
      <pattern>A stalactite dislodges from the ceiling and plummets to the ground, narrowly$missing you. You fall over backwards from the shock.</pattern>
      <value>stand
stalagditch=@stalagditch+1
#T+ stalag
#alarm +1 {@lastgroupdir
  #IF @stalagditch&gt;1 {follow @leader}
  #T- stalag
  }
#alarm +5 {stalagditch=0}</value>
    </trigger>
    <class name="stalag" enabled="false">
      <trigger priority="75020">
        <pattern>@leader's group leaves (%w).</pattern>
        <value>stalagditch=@stalagditch+1</value>
      </trigger>
    </class>
    <var name="stalagditch">0</var>
    <trigger priority="3280">
      <pattern>@leader's group leaves (%w).</pattern>
      <value>#VAR lastgroupdir %1</value>
    </trigger>
    <trigger name="You are unable to react in time, and tumble through the hole in" priority="4260">
      <pattern>You are unable to react in time, and tumble through the hole in the floor.</pattern>
      <value>cop</value>
    </trigger>
    <trigger name="You feel a slight movement in the air, and you can hear a storm" priority="3240">
      <pattern>You feel a slight movement in the air, and you can hear a storm brewing afar.</pattern>
      <value>#IF @waterroom {} {rest}
windcoming=1</value>
    </trigger>
    <trigger priority="60100">
      <pattern>You slip over on the ice and head careening out of control towards a nearby$</pattern>
      <value>summonedsinceslip=0
stand
#ALARM +5 {#IF (!@summonedsinceslip and !@leading) {@lastgroupdir}}</value>
    </trigger>
    <trigger priority="3620">
      <pattern>Your feet lose their purchase on the smooth ice, and you slide on your behind$uncontrollably to the (%w).</pattern>
      <value>slipdir=%1
summonedsinceslip=0
ahealslipped=@aheal
afightslipped=@afight
aheal=0
afight=0
#alarm +5 {
  #if (@fighting and !@leading) {wimpout} {
    stand
    #IF !@summonedsinceslip {
    #IF @slipdir=@lastgroupdir {} {#IF !@leading {%reversedir(@slipdir);@lastgroupdir}}
    }
    }
  aheal=@ahealslipped
  afight=@afightslipped
    }</value>
    </trigger>
    <var name="windcoming">0</var>
    <trigger priority="3300">
      <pattern>$A raging tempest races through the room, leaving devastation in its wake.</pattern>
      <value>#IF @groupposition="standing" {stand}
windcoming=0</value>
    </trigger>
    <trigger priority="2810">
      <pattern>You have a strange desire to leave this place.</pattern>
      <value>%reversedir(%item(@exits,1))</value>
    </trigger>
    <trigger priority="2820">
      <pattern>Fearing for your life you panic and flee!</pattern>
      <value>balrogexits=@exits
#alarm +1 {}</value>
    </trigger>
    <var name="balrogexits">North|South|Up|Down</var>
    <trigger priority="2860">
      <pattern>%w has summoned you!</pattern>
      <value>summonedsinceslip=1</value>
    </trigger>
    <var name="summonedsinceslip">1</var>
    <var name="ahealslipped">1</var>
    <var name="afightslipped">0</var>
    <var name="slipdir">west</var>
    <alias name="butch">
      <value>#IF %null(%1) {butcher corpse;butcher 2.corpse;butcher 3.corpse} {#loop 1,%1 {butcher %{i}.corpse}}</value>
    </alias>
    <var name="bcorpsecount">0</var>
    <trigger priority="104610">
      <pattern>As you try to move, you lose your grip on the slippery ice and end up on your$behind!</pattern>
      <value>summonedsinceslip=0
stand
#ALARM +5 {#IF (!@summonedsinceslip and !@leading) {@lastgroupdir}}</value>
    </trigger>
    <trigger priority="105910">
      <pattern>(%w) is too slow to react, and falls through it.</pattern>
      <value>;dd %1</value>
    </trigger>
    <var name="butch">0</var>
    <class name="subs">
      <var name="sublist" type="Record" sorted="1">
        <value>A bull-like creature with thick metal scales stands here="%ansi(brown)AGG Gorgon | vuln unlife, stuns"|A crimson mist floats through the caverns, looking for blood.="%ansi(brown)AGG Vampiric mist | vuln energy"|A dark black cloak lies here, neatly folded.="%ansi(brown)AGG Cloaker | vuln unlife, impersonate"|A Djinni Vizier is here to end your sad life.="%ansi(brown)AGG Djinni vizier | vuln earth, teleports"|A faintly visible, almost transparent mist floats through the air.="%ansi(brown)Essence mist | NO MAGIC"|A fearsome Balrog is here.="%ansi(brown)AGG Balrog | vuln slay mythical, force flees"|A flat, wet stone lies across the middle of the cavern.="%ansi(brown)Grey ooze | VAPS BOOTS!"|A great Thonis demon is standing here contemplating your fate.="%ansi(brown)Thonis demon | vuln pure/light"|A hideous beast with long tentacles slithers around here, looking for food.="%ansi(brown)Roper | vuln unlife, strength sap"|A hideous creature spots you and rushes to attack!="%ansi(brown)AGG Thessalmera | vuln unlife"|A hideous creature stands here, looking intently at you.="%ansi(brown)AGG Otyugh | vuln unlife, grapple"|A hideous wormlike creature is crawling here.="%ansi(brown)Horgar | vuln fire, VAPS WEAPON"|A hideous, shambling creature sees you and rushes to attack! (hidden)="%ansi(brown)AGG Neo otyugh | use unlife, grapple"|A huge beast with 8 heads stands here, breathing fire.="%ansi(brown)AGG Pyrohydra | vuln ice"|A huge dragon breathes fire at you as you arrive.="%ansi(brown)Doppleganger | vuln unlife"|A huge floating brain with a beak and tentacles floats towards you.="%ansi(brown)AGG Grell | vuln unlife, grapple"|A huge skeletal bat is prowling here.="%ansi(brown)AGG Varrangoin | vuln pure/light"|A huge, ugly creature stands before you, grunting.="%ansi(brown)AGG Thessalgorgon | vuln unlife"|A human with jet-black skin stands here.="%ansi(brown)Storm demon | vuln pure/light"|A large boulder sits here conspicuously.="%ansi(brown)AGG Galeb duhr | vuln ice, immune electricity, summons boulders"|A large fleshy web is stretched out across the cavern here.="%ansi(brown)AGG Memory web | vuln energy"|A large humanoid creature made of rock stands here.="%ansi(brown)AGG Earth elemental | vuln air"|A large humanoid surrounded by wisps of ether stands here boldly.="%ansi(brown)AGG Djinni malik | vuln earth, teleports, blinds"|A large reptilian bird flies at you!="%ansi(brown)AGG Darkenbeast | vuln unlife"|A large reptilian creature shuffles around here.="%ansi(brown)AGG Basilisk | vuln fire/ice, petrify"|A large round eye creature floats here.="%ansi(brown)AGG Beholder | vuln light "|A large snail, with sharp-spiked protrusions from its head slithers around.="%ansi(brown)Flail snail | vuln mental/gas"|A large toad with grayish skin mottled with blue sits here="%ansi(brown)AGG Ice toad | use fire"|A large tornado swirls here, threatening to carry you away.="%ansi(brown)AGG Air elemental | vuln earth"|A large violet-streaked mushroom grows here.="%ansi(brown)Violet fungus | vuln acid"|A large weasel-like creature is here, preparing to attack.="%ansi(brown)Giant wolverine | vuln mental/gas"|A large web is spread out across the cavern here, quivering slightly.="%ansi(brown)Living web | nofight"|A large, blue-skinned humanoid hovers in the water here.="%ansi(brown)AGG Marid mufti | vuln fire"|A large, flaming humanoid is standing here.="%ansi(brown)Efreeti bey | vuln ice"|A large, flaming humanoid stands here, grinning widely as he notices you.="%ansi(brown)Efreeti emir | vuln ice"|A large, gray wolf sits here, watching you carefully.="%ansi(brown)AGG Mist wolf | vuln mental"|A large, hulking creature sees you and charges!="%ansi(brown)AGG Umber hulk | vuln pure/light/fire, flees"|A large, imposing creature with a spiked tail is here.="%ansi(brown)AGG Manticore | use unlife"|A large, imposing humanoid stands here, surrounded by flames.="%ansi(brown)Efreeti Malik | vuln ice"|A large, old white dragon scowls at you as you enter, then attacks!="%ansi(brown)AGG Ancient white dragon | vuln fire"|A large, red toad covered in purple warts leaps at you!="%ansi(brown)AGG Fire toad | vuln ice"|A large, round ball of fungus rolls around here.="%ansi(brown)Ascomoid | vuln pierce/acid"|A large, round creature with thin stalks protruding from its body is here.="%ansi(brown)Gas spore | vuln acid, sickness"|A light-blue colored dragon of immense size rests here, waiting for a meal.="%ansi(brown)AGG Frost dragon | vuln fire"|A Lord Eraditor charges towards you with an evil laugh.="%ansi(brown)AGG Lord eraditor | vuln pure/light"|A Major Eraditor displays a vicious grin as it goes to attack="%ansi(brown)AGG Major eraditor | vuln pure/light"|A medium-sized gargoyle-like creature stands here, grinning at you.="%ansi(brown)AGG Berbelang | vuln unlife"|A muscular humanoid shadow glides towards you.="%ansi(brown)Shadow demon | vuln pure/light/fire"|A patch of brown fungus grows in the cavern here.="%ansi(brown)AGG Brown mold | vuln acid, immune non-ice spells"|A regal humanoid formed from solid rock eyes you contemptuously.="%ansi(brown)AGG Dao hetman | vuln air"|A regal-looking humanoid dressed in the robes of a prince stands here.="%ansi(brown)AGG Efreeti pasha | vuln ice"|A repulsive sphere-shaped eye floats here.="%ansi(brown)AGG Gauth | use light, flees to first direction"|A serpent rises out of the water, grasping at you!="%ansi(brown)AGG Water weird | remove poison"|A shadowy form drifts around here.="%ansi(brown)AGG Soul beckoner | vuln energy/light, resist weapon"|A shaggy ape-like humanoid is resting here.=%ansi(brown)Taer|A skeletal bat of immense size swoops down at you!="%ansi(brown)AGG Varrangoin | vuln pure/light"|A skeletal dog stands here, breathing fire.="%ansi(brown)AGG Hell hound | vuln unlife"|A small, reptile-like bird is here gawking at you.="%ansi(brown)AGG Strider | vuln air"|A snake with a human head slithers around here, looking for a meal.="%ansi(brown)AGG Greater medusa | vuln unlife, stuns"|A strange creature is wandering the caverns here.="%ansi(brown)AGG Thessaltrice | vuln unlife, stuns"|A strange creature with three legs and three arms waddles towards you.="%ansi(brown)AGG Xorn | vuln slay elemental, steals gold to heal"|A strange milky-white algae grows on the surface of the water="%ansi(brown)Phycomid | vuln acid, parasite"|A strange presence pervades the water here. (invisible)="%ansi(brown)AGG Water elemental | vuln fire"|A strange warped creature with eight snake heads stands here="%ansi(brown)AGG thessalhydra | use unlife"|A strangely-deformed dragon-like reptile is prowling here.="%ansi(brown)AGG Dracolisk | vuln fire/ice"|A tall humanoid with a tentacled mouth looks at you and charges!="%ansi(brown)AGG Mind flayer | forces spells from non-fighting players"|A tall humanoid with purplish skin and a tentacled mouth stands here.="%ansi(brown)AGG Elder mind flayer | forces spells from non-fighting players"|A tall, imposing humanoid hovers in the water here, scowling at you="%ansi(brown)AGG Marid padishah | vuln fire"|A tall, imposing humanoid stands here, looking down upon you with scorn.="%ansi(brown)AGG Efreeti sultan | vuln ice"|A tall, imposing humanoid stands here, with hate in its eyes="%ansi(brown)AGG Dao khan | vuln air"|A tall, imposing humanoid within a storm, looks down on you with disdain.="%ansi(brown)Djinni Caliph | vuln earth"|A tall, light-blue skinned humanoid hovers in the water here.="%ansi(brown)Marid beglerbeg | vuln fire"|A tall, regal humanoid with deep blue skin hovers in the water here.="%ansi(brown)Marid Atabeg | vuln fire"|A tall, skeletal creature looks at you with glowing red eyes.="%ansi(brown)Thassaloss | no vuln"|A terrorite demon looks down at you with an amused smile.="%ansi(brown)AGG Terrorite demon | vuln pure/light, stuns, DoT"|A thin layer of snow covers the ground here.="%ansi(brown)AGG White pudding | vuln fire, VAPS SHIELD!"|A three headed eraditor stands here getting ready for battle.="%ansi(brown)AGG Eraditor | vuln pure/light"|A two-headed lesser eraditor stands here displaying an evil grin.="%ansi(brown)Lesser eraditor | vuln pure/light"|A vaguely humanoid form made of ice rushes to attack you!="%ansi(brown)AGG Ice elemental | vuln fire"|A vaguely humanoid shape formed from fire stands here.="%ansi(brown)AGG Fire elemental | vuln ice"|A very large white wolf stands here, growling at you="%ansi(brown)AGG Winter wolf | vuln mental"|A winged hairless sword demon glares at you.="%ansi(brown)AGG Sword demon | vuln pure/light"|An immense purple worm bursts from the floor as you approach!="%ansi(brown)AGG Purple worm | vuln unlife"|An imposing humanoid with turquoise skin hovers in the water here.="%ansi(brown)AGG Marid shah | vuln fire"|An ugly snake with a human head slithers around here, hissing at you.=%ansi(brown)AGG Spirit naga|Gond the Wonderbringer is here, examining a small gem through an eyepiece="%ansi(brown)Gond | shop, memory, rep"|Morgoth the Valar God is standing in front of, yes - YOU!="%ansi(brown)AGG Morgoth | vuln slay mythical, force flees, teleports"|Something floats in the water here.=%ansi(brown)Crystal Ooze|The sand here shifts slightly. (invisible) (hidden)="%ansi(brown)AGG Sandling | vuln unlife"|There is a shadow of a dragon on the wall.="%ansi(brown)Shadow dragon | vuln slay dragon, area blindness"|What looks like a boulder is stomping around here="%ansi(brown)Boulder | vuln fire, high AC"|You see a beautiful feminine body in the shadows.="%ansi(brown)AGG Medusa | vuln unlife, stuns"|You sense something nearby.="%ansi(brown)AGG Tentamort | vuln unlife, FATAL INJECT"</value>
        <json>{"A bull-like creature with thick metal scales stands here":"%ansi(brown)AGG Gorgon | vuln unlife, stuns","A crimson mist floats through the caverns, looking for blood.":"%ansi(brown)AGG Vampiric mist | vuln energy","A dark black cloak lies here, neatly folded.":"%ansi(brown)AGG Cloaker | vuln unlife, impersonate","A Djinni Vizier is here to end your sad life.":"%ansi(brown)AGG Djinni vizier | vuln earth, teleports","A faintly visible, almost transparent mist floats through the air.":"%ansi(brown)Essence mist | NO MAGIC","A fearsome Balrog is here.":"%ansi(brown)AGG Balrog | vuln slay mythical, force flees","A flat, wet stone lies across the middle of the cavern.":"%ansi(brown)Grey ooze | VAPS BOOTS!","A great Thonis demon is standing here contemplating your fate.":"%ansi(brown)Thonis demon | vuln pure\/light","A hideous beast with long tentacles slithers around here, looking for food.":"%ansi(brown)Roper | vuln unlife, strength sap","A hideous creature spots you and rushes to attack!":"%ansi(brown)AGG Thessalmera | vuln unlife","A hideous creature stands here, looking intently at you.":"%ansi(brown)AGG Otyugh | vuln unlife, grapple","A hideous wormlike creature is crawling here.":"%ansi(brown)Horgar | vuln fire, VAPS WEAPON","A hideous, shambling creature sees you and rushes to attack! (hidden)":"%ansi(brown)AGG Neo otyugh | use unlife, grapple","A huge beast with 8 heads stands here, breathing fire.":"%ansi(brown)AGG Pyrohydra | vuln ice","A huge dragon breathes fire at you as you arrive.":"%ansi(brown)Doppleganger | vuln unlife","A huge floating brain with a beak and tentacles floats towards you.":"%ansi(brown)AGG Grell | vuln unlife, grapple","A huge skeletal bat is prowling here.":"%ansi(brown)AGG Varrangoin | vuln pure\/light","A huge, ugly creature stands before you, grunting.":"%ansi(brown)AGG Thessalgorgon | vuln unlife","A human with jet-black skin stands here.":"%ansi(brown)Storm demon | vuln pure\/light","A large boulder sits here conspicuously.":"%ansi(brown)AGG Galeb duhr | vuln ice, immune electricity, summons boulders","A large fleshy web is stretched out across the cavern here.":"%ansi(brown)AGG Memory web | vuln energy","A large humanoid creature made of rock stands here.":"%ansi(brown)AGG Earth elemental | vuln air","A large humanoid surrounded by wisps of ether stands here boldly.":"%ansi(brown)AGG Djinni malik | vuln earth, teleports, blinds","A large reptilian bird flies at you!":"%ansi(brown)AGG Darkenbeast | vuln unlife","A large reptilian creature shuffles around here.":"%ansi(brown)AGG Basilisk | vuln fire\/ice, petrify","A large round eye creature floats here.":"%ansi(brown)AGG Beholder | vuln light ","A large snail, with sharp-spiked protrusions from its head slithers around.":"%ansi(brown)Flail snail | vuln mental\/gas","A large toad with grayish skin mottled with blue sits here":"%ansi(brown)AGG Ice toad | use fire","A large tornado swirls here, threatening to carry you away.":"%ansi(brown)AGG Air elemental | vuln earth","A large violet-streaked mushroom grows here.":"%ansi(brown)Violet fungus | vuln acid","A large weasel-like creature is here, preparing to attack.":"%ansi(brown)Giant wolverine | vuln mental\/gas","A large web is spread out across the cavern here, quivering slightly.":"%ansi(brown)Living web | nofight","A large, blue-skinned humanoid hovers in the water here.":"%ansi(brown)AGG Marid mufti | vuln fire","A large, flaming humanoid is standing here.":"%ansi(brown)Efreeti bey | vuln ice","A large, flaming humanoid stands here, grinning widely as he notices you.":"%ansi(brown)Efreeti emir | vuln ice","A large, gray wolf sits here, watching you carefully.":"%ansi(brown)AGG Mist wolf | vuln mental","A large, hulking creature sees you and charges!":"%ansi(brown)AGG Umber hulk | vuln pure\/light\/fire, flees","A large, imposing creature with a spiked tail is here.":"%ansi(brown)AGG Manticore | use unlife","A large, imposing humanoid stands here, surrounded by flames.":"%ansi(brown)Efreeti Malik | vuln ice","A large, old white dragon scowls at you as you enter, then attacks!":"%ansi(brown)AGG Ancient white dragon | vuln fire","A large, red toad covered in purple warts leaps at you!":"%ansi(brown)AGG Fire toad | vuln ice","A large, round ball of fungus rolls around here.":"%ansi(brown)Ascomoid | vuln pierce\/acid","A large, round creature with thin stalks protruding from its body is here.":"%ansi(brown)Gas spore | vuln acid, sickness","A light-blue colored dragon of immense size rests here, waiting for a meal.":"%ansi(brown)AGG Frost dragon | vuln fire","A Lord Eraditor charges towards you with an evil laugh.":"%ansi(brown)AGG Lord eraditor | vuln pure\/light","A Major Eraditor displays a vicious grin as it goes to attack":"%ansi(brown)AGG Major eraditor | vuln pure\/light","A medium-sized gargoyle-like creature stands here, grinning at you.":"%ansi(brown)AGG Berbelang | vuln unlife","A muscular humanoid shadow glides towards you.":"%ansi(brown)Shadow demon | vuln pure\/light\/fire","A patch of brown fungus grows in the cavern here.":"%ansi(brown)AGG Brown mold | vuln acid, immune non-ice spells","A regal humanoid formed from solid rock eyes you contemptuously.":"%ansi(brown)AGG Dao hetman | vuln air","A regal-looking humanoid dressed in the robes of a prince stands here.":"%ansi(brown)AGG Efreeti pasha | vuln ice","A repulsive sphere-shaped eye floats here.":"%ansi(brown)AGG Gauth | use light, flees to first direction","A serpent rises out of the water, grasping at you!":"%ansi(brown)AGG Water weird | remove poison","A shadowy form drifts around here.":"%ansi(brown)AGG Soul beckoner | vuln energy\/light, resist weapon","A shaggy ape-like humanoid is resting here.":"%ansi(brown)Taer","A skeletal bat of immense size swoops down at you!":"%ansi(brown)AGG Varrangoin | vuln pure\/light","A skeletal dog stands here, breathing fire.":"%ansi(brown)AGG Hell hound | vuln unlife","A small, reptile-like bird is here gawking at you.":"%ansi(brown)AGG Strider | vuln air","A snake with a human head slithers around here, looking for a meal.":"%ansi(brown)AGG Greater medusa | vuln unlife, stuns","A strange creature is wandering the caverns here.":"%ansi(brown)AGG Thessaltrice | vuln unlife, stuns","A strange creature with three legs and three arms waddles towards you.":"%ansi(brown)AGG Xorn | vuln slay elemental, steals gold to heal","A strange milky-white algae grows on the surface of the water":"%ansi(brown)Phycomid | vuln acid, parasite","A strange presence pervades the water here. (invisible)":"%ansi(brown)AGG Water elemental | vuln fire","A strange warped creature with eight snake heads stands here":"%ansi(brown)AGG thessalhydra | use unlife","A strangely-deformed dragon-like reptile is prowling here.":"%ansi(brown)AGG Dracolisk | vuln fire\/ice","A tall humanoid with a tentacled mouth looks at you and charges!":"%ansi(brown)AGG Mind flayer | forces spells from non-fighting players","A tall humanoid with purplish skin and a tentacled mouth stands here.":"%ansi(brown)AGG Elder mind flayer | forces spells from non-fighting players","A tall, imposing humanoid hovers in the water here, scowling at you":"%ansi(brown)AGG Marid padishah | vuln fire","A tall, imposing humanoid stands here, looking down upon you with scorn.":"%ansi(brown)AGG Efreeti sultan | vuln ice","A tall, imposing humanoid stands here, with hate in its eyes":"%ansi(brown)AGG Dao khan | vuln air","A tall, imposing humanoid within a storm, looks down on you with disdain.":"%ansi(brown)Djinni Caliph | vuln earth","A tall, light-blue skinned humanoid hovers in the water here.":"%ansi(brown)Marid beglerbeg | vuln fire","A tall, regal humanoid with deep blue skin hovers in the water here.":"%ansi(brown)Marid Atabeg | vuln fire","A tall, skeletal creature looks at you with glowing red eyes.":"%ansi(brown)Thassaloss | no vuln","A terrorite demon looks down at you with an amused smile.":"%ansi(brown)AGG Terrorite demon | vuln pure\/light, stuns, DoT","A thin layer of snow covers the ground here.":"%ansi(brown)AGG White pudding | vuln fire, VAPS SHIELD!","A three headed eraditor stands here getting ready for battle.":"%ansi(brown)AGG Eraditor | vuln pure\/light","A two-headed lesser eraditor stands here displaying an evil grin.":"%ansi(brown)Lesser eraditor | vuln pure\/light","A vaguely humanoid form made of ice rushes to attack you!":"%ansi(brown)AGG Ice elemental | vuln fire","A vaguely humanoid shape formed from fire stands here.":"%ansi(brown)AGG Fire elemental | vuln ice","A very large white wolf stands here, growling at you":"%ansi(brown)AGG Winter wolf | vuln mental","A winged hairless sword demon glares at you.":"%ansi(brown)AGG Sword demon | vuln pure\/light","An immense purple worm bursts from the floor as you approach!":"%ansi(brown)AGG Purple worm | vuln unlife","An imposing humanoid with turquoise skin hovers in the water here.":"%ansi(brown)AGG Marid shah | vuln fire","An ugly snake with a human head slithers around here, hissing at you.":"%ansi(brown)AGG Spirit naga","Gond the Wonderbringer is here, examining a small gem through an eyepiece":"%ansi(brown)Gond | shop, memory, rep","Morgoth the Valar God is standing in front of, yes - YOU!":"%ansi(brown)AGG Morgoth | vuln slay mythical, force flees, teleports","Something floats in the water here.":"%ansi(brown)Crystal Ooze","The sand here shifts slightly. (invisible) (hidden)":"%ansi(brown)AGG Sandling | vuln unlife","There is a shadow of a dragon on the wall.":"%ansi(brown)Shadow dragon | vuln slay dragon, area blindness","What looks like a boulder is stomping around here":"%ansi(brown)Boulder | vuln fire, high AC","You see a beautiful feminine body in the shadows.":"%ansi(brown)AGG Medusa | vuln unlife, stuns","You sense something nearby.":"%ansi(brown)AGG Tentamort | vuln unlife, FATAL INJECT"}</json>
      </var>
      <alias name="subsetup">
        <value>subkeys=%dbkeys(@sublist)
;#loopdb @sublist {#SUB %key %val}</value>
      </alias>
      <trigger priority="5961" trigontrig="false">
        <pattern>({@subkeys})</pattern>
        <value>#IF @wellsubs {#SUB %exec(@sublist.%1)}</value>
      </trigger>
      <var name="subkeys" type="StringList">
        <value>A bull-like creature with thick metal scales stands here|A crimson mist floats through the caverns, looking for blood.|A dark black cloak lies here, neatly folded.|A Djinni Vizier is here to end your sad life.|A faintly visible, almost transparent mist floats through the air.|A fearsome Balrog is here.|A flat, wet stone lies across the middle of the cavern.|A great Thonis demon is standing here contemplating your fate.|A hideous beast with long tentacles slithers around here, looking for food.|A hideous creature spots you and rushes to attack!|A hideous creature stands here, looking intently at you.|A hideous wormlike creature is crawling here.|A hideous, shambling creature sees you and rushes to attack! (hidden)|A huge beast with 8 heads stands here, breathing fire.|A huge dragon breathes fire at you as you arrive.|A huge floating brain with a beak and tentacles floats towards you.|A huge skeletal bat is prowling here.|A huge, ugly creature stands before you, grunting.|A human with jet-black skin stands here.|A large boulder sits here conspicuously.|A large fleshy web is stretched out across the cavern here.|A large humanoid creature made of rock stands here.|A large humanoid surrounded by wisps of ether stands here boldly.|A large reptilian bird flies at you!|A large reptilian creature shuffles around here.|A large round eye creature floats here.|A large snail, with sharp-spiked protrusions from its head slithers around.|A large toad with grayish skin mottled with blue sits here|A large tornado swirls here, threatening to carry you away.|A large violet-streaked mushroom grows here.|A large weasel-like creature is here, preparing to attack.|A large web is spread out across the cavern here, quivering slightly.|A large, blue-skinned humanoid hovers in the water here.|A large, flaming humanoid is standing here.|A large, flaming humanoid stands here, grinning widely as he notices you.|A large, gray wolf sits here, watching you carefully.|A large, hulking creature sees you and charges!|A large, imposing creature with a spiked tail is here.|A large, imposing humanoid stands here, surrounded by flames.|A large, old white dragon scowls at you as you enter, then attacks!|A large, red toad covered in purple warts leaps at you!|A large, round ball of fungus rolls around here.|A large, round creature with thin stalks protruding from its body is here.|A light-blue colored dragon of immense size rests here, waiting for a meal.|A Lord Eraditor charges towards you with an evil laugh.|A Major Eraditor displays a vicious grin as it goes to attack|A medium-sized gargoyle-like creature stands here, grinning at you.|A muscular humanoid shadow glides towards you.|A patch of brown fungus grows in the cavern here.|A regal humanoid formed from solid rock eyes you contemptuously.|A regal-looking humanoid dressed in the robes of a prince stands here.|A repulsive sphere-shaped eye floats here.|A serpent rises out of the water, grasping at you!|A shadowy form drifts around here.|A shaggy ape-like humanoid is resting here.|A skeletal bat of immense size swoops down at you!|A skeletal dog stands here, breathing fire.|A small, reptile-like bird is here gawking at you.|A snake with a human head slithers around here, looking for a meal.|A strange creature is wandering the caverns here.|A strange creature with three legs and three arms waddles towards you.|A strange milky-white algae grows on the surface of the water|A strange presence pervades the water here. (invisible)|A strange warped creature with eight snake heads stands here|A strangely-deformed dragon-like reptile is prowling here.|A tall humanoid with a tentacled mouth looks at you and charges!|A tall humanoid with purplish skin and a tentacled mouth stands here.|A tall, imposing humanoid hovers in the water here, scowling at you|A tall, imposing humanoid stands here, looking down upon you with scorn.|A tall, imposing humanoid stands here, with hate in its eyes|A tall, imposing humanoid within a storm, looks down on you with disdain.|A tall, light-blue skinned humanoid hovers in the water here.|A tall, regal humanoid with deep blue skin hovers in the water here.|A tall, skeletal creature looks at you with glowing red eyes.|A terrorite demon looks down at you with an amused smile.|A thin layer of snow covers the ground here.|A three headed eraditor stands here getting ready for battle.|A two-headed lesser eraditor stands here displaying an evil grin.|A vaguely humanoid form made of ice rushes to attack you!|A vaguely humanoid shape formed from fire stands here.|A very large white wolf stands here, growling at you|A winged hairless sword demon glares at you.|An immense purple worm bursts from the floor as you approach!|An imposing humanoid with turquoise skin hovers in the water here.|An ugly snake with a human head slithers around here, hissing at you.|Gond the Wonderbringer is here, examining a small gem through an eyepiece|Morgoth the Valar God is standing in front of, yes - YOU!|Something floats in the water here.|The sand here shifts slightly. (invisible) (hidden)|There is a shadow of a dragon on the wall.|What looks like a boulder is stomping around here|You see a beautiful feminine body in the shadows.|You sense something nearby.</value>
        <json>["A bull-like creature with thick metal scales stands here","A crimson mist floats through the caverns, looking for blood.","A dark black cloak lies here, neatly folded.","A Djinni Vizier is here to end your sad life.","A faintly visible, almost transparent mist floats through the air.","A fearsome Balrog is here.","A flat, wet stone lies across the middle of the cavern.","A great Thonis demon is standing here contemplating your fate.","A hideous beast with long tentacles slithers around here, looking for food.","A hideous creature spots you and rushes to attack!","A hideous creature stands here, looking intently at you.","A hideous wormlike creature is crawling here.","A hideous, shambling creature sees you and rushes to attack! (hidden)","A huge beast with 8 heads stands here, breathing fire.","A huge dragon breathes fire at you as you arrive.","A huge floating brain with a beak and tentacles floats towards you.","A huge skeletal bat is prowling here.","A huge, ugly creature stands before you, grunting.","A human with jet-black skin stands here.","A large boulder sits here conspicuously.","A large fleshy web is stretched out across the cavern here.","A large humanoid creature made of rock stands here.","A large humanoid surrounded by wisps of ether stands here boldly.","A large reptilian bird flies at you!","A large reptilian creature shuffles around here.","A large round eye creature floats here.","A large snail, with sharp-spiked protrusions from its head slithers around.","A large toad with grayish skin mottled with blue sits here","A large tornado swirls here, threatening to carry you away.","A large violet-streaked mushroom grows here.","A large weasel-like creature is here, preparing to attack.","A large web is spread out across the cavern here, quivering slightly.","A large, blue-skinned humanoid hovers in the water here.","A large, flaming humanoid is standing here.","A large, flaming humanoid stands here, grinning widely as he notices you.","A large, gray wolf sits here, watching you carefully.","A large, hulking creature sees you and charges!","A large, imposing creature with a spiked tail is here.","A large, imposing humanoid stands here, surrounded by flames.","A large, old white dragon scowls at you as you enter, then attacks!","A large, red toad covered in purple warts leaps at you!","A large, round ball of fungus rolls around here.","A large, round creature with thin stalks protruding from its body is here.","A light-blue colored dragon of immense size rests here, waiting for a meal.","A Lord Eraditor charges towards you with an evil laugh.","A Major Eraditor displays a vicious grin as it goes to attack","A medium-sized gargoyle-like creature stands here, grinning at you.","A muscular humanoid shadow glides towards you.","A patch of brown fungus grows in the cavern here.","A regal humanoid formed from solid rock eyes you contemptuously.","A regal-looking humanoid dressed in the robes of a prince stands here.","A repulsive sphere-shaped eye floats here.","A serpent rises out of the water, grasping at you!","A shadowy form drifts around here.","A shaggy ape-like humanoid is resting here.","A skeletal bat of immense size swoops down at you!","A skeletal dog stands here, breathing fire.","A small, reptile-like bird is here gawking at you.","A snake with a human head slithers around here, looking for a meal.","A strange creature is wandering the caverns here.","A strange creature with three legs and three arms waddles towards you.","A strange milky-white algae grows on the surface of the water","A strange presence pervades the water here. (invisible)","A strange warped creature with eight snake heads stands here","A strangely-deformed dragon-like reptile is prowling here.","A tall humanoid with a tentacled mouth looks at you and charges!","A tall humanoid with purplish skin and a tentacled mouth stands here.","A tall, imposing humanoid hovers in the water here, scowling at you","A tall, imposing humanoid stands here, looking down upon you with scorn.","A tall, imposing humanoid stands here, with hate in its eyes","A tall, imposing humanoid within a storm, looks down on you with disdain.","A tall, light-blue skinned humanoid hovers in the water here.","A tall, regal humanoid with deep blue skin hovers in the water here.","A tall, skeletal creature looks at you with glowing red eyes.","A terrorite demon looks down at you with an amused smile.","A thin layer of snow covers the ground here.","A three headed eraditor stands here getting ready for battle.","A two-headed lesser eraditor stands here displaying an evil grin.","A vaguely humanoid form made of ice rushes to attack you!","A vaguely humanoid shape formed from fire stands here.","A very large white wolf stands here, growling at you","A winged hairless sword demon glares at you.","An immense purple worm bursts from the floor as you approach!","An imposing humanoid with turquoise skin hovers in the water here.","An ugly snake with a human head slithers around here, hissing at you.","Gond the Wonderbringer is here, examining a small gem through an eyepiece","Morgoth the Valar God is standing in front of, yes - YOU!","Something floats in the water here.","The sand here shifts slightly. (invisible) (hidden)","There is a shadow of a dragon on the wall.","What looks like a boulder is stomping around here","You see a beautiful feminine body in the shadows.","You sense something nearby."]</json>
      </var>
      <var name="wellsubs">0</var>
    </class>
  </class>
  <class name="ui">
    <stat name="Statusbar" priority="95500">
      <value><![CDATA[%if(@gagprompt,%ansi( 11)%ansi(2)HP: %if(@currenthp<@currentmaxhp*0.15,%ansi(12,bold),%if(@currenthp<@currentmaxhp*0.30,%ansi(4,bold),%if(@currenthp<@currentmaxhp*0.6,%ansi(6),%if(@currenthp<@currentmaxhp*.85,%ansi(2),%ansi(10,bold))))) @currenthp%ansi(2)~(@currentmaxhp~)~ %ansi( 11)%ansi(2)MP: %if(@currentmana<@currentmaxmana*0.15,%ansi(12,bold),%if(@currentmana<@currentmaxmana*0.30,%ansi(4,bold),%if(@currentmana<@currentmaxmana*0.6,%ansi(6),%if(@currentmana<@currentmaxmana*.85,%ansi(2),%ansi(10,bold))))) @currentmana%ansi(2)~(@currentmaxmana~)~ %ansi( 11)%ansi(2)MV: %if(@currentmoves<@currentmaxmoves*0.15,%ansi(12,bold),%if(@currentmoves<@currentmaxmoves*0.30,%ansi(4,bold),%if(@currentmoves<@currentmaxmoves*0.6,%ansi(6),%if(@currentmoves<@currentmaxmoves*.85,%ansi(2),%ansi(10,bold))))) @currentmoves%ansi(2)~(@currentmaxmoves~) %ansi(11,bold) ~|~ ,)%ansi(15)%if(@aheal, MHP: @mhp  THP: @thp  GHP: @ghp  GPHP: @gphp~,) Damtype: @damtype %ansi(10)Leader: %ansi(11,bold)@leader%if(@blindleft>0,~ ~ Blindleft: @blindleft,)]]></value>
    </stat>
    <button name="assist" type="Toggle" variable="aassist" autosize="false" width="68" height="23" iconleft="false" color="gray" priority="117234">
      <caption>Assist: OFF</caption>
      <value>#IF @ispriest&lt;2 {afight=1}</value>
      <button>
        <caption>Assist: ON</caption>
      </button>
    </button>
    <class name="healbutton">
      <button name="heal" type="Toggle" variable="aheal" autosize="false" width="68" height="23" iconleft="false" color="gray" priority="117236">
        <caption>Heals: OFF</caption>
        <button>
          <caption>Heals: ON</caption>
        </button>
      </button>
    </class>
    <class name="rescuebutton" enabled="false">
      <button name="rescue" type="Toggle" variable="arescue" autosize="false" width="70" height="23" iconleft="false" color="gray" priority="117412">
        <caption>Rescue: OFF</caption>
        <button>
          <caption>Rescue: ON</caption>
        </button>
      </button>
    </class>
    <class name="copbuttons">
      <button name="cop" type="Toggle" variable="acop" iconleft="false" color="gray" priority="117333">
        <caption>Acop: OFF</caption>
        <button>
          <caption>Acop: ON</caption>
        </button>
      </button>
      <button name="recop" type="Toggle" variable="recop" autosize="false" width="70" height="23" iconleft="false" color="gray" priority="117353">
        <caption>Recop: OFF</caption>
        <button>
          <caption>Recop: ON</caption>
        </button>
      </button>
    </class>
    <class name="berserkbutton" enabled="false">
      <button name="berserk" type="Toggle" variable="aberserk" autosize="false" width="70" height="23" iconleft="false" color="gray" priority="117373">
        <caption>Berserk: OFF</caption>
        <button>
          <caption>Berserk: ON</caption>
        </button>
      </button>
    </class>
    <alias name="initbuttons">
      <value>#T- copbuttons
#T- ddancebutton
#T- berserkbutton
#T- healbutton
#T- rescuebutton
#IF @ismagician&gt;0 {#T+ copbuttons}
#IF (@ispriest&gt;0 or @isanimist=2) {#T+ healbutton}
#IF @isfighter&gt;0 {#T+ berserkbutton}
#IF @isfighter=2 {#T+ ddancebutton}
#IF @isfighter+@istemplar&gt;0 {#T+ rescuebutton}</value>
    </alias>
    <button name="leading" type="Toggle" variable="leading" autosize="false" width="78" height="23" toolbar="2" iconleft="false" color="gray" priority="117474">
      <caption>Leading: OFF</caption>
      <value>loot=1</value>
      <button>
        <caption>Leading: ON</caption>
      </button>
    </button>
    <button name="loot" type="Toggle" variable="loot" toolbar="2" iconleft="false" color="gray" priority="117485">
      <caption>Loot: OFF</caption>
      <button>
        <caption>Loot: ON</caption>
      </button>
    </button>
    <button name="butcher" type="Toggle" variable="butcher" autosize="false" width="75" height="23" toolbar="2" iconleft="false" color="gray" priority="117487">
      <caption>Butcher: OFF</caption>
      <button>
        <caption>Butcher: ON</caption>
      </button>
    </button>
    <button name="fight" type="Toggle" variable="afight" autosize="false" width="68" height="23" iconleft="false" color="gray" priority="117240">
      <caption>Fight: OFF</caption>
      <value>aassist=1</value>
      <button>
        <caption>Fight: ON</caption>
      </button>
    </button>
    <button type="Toggle" variable="soloing" toolbar="2" iconleft="false" color="gray" priority="125832">
      <caption>Solo: OFF</caption>
      <value>leading=1
loot=0</value>
      <button>
        <caption>Solo: ON</caption>
      </button>
    </button>
    <class name="damagewords">
      <trigger priority="173260">
        <pattern>{ atomize }</pattern>
        <value>#CW 10</value>
      </trigger>
      <trigger priority="173270">
        <pattern>{ pulverize }</pattern>
        <value>#cw 9</value>
      </trigger>
      <trigger priority="173280">
        <pattern>{ ultraslay }</pattern>
        <value>#cw 11</value>
      </trigger>
      <trigger priority="173280">
        <pattern>{ ~*~*~*ULTRASLAY~*~*~* }</pattern>
        <value>#cw 12</value>
      </trigger>
      <trigger priority="173280">
        <pattern>{ ~*~*~*U~*L~*T~*R~*A~*S~*L~*A~*Y~*~*~* }</pattern>
        <value>#CW 13</value>
      </trigger>
      <trigger priority="173280">
        <pattern>{ ~*~*~*SPANK~*~*~* }</pattern>
        <value>#cw 14</value>
      </trigger>
      <trigger priority="173270">
        <pattern>{ vaporize }</pattern>
        <value>#cw 8</value>
      </trigger>
    </class>
    <class name="ddancebutton" enabled="false">
      <button name="ddance" type="Toggle" variable="addance" autosize="false" width="75" height="23" iconleft="false" color="gray" priority="117364">
        <caption>Ddance: OFF</caption>
        <button>
          <caption>Ddance: ON</caption>
        </button>
      </button>
    </class>
  </class>
  <alias name="readme">
    <value><![CDATA[#Say Welcome to DanimalScript public!
#say In order to get started there's a few things you'll need to know.
#say ----
#say First. This script only supports the default prompt. If you previously ran Krubba script,
#say You will have to reset it to default using the command, 'display'
#say ----
#say Setting up a weapon container: type "weaponcontainer=example" where example is a keyword for your weapon bag.
#say The script will assume you can wield any weapon in that container (otherwise why would it be in there~?)
#say a reasonably complete list of useful weapons is already in the script, but if you have one you'd like to use
#say that isn't you need to edit a couple variables 
#say in damtypes/~@weaponlist, you need to enter the full name (ex: a pilfered parang) and a unique keyword (ex: parang)
#say in damtypes/~@masterweaponlist, you need to add the full name to the list under the damtype you wish it to correspond to
#say the list under each damtype in masterweaponlist is a priority list of which weapon is preferred. The first weapon you
#say have will be used. if none in the list are in your weapon bag, it will default to the normal list.
#say ----
#say When you log in a new character, you must run the alias 'scsetup' and the script will take over, setting everything
#say up for that character's class to behave appropriately. Not all classes are configured perfectly. Here's how to edit the defaults:
#say in damtypes/damagesetup I set most of the settings for the various classes.
#say the relevant variables are as follows:
#say 
#say primarystab set this to backstab or murder if you want to do those when you can, regardless of mana
#say secondarystab set this to backstab or murder if you want to do those only when your mana is below lowmana
#say primaryskill This has priority after stab, but before spells
#say lowmanaspell cast this spell if you're below lowmana
#say lowmanaskill this is usually headbang if you have it.
#say mainheal should either be blank, pow, true, or burst.
#say 
#say damspells is a databaserecord containing all the spells you want to cast linked with damtype.
#say to populate the list the command is '#ADDKEY damspells damtype "cast 'example spell'"'
#say most tweaks you might want to make should be doable in this alias
#say ----
#say spell switch on hit. The script will often (especially in the well) set your damage spell based upon who you're hitting
#say you can turn this off and make it cast only what you've told it to cast by setting spellswitchonhit=0
#say if you want to edit the list of mobs and the damtypes it switches to on them, edit the list in ~@onhitdamtypes
#say ----
#say Warlocks have special code to make them tof at mana over 1000 unless the mob is immune or resistant to fire, or you're
#say currently using ice. This helps, in theory, in exp, or afk pging, but since the immuneorresfiremobs list is not
#say complete, it can wind up with you casting fire at the wrong times if you're killing something obscure. to turn it off
#say you can set tofathighmana=0
#say ----
#say 
#say Spell upkeep.
#say 
#say the command 'aff <group|solo>' will set up your spell upkeep for the specified activity.
#say the major difference is group doesn't keep AC spells. I think the logic for selecting which to cast, and which not to
#say is pretty sound, but if you want to edit the defaults for the aff group and aff solo alias, you can edit the list in
#say the alias 'determineaffectstokeep' under affectslist
#say 
#say ~@getregen has it ask a random non-leader priest in the group for regen if you don't have it.
#say to manually modify affects upkeep, 'aff <add|remove> "name of spell"' is the command you want. Ex: aff add "holy armor"
#say ----
#say 
#say Misc. commands:
#say 
#say findguide - while standing at thalos obelisk, slow walks a path to find the guide. use invis.
#say damscan # <eff> - spams group with a top damage thing of the top # damagers. if you add the eff flag, it does damage efficiency instead.
#say butch [#] -- butchers # corpses, if number is not given, it butchers 3.
#say poollook target [reset] -- sends look 1.target, then when sent again, look 2.target etc until poollook reset resets the number
#say spellswitch damtype -- switches spell to the specified damtype. ex: spellswitch fire. defaults to normal if no spell is set for the given damtypes
#say use damtype -- if leading, sends gt use damtype, whether leading or not, weaponswitches to the appropriate weapon, and sets the spell.
#say showfrags <channel> -- shows your frags. ex: showfrags gtf ,
#say snh -- short for sumnotheres, short for summon not heres. using the last groupscan you did, tell all priests in the same room as you to summon all the players not in the same room as you.








]]></value>
  </alias>
  <loc name="dylma" color="blue">
    <value>2</value>
  </loc>
  <tab name="danimal"/>
  <tab name="grou"/>
  <var name="combatpulses">351</var>
</window>
<window name="tell" commandline="false" statusbar="false" dockalign="Top" left="1051" top="289" width="530" height="994" host="none">
  <uid>{856C42AF-734A-4ED4-BE79-FE995F5B06AF}</uid>
  <dockuid>{601F6102-6F51-4839-B1E5-381D54467980}</dockuid>
  <packages>English Directions|English Keypad|Clickable URLs|unsavory|DSPublic</packages>
</window>
</cmud>
